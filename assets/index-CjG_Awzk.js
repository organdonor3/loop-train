const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-BjBWlbGG.js","assets/webworkerAll-kpWzgapQ.js","assets/colorToUniform-Dyr1TN0r.js","assets/WebGPURenderer-BnV0dR0R.js","assets/SharedSystems-ru8ZP00h.js","assets/WebGLRenderer-D2PLHObe.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();function Na(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var C0={exports:{}},Da={},k0={exports:{}},U={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Br=Symbol.for("react.element"),F1=Symbol.for("react.portal"),j1=Symbol.for("react.fragment"),B1=Symbol.for("react.strict_mode"),V1=Symbol.for("react.profiler"),O1=Symbol.for("react.provider"),z1=Symbol.for("react.context"),G1=Symbol.for("react.forward_ref"),U1=Symbol.for("react.suspense"),$1=Symbol.for("react.memo"),W1=Symbol.for("react.lazy"),Dd=Symbol.iterator;function H1(e){return e===null||typeof e!="object"?null:(e=Dd&&e[Dd]||e["@@iterator"],typeof e=="function"?e:null)}var T0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P0=Object.assign,M0={};function fn(e,t,s){this.props=e,this.context=t,this.refs=M0,this.updater=s||T0}fn.prototype.isReactComponent={};fn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};fn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function A0(){}A0.prototype=fn.prototype;function Gu(e,t,s){this.props=e,this.context=t,this.refs=M0,this.updater=s||T0}var Uu=Gu.prototype=new A0;Uu.constructor=Gu;P0(Uu,fn.prototype);Uu.isPureReactComponent=!0;var Id=Array.isArray,E0=Object.prototype.hasOwnProperty,$u={current:null},R0={key:!0,ref:!0,__self:!0,__source:!0};function N0(e,t,s){var i,n={},r=null,o=null;if(t!=null)for(i in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(r=""+t.key),t)E0.call(t,i)&&!R0.hasOwnProperty(i)&&(n[i]=t[i]);var a=arguments.length-2;if(a===1)n.children=s;else if(1<a){for(var l=Array(a),h=0;h<a;h++)l[h]=arguments[h+2];n.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)n[i]===void 0&&(n[i]=a[i]);return{$$typeof:Br,type:e,key:r,ref:o,props:n,_owner:$u.current}}function Y1(e,t){return{$$typeof:Br,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Wu(e){return typeof e=="object"&&e!==null&&e.$$typeof===Br}function X1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var Ld=/\/+/g;function al(e,t){return typeof e=="object"&&e!==null&&e.key!=null?X1(""+e.key):t.toString(36)}function Do(e,t,s,i,n){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Br:case F1:o=!0}}if(o)return o=e,n=n(o),e=i===""?"."+al(o,0):i,Id(n)?(s="",e!=null&&(s=e.replace(Ld,"$&/")+"/"),Do(n,t,s,"",function(h){return h})):n!=null&&(Wu(n)&&(n=Y1(n,s+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(Ld,"$&/")+"/")+e)),t.push(n)),1;if(o=0,i=i===""?".":i+":",Id(e))for(var a=0;a<e.length;a++){r=e[a];var l=i+al(r,a);o+=Do(r,t,s,l,n)}else if(l=H1(e),typeof l=="function")for(e=l.call(e),a=0;!(r=e.next()).done;)r=r.value,l=i+al(r,a++),o+=Do(r,t,s,l,n);else if(r==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function qr(e,t,s){if(e==null)return e;var i=[],n=0;return Do(e,i,"","",function(r){return t.call(s,r,n++)}),i}function K1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ht={current:null},Io={transition:null},q1={ReactCurrentDispatcher:Ht,ReactCurrentBatchConfig:Io,ReactCurrentOwner:$u};function D0(){throw Error("act(...) is not supported in production builds of React.")}U.Children={map:qr,forEach:function(e,t,s){qr(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return qr(e,function(){t++}),t},toArray:function(e){return qr(e,function(t){return t})||[]},only:function(e){if(!Wu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};U.Component=fn;U.Fragment=j1;U.Profiler=V1;U.PureComponent=Gu;U.StrictMode=B1;U.Suspense=U1;U.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q1;U.act=D0;U.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=P0({},e.props),n=e.key,r=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,o=$u.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)E0.call(t,l)&&!R0.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=s;else if(1<l){a=Array(l);for(var h=0;h<l;h++)a[h]=arguments[h+2];i.children=a}return{$$typeof:Br,type:e.type,key:n,ref:r,props:i,_owner:o}};U.createContext=function(e){return e={$$typeof:z1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:O1,_context:e},e.Consumer=e};U.createElement=N0;U.createFactory=function(e){var t=N0.bind(null,e);return t.type=e,t};U.createRef=function(){return{current:null}};U.forwardRef=function(e){return{$$typeof:G1,render:e}};U.isValidElement=Wu;U.lazy=function(e){return{$$typeof:W1,_payload:{_status:-1,_result:e},_init:K1}};U.memo=function(e,t){return{$$typeof:$1,type:e,compare:t===void 0?null:t}};U.startTransition=function(e){var t=Io.transition;Io.transition={};try{e()}finally{Io.transition=t}};U.unstable_act=D0;U.useCallback=function(e,t){return Ht.current.useCallback(e,t)};U.useContext=function(e){return Ht.current.useContext(e)};U.useDebugValue=function(){};U.useDeferredValue=function(e){return Ht.current.useDeferredValue(e)};U.useEffect=function(e,t){return Ht.current.useEffect(e,t)};U.useId=function(){return Ht.current.useId()};U.useImperativeHandle=function(e,t,s){return Ht.current.useImperativeHandle(e,t,s)};U.useInsertionEffect=function(e,t){return Ht.current.useInsertionEffect(e,t)};U.useLayoutEffect=function(e,t){return Ht.current.useLayoutEffect(e,t)};U.useMemo=function(e,t){return Ht.current.useMemo(e,t)};U.useReducer=function(e,t,s){return Ht.current.useReducer(e,t,s)};U.useRef=function(e){return Ht.current.useRef(e)};U.useState=function(e){return Ht.current.useState(e)};U.useSyncExternalStore=function(e,t,s){return Ht.current.useSyncExternalStore(e,t,s)};U.useTransition=function(){return Ht.current.useTransition()};U.version="18.3.1";k0.exports=U;var M=k0.exports;const Hu=Na(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q1=M,Z1=Symbol.for("react.element"),J1=Symbol.for("react.fragment"),tw=Object.prototype.hasOwnProperty,ew=Q1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sw={key:!0,ref:!0,__self:!0,__source:!0};function I0(e,t,s){var i,n={},r=null,o=null;s!==void 0&&(r=""+s),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)tw.call(t,i)&&!sw.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:Z1,type:e,key:r,ref:o,props:n,_owner:ew.current}}Da.Fragment=J1;Da.jsx=I0;Da.jsxs=I0;C0.exports=Da;var w=C0.exports,mh={},L0={exports:{}},he={},F0={exports:{}},j0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,N){var j=E.length;E.push(N);t:for(;0<j;){var Z=j-1>>>1,rt=E[Z];if(0<n(rt,N))E[Z]=N,E[j]=rt,j=Z;else break t}}function s(E){return E.length===0?null:E[0]}function i(E){if(E.length===0)return null;var N=E[0],j=E.pop();if(j!==N){E[0]=j;t:for(var Z=0,rt=E.length,Be=rt>>>1;Z<Be;){var Ve=2*(Z+1)-1,ms=E[Ve],te=Ve+1,zs=E[te];if(0>n(ms,j))te<rt&&0>n(zs,ms)?(E[Z]=zs,E[te]=j,Z=te):(E[Z]=ms,E[Ve]=j,Z=Ve);else if(te<rt&&0>n(zs,j))E[Z]=zs,E[te]=j,Z=te;else break t}}return N}function n(E,N){var j=E.sortIndex-N.sortIndex;return j!==0?j:E.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],h=[],u=1,c=null,d=3,f=!1,g=!1,m=!1,x=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(E){for(var N=s(h);N!==null;){if(N.callback===null)i(h);else if(N.startTime<=E)i(h),N.sortIndex=N.expirationTime,t(l,N);else break;N=s(h)}}function _(E){if(m=!1,v(E),!g)if(s(l)!==null)g=!0,I(S);else{var N=s(h);N!==null&&D(_,N.startTime-E)}}function S(E,N){g=!1,m&&(m=!1,p(k),k=-1),f=!0;var j=d;try{for(v(N),c=s(l);c!==null&&(!(c.expirationTime>N)||E&&!R());){var Z=c.callback;if(typeof Z=="function"){c.callback=null,d=c.priorityLevel;var rt=Z(c.expirationTime<=N);N=e.unstable_now(),typeof rt=="function"?c.callback=rt:c===s(l)&&i(l),v(N)}else i(l);c=s(l)}if(c!==null)var Be=!0;else{var Ve=s(h);Ve!==null&&D(_,Ve.startTime-N),Be=!1}return Be}finally{c=null,d=j,f=!1}}var b=!1,C=null,k=-1,A=5,T=-1;function R(){return!(e.unstable_now()-T<A)}function $(){if(C!==null){var E=e.unstable_now();T=E;var N=!0;try{N=C(!0,E)}finally{N?V():(b=!1,C=null)}}else b=!1}var V;if(typeof y=="function")V=function(){y($)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,Se=Y.port2;Y.port1.onmessage=$,V=function(){Se.postMessage(null)}}else V=function(){x($,0)};function I(E){C=E,b||(b=!0,V())}function D(E,N){k=x(function(){E(e.unstable_now())},N)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){g||f||(g=!0,I(S))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return s(l)},e.unstable_next=function(E){switch(d){case 1:case 2:case 3:var N=3;break;default:N=d}var j=d;d=N;try{return E()}finally{d=j}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,N){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var j=d;d=E;try{return N()}finally{d=j}},e.unstable_scheduleCallback=function(E,N,j){var Z=e.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?Z+j:Z):j=Z,E){case 1:var rt=-1;break;case 2:rt=250;break;case 5:rt=1073741823;break;case 4:rt=1e4;break;default:rt=5e3}return rt=j+rt,E={id:u++,callback:N,priorityLevel:E,startTime:j,expirationTime:rt,sortIndex:-1},j>Z?(E.sortIndex=j,t(h,E),s(l)===null&&E===s(h)&&(m?(p(k),k=-1):m=!0,D(_,j-Z))):(E.sortIndex=rt,t(l,E),g||f||(g=!0,I(S))),E},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(E){var N=d;return function(){var j=d;d=N;try{return E.apply(this,arguments)}finally{d=j}}}})(j0);F0.exports=j0;var iw=F0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nw=M,ae=iw;function P(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var B0=new Set,lr={};function yi(e,t){Zi(e,t),Zi(e+"Capture",t)}function Zi(e,t){for(lr[e]=t,e=0;e<t.length;e++)B0.add(t[e])}var ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gh=Object.prototype.hasOwnProperty,rw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fd={},jd={};function ow(e){return gh.call(jd,e)?!0:gh.call(Fd,e)?!1:rw.test(e)?jd[e]=!0:(Fd[e]=!0,!1)}function aw(e,t,s,i){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function lw(e,t,s,i){if(t===null||typeof t>"u"||aw(e,t,s,i))return!0;if(i)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Yt(e,t,s,i,n,r,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=o}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){It[e]=new Yt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];It[t]=new Yt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){It[e]=new Yt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){It[e]=new Yt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){It[e]=new Yt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){It[e]=new Yt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){It[e]=new Yt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){It[e]=new Yt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){It[e]=new Yt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Yu=/[\-:]([a-z])/g;function Xu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Yu,Xu);It[t]=new Yt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Yu,Xu);It[t]=new Yt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Yu,Xu);It[t]=new Yt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){It[e]=new Yt(e,1,!1,e.toLowerCase(),null,!1,!1)});It.xlinkHref=new Yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){It[e]=new Yt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ku(e,t,s,i){var n=It.hasOwnProperty(t)?It[t]:null;(n!==null?n.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(lw(t,s,n,i)&&(s=null),i||n===null?ow(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):n.mustUseProperty?e[n.propertyName]=s===null?n.type===3?!1:"":s:(t=n.attributeName,i=n.attributeNamespace,s===null?e.removeAttribute(t):(n=n.type,s=n===3||n===4&&s===!0?"":""+s,i?e.setAttributeNS(i,t,s):e.setAttribute(t,s))))}var ps=nw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qr=Symbol.for("react.element"),Pi=Symbol.for("react.portal"),Mi=Symbol.for("react.fragment"),qu=Symbol.for("react.strict_mode"),yh=Symbol.for("react.profiler"),V0=Symbol.for("react.provider"),O0=Symbol.for("react.context"),Qu=Symbol.for("react.forward_ref"),xh=Symbol.for("react.suspense"),vh=Symbol.for("react.suspense_list"),Zu=Symbol.for("react.memo"),xs=Symbol.for("react.lazy"),z0=Symbol.for("react.offscreen"),Bd=Symbol.iterator;function xn(e){return e===null||typeof e!="object"?null:(e=Bd&&e[Bd]||e["@@iterator"],typeof e=="function"?e:null)}var ct=Object.assign,ll;function In(e){if(ll===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);ll=t&&t[1]||""}return`
`+ll+e}var hl=!1;function ul(e,t){if(!e||hl)return"";hl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var i=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){i=h}e.call(t.prototype)}else{try{throw Error()}catch(h){i=h}e()}}catch(h){if(h&&i&&typeof h.stack=="string"){for(var n=h.stack.split(`
`),r=i.stack.split(`
`),o=n.length-1,a=r.length-1;1<=o&&0<=a&&n[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(n[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||n[o]!==r[a]){var l=`
`+n[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{hl=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?In(e):""}function hw(e){switch(e.tag){case 5:return In(e.type);case 16:return In("Lazy");case 13:return In("Suspense");case 19:return In("SuspenseList");case 0:case 2:case 15:return e=ul(e.type,!1),e;case 11:return e=ul(e.type.render,!1),e;case 1:return e=ul(e.type,!0),e;default:return""}}function wh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Mi:return"Fragment";case Pi:return"Portal";case yh:return"Profiler";case qu:return"StrictMode";case xh:return"Suspense";case vh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case O0:return(e.displayName||"Context")+".Consumer";case V0:return(e._context.displayName||"Context")+".Provider";case Qu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Zu:return t=e.displayName||null,t!==null?t:wh(e.type)||"Memo";case xs:t=e._payload,e=e._init;try{return wh(e(t))}catch{}}return null}function uw(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wh(t);case 8:return t===qu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ds(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function G0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function cw(e){var t=G0(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,r=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Zr(e){e._valueTracker||(e._valueTracker=cw(e))}function U0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),i="";return e&&(i=G0(e)?e.checked?"true":"false":e.value),e=i,e!==s?(t.setValue(e),!0):!1}function qo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function _h(e,t){var s=t.checked;return ct({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Vd(e,t){var s=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;s=Ds(t.value!=null?t.value:s),e._wrapperState={initialChecked:i,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $0(e,t){t=t.checked,t!=null&&Ku(e,"checked",t,!1)}function Sh(e,t){$0(e,t);var s=Ds(t.value),i=t.type;if(s!=null)i==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?bh(e,t.type,s):t.hasOwnProperty("defaultValue")&&bh(e,t.type,Ds(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Od(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function bh(e,t,s){(t!=="number"||qo(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Ln=Array.isArray;function Wi(e,t,s,i){if(e=e.options,t){t={};for(var n=0;n<s.length;n++)t["$"+s[n]]=!0;for(s=0;s<e.length;s++)n=t.hasOwnProperty("$"+e[s].value),e[s].selected!==n&&(e[s].selected=n),n&&i&&(e[s].defaultSelected=!0)}else{for(s=""+Ds(s),t=null,n=0;n<e.length;n++){if(e[n].value===s){e[n].selected=!0,i&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Ch(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(P(91));return ct({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zd(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(P(92));if(Ln(s)){if(1<s.length)throw Error(P(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:Ds(s)}}function W0(e,t){var s=Ds(t.value),i=Ds(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),i!=null&&(e.defaultValue=""+i)}function Gd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function H0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?H0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Jr,Y0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,i,n){MSApp.execUnsafeLocalFunction(function(){return e(t,s,i,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Jr=Jr||document.createElement("div"),Jr.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Jr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function hr(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Wn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dw=["Webkit","ms","Moz","O"];Object.keys(Wn).forEach(function(e){dw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Wn[t]=Wn[e]})});function X0(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Wn.hasOwnProperty(e)&&Wn[e]?(""+t).trim():t+"px"}function K0(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var i=s.indexOf("--")===0,n=X0(s,t[s],i);s==="float"&&(s="cssFloat"),i?e.setProperty(s,n):e[s]=n}}var fw=ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Th(e,t){if(t){if(fw[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(P(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(P(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(P(61))}if(t.style!=null&&typeof t.style!="object")throw Error(P(62))}}function Ph(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mh=null;function Ju(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ah=null,Hi=null,Yi=null;function Ud(e){if(e=zr(e)){if(typeof Ah!="function")throw Error(P(280));var t=e.stateNode;t&&(t=Ba(t),Ah(e.stateNode,e.type,t))}}function q0(e){Hi?Yi?Yi.push(e):Yi=[e]:Hi=e}function Q0(){if(Hi){var e=Hi,t=Yi;if(Yi=Hi=null,Ud(e),t)for(e=0;e<t.length;e++)Ud(t[e])}}function Z0(e,t){return e(t)}function J0(){}var cl=!1;function tg(e,t,s){if(cl)return e(t,s);cl=!0;try{return Z0(e,t,s)}finally{cl=!1,(Hi!==null||Yi!==null)&&(J0(),Q0())}}function ur(e,t){var s=e.stateNode;if(s===null)return null;var i=Ba(s);if(i===null)return null;s=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break t;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(P(231,t,typeof s));return s}var Eh=!1;if(ls)try{var vn={};Object.defineProperty(vn,"passive",{get:function(){Eh=!0}}),window.addEventListener("test",vn,vn),window.removeEventListener("test",vn,vn)}catch{Eh=!1}function pw(e,t,s,i,n,r,o,a,l){var h=Array.prototype.slice.call(arguments,3);try{t.apply(s,h)}catch(u){this.onError(u)}}var Hn=!1,Qo=null,Zo=!1,Rh=null,mw={onError:function(e){Hn=!0,Qo=e}};function gw(e,t,s,i,n,r,o,a,l){Hn=!1,Qo=null,pw.apply(mw,arguments)}function yw(e,t,s,i,n,r,o,a,l){if(gw.apply(this,arguments),Hn){if(Hn){var h=Qo;Hn=!1,Qo=null}else throw Error(P(198));Zo||(Zo=!0,Rh=h)}}function xi(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function eg(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $d(e){if(xi(e)!==e)throw Error(P(188))}function xw(e){var t=e.alternate;if(!t){if(t=xi(e),t===null)throw Error(P(188));return t!==e?null:e}for(var s=e,i=t;;){var n=s.return;if(n===null)break;var r=n.alternate;if(r===null){if(i=n.return,i!==null){s=i;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===s)return $d(n),e;if(r===i)return $d(n),t;r=r.sibling}throw Error(P(188))}if(s.return!==i.return)s=n,i=r;else{for(var o=!1,a=n.child;a;){if(a===s){o=!0,s=n,i=r;break}if(a===i){o=!0,i=n,s=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===s){o=!0,s=r,i=n;break}if(a===i){o=!0,i=r,s=n;break}a=a.sibling}if(!o)throw Error(P(189))}}if(s.alternate!==i)throw Error(P(190))}if(s.tag!==3)throw Error(P(188));return s.stateNode.current===s?e:t}function sg(e){return e=xw(e),e!==null?ig(e):null}function ig(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ig(e);if(t!==null)return t;e=e.sibling}return null}var ng=ae.unstable_scheduleCallback,Wd=ae.unstable_cancelCallback,vw=ae.unstable_shouldYield,ww=ae.unstable_requestPaint,xt=ae.unstable_now,_w=ae.unstable_getCurrentPriorityLevel,tc=ae.unstable_ImmediatePriority,rg=ae.unstable_UserBlockingPriority,Jo=ae.unstable_NormalPriority,Sw=ae.unstable_LowPriority,og=ae.unstable_IdlePriority,Ia=null,He=null;function bw(e){if(He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(Ia,e,void 0,(e.current.flags&128)===128)}catch{}}var Re=Math.clz32?Math.clz32:Tw,Cw=Math.log,kw=Math.LN2;function Tw(e){return e>>>=0,e===0?32:31-(Cw(e)/kw|0)|0}var to=64,eo=4194304;function Fn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ta(e,t){var s=e.pendingLanes;if(s===0)return 0;var i=0,n=e.suspendedLanes,r=e.pingedLanes,o=s&268435455;if(o!==0){var a=o&~n;a!==0?i=Fn(a):(r&=o,r!==0&&(i=Fn(r)))}else o=s&~n,o!==0?i=Fn(o):r!==0&&(i=Fn(r));if(i===0)return 0;if(t!==0&&t!==i&&!(t&n)&&(n=i&-i,r=t&-t,n>=r||n===16&&(r&4194240)!==0))return t;if(i&4&&(i|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)s=31-Re(t),n=1<<s,i|=e[s],t&=~n;return i}function Pw(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mw(e,t){for(var s=e.suspendedLanes,i=e.pingedLanes,n=e.expirationTimes,r=e.pendingLanes;0<r;){var o=31-Re(r),a=1<<o,l=n[o];l===-1?(!(a&s)||a&i)&&(n[o]=Pw(a,t)):l<=t&&(e.expiredLanes|=a),r&=~a}}function Nh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ag(){var e=to;return to<<=1,!(to&4194240)&&(to=64),e}function dl(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Vr(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Re(t),e[t]=s}function Aw(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<s;){var n=31-Re(s),r=1<<n;t[n]=0,i[n]=-1,e[n]=-1,s&=~r}}function ec(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var i=31-Re(s),n=1<<i;n&t|e[i]&t&&(e[i]|=t),s&=~n}}var K=0;function lg(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var hg,sc,ug,cg,dg,Dh=!1,so=[],ks=null,Ts=null,Ps=null,cr=new Map,dr=new Map,ws=[],Ew="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hd(e,t){switch(e){case"focusin":case"focusout":ks=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":Ps=null;break;case"pointerover":case"pointerout":cr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dr.delete(t.pointerId)}}function wn(e,t,s,i,n,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:s,eventSystemFlags:i,nativeEvent:r,targetContainers:[n]},t!==null&&(t=zr(t),t!==null&&sc(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function Rw(e,t,s,i,n){switch(t){case"focusin":return ks=wn(ks,e,t,s,i,n),!0;case"dragenter":return Ts=wn(Ts,e,t,s,i,n),!0;case"mouseover":return Ps=wn(Ps,e,t,s,i,n),!0;case"pointerover":var r=n.pointerId;return cr.set(r,wn(cr.get(r)||null,e,t,s,i,n)),!0;case"gotpointercapture":return r=n.pointerId,dr.set(r,wn(dr.get(r)||null,e,t,s,i,n)),!0}return!1}function fg(e){var t=ii(e.target);if(t!==null){var s=xi(t);if(s!==null){if(t=s.tag,t===13){if(t=eg(s),t!==null){e.blockedOn=t,dg(e.priority,function(){ug(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Lo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Ih(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var i=new s.constructor(s.type,s);Mh=i,s.target.dispatchEvent(i),Mh=null}else return t=zr(s),t!==null&&sc(t),e.blockedOn=s,!1;t.shift()}return!0}function Yd(e,t,s){Lo(e)&&s.delete(t)}function Nw(){Dh=!1,ks!==null&&Lo(ks)&&(ks=null),Ts!==null&&Lo(Ts)&&(Ts=null),Ps!==null&&Lo(Ps)&&(Ps=null),cr.forEach(Yd),dr.forEach(Yd)}function _n(e,t){e.blockedOn===t&&(e.blockedOn=null,Dh||(Dh=!0,ae.unstable_scheduleCallback(ae.unstable_NormalPriority,Nw)))}function fr(e){function t(n){return _n(n,e)}if(0<so.length){_n(so[0],e);for(var s=1;s<so.length;s++){var i=so[s];i.blockedOn===e&&(i.blockedOn=null)}}for(ks!==null&&_n(ks,e),Ts!==null&&_n(Ts,e),Ps!==null&&_n(Ps,e),cr.forEach(t),dr.forEach(t),s=0;s<ws.length;s++)i=ws[s],i.blockedOn===e&&(i.blockedOn=null);for(;0<ws.length&&(s=ws[0],s.blockedOn===null);)fg(s),s.blockedOn===null&&ws.shift()}var Xi=ps.ReactCurrentBatchConfig,ea=!0;function Dw(e,t,s,i){var n=K,r=Xi.transition;Xi.transition=null;try{K=1,ic(e,t,s,i)}finally{K=n,Xi.transition=r}}function Iw(e,t,s,i){var n=K,r=Xi.transition;Xi.transition=null;try{K=4,ic(e,t,s,i)}finally{K=n,Xi.transition=r}}function ic(e,t,s,i){if(ea){var n=Ih(e,t,s,i);if(n===null)Sl(e,t,i,sa,s),Hd(e,i);else if(Rw(n,e,t,s,i))i.stopPropagation();else if(Hd(e,i),t&4&&-1<Ew.indexOf(e)){for(;n!==null;){var r=zr(n);if(r!==null&&hg(r),r=Ih(e,t,s,i),r===null&&Sl(e,t,i,sa,s),r===n)break;n=r}n!==null&&i.stopPropagation()}else Sl(e,t,i,null,s)}}var sa=null;function Ih(e,t,s,i){if(sa=null,e=Ju(i),e=ii(e),e!==null)if(t=xi(e),t===null)e=null;else if(s=t.tag,s===13){if(e=eg(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return sa=e,null}function pg(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_w()){case tc:return 1;case rg:return 4;case Jo:case Sw:return 16;case og:return 536870912;default:return 16}default:return 16}}var Ss=null,nc=null,Fo=null;function mg(){if(Fo)return Fo;var e,t=nc,s=t.length,i,n="value"in Ss?Ss.value:Ss.textContent,r=n.length;for(e=0;e<s&&t[e]===n[e];e++);var o=s-e;for(i=1;i<=o&&t[s-i]===n[r-i];i++);return Fo=n.slice(e,1<i?1-i:void 0)}function jo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function io(){return!0}function Xd(){return!1}function ue(e){function t(s,i,n,r,o){this._reactName=s,this._targetInst=n,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(s=e[a],this[a]=s?s(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?io:Xd,this.isPropagationStopped=Xd,this}return ct(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=io)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=io)},persist:function(){},isPersistent:io}),t}var pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rc=ue(pn),Or=ct({},pn,{view:0,detail:0}),Lw=ue(Or),fl,pl,Sn,La=ct({},Or,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Sn&&(Sn&&e.type==="mousemove"?(fl=e.screenX-Sn.screenX,pl=e.screenY-Sn.screenY):pl=fl=0,Sn=e),fl)},movementY:function(e){return"movementY"in e?e.movementY:pl}}),Kd=ue(La),Fw=ct({},La,{dataTransfer:0}),jw=ue(Fw),Bw=ct({},Or,{relatedTarget:0}),ml=ue(Bw),Vw=ct({},pn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ow=ue(Vw),zw=ct({},pn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Gw=ue(zw),Uw=ct({},pn,{data:0}),qd=ue(Uw),$w={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ww={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Hw[e])?!!t[e]:!1}function oc(){return Yw}var Xw=ct({},Or,{key:function(e){if(e.key){var t=$w[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=jo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ww[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oc,charCode:function(e){return e.type==="keypress"?jo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?jo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Kw=ue(Xw),qw=ct({},La,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qd=ue(qw),Qw=ct({},Or,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oc}),Zw=ue(Qw),Jw=ct({},pn,{propertyName:0,elapsedTime:0,pseudoElement:0}),t_=ue(Jw),e_=ct({},La,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),s_=ue(e_),i_=[9,13,27,32],ac=ls&&"CompositionEvent"in window,Yn=null;ls&&"documentMode"in document&&(Yn=document.documentMode);var n_=ls&&"TextEvent"in window&&!Yn,gg=ls&&(!ac||Yn&&8<Yn&&11>=Yn),Zd=" ",Jd=!1;function yg(e,t){switch(e){case"keyup":return i_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xg(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ai=!1;function r_(e,t){switch(e){case"compositionend":return xg(t);case"keypress":return t.which!==32?null:(Jd=!0,Zd);case"textInput":return e=t.data,e===Zd&&Jd?null:e;default:return null}}function o_(e,t){if(Ai)return e==="compositionend"||!ac&&yg(e,t)?(e=mg(),Fo=nc=Ss=null,Ai=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gg&&t.locale!=="ko"?null:t.data;default:return null}}var a_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!a_[e.type]:t==="textarea"}function vg(e,t,s,i){q0(i),t=ia(t,"onChange"),0<t.length&&(s=new rc("onChange","change",null,s,i),e.push({event:s,listeners:t}))}var Xn=null,pr=null;function l_(e){Eg(e,0)}function Fa(e){var t=Ni(e);if(U0(t))return e}function h_(e,t){if(e==="change")return t}var wg=!1;if(ls){var gl;if(ls){var yl="oninput"in document;if(!yl){var ef=document.createElement("div");ef.setAttribute("oninput","return;"),yl=typeof ef.oninput=="function"}gl=yl}else gl=!1;wg=gl&&(!document.documentMode||9<document.documentMode)}function sf(){Xn&&(Xn.detachEvent("onpropertychange",_g),pr=Xn=null)}function _g(e){if(e.propertyName==="value"&&Fa(pr)){var t=[];vg(t,pr,e,Ju(e)),tg(l_,t)}}function u_(e,t,s){e==="focusin"?(sf(),Xn=t,pr=s,Xn.attachEvent("onpropertychange",_g)):e==="focusout"&&sf()}function c_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fa(pr)}function d_(e,t){if(e==="click")return Fa(t)}function f_(e,t){if(e==="input"||e==="change")return Fa(t)}function p_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var De=typeof Object.is=="function"?Object.is:p_;function mr(e,t){if(De(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),i=Object.keys(t);if(s.length!==i.length)return!1;for(i=0;i<s.length;i++){var n=s[i];if(!gh.call(t,n)||!De(e[n],t[n]))return!1}return!0}function nf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rf(e,t){var s=nf(e);e=0;for(var i;s;){if(s.nodeType===3){if(i=e+s.textContent.length,e<=t&&i>=t)return{node:s,offset:t-e};e=i}t:{for(;s;){if(s.nextSibling){s=s.nextSibling;break t}s=s.parentNode}s=void 0}s=nf(s)}}function Sg(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Sg(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function bg(){for(var e=window,t=qo();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=qo(e.document)}return t}function lc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function m_(e){var t=bg(),s=e.focusedElem,i=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&Sg(s.ownerDocument.documentElement,s)){if(i!==null&&lc(s)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=s.textContent.length,r=Math.min(i.start,n);i=i.end===void 0?r:Math.min(i.end,n),!e.extend&&r>i&&(n=i,i=r,r=n),n=rf(s,r);var o=rf(s,i);n&&o&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),r>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var g_=ls&&"documentMode"in document&&11>=document.documentMode,Ei=null,Lh=null,Kn=null,Fh=!1;function of(e,t,s){var i=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Fh||Ei==null||Ei!==qo(i)||(i=Ei,"selectionStart"in i&&lc(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Kn&&mr(Kn,i)||(Kn=i,i=ia(Lh,"onSelect"),0<i.length&&(t=new rc("onSelect","select",null,t,s),e.push({event:t,listeners:i}),t.target=Ei)))}function no(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Ri={animationend:no("Animation","AnimationEnd"),animationiteration:no("Animation","AnimationIteration"),animationstart:no("Animation","AnimationStart"),transitionend:no("Transition","TransitionEnd")},xl={},Cg={};ls&&(Cg=document.createElement("div").style,"AnimationEvent"in window||(delete Ri.animationend.animation,delete Ri.animationiteration.animation,delete Ri.animationstart.animation),"TransitionEvent"in window||delete Ri.transitionend.transition);function ja(e){if(xl[e])return xl[e];if(!Ri[e])return e;var t=Ri[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Cg)return xl[e]=t[s];return e}var kg=ja("animationend"),Tg=ja("animationiteration"),Pg=ja("animationstart"),Mg=ja("transitionend"),Ag=new Map,af="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function js(e,t){Ag.set(e,t),yi(t,[e])}for(var vl=0;vl<af.length;vl++){var wl=af[vl],y_=wl.toLowerCase(),x_=wl[0].toUpperCase()+wl.slice(1);js(y_,"on"+x_)}js(kg,"onAnimationEnd");js(Tg,"onAnimationIteration");js(Pg,"onAnimationStart");js("dblclick","onDoubleClick");js("focusin","onFocus");js("focusout","onBlur");js(Mg,"onTransitionEnd");Zi("onMouseEnter",["mouseout","mouseover"]);Zi("onMouseLeave",["mouseout","mouseover"]);Zi("onPointerEnter",["pointerout","pointerover"]);Zi("onPointerLeave",["pointerout","pointerover"]);yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yi("onBeforeInput",["compositionend","keypress","textInput","paste"]);yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),v_=new Set("cancel close invalid load scroll toggle".split(" ").concat(jn));function lf(e,t,s){var i=e.type||"unknown-event";e.currentTarget=s,yw(i,t,void 0,e),e.currentTarget=null}function Eg(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var i=e[s],n=i.event;i=i.listeners;t:{var r=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,h=a.currentTarget;if(a=a.listener,l!==r&&n.isPropagationStopped())break t;lf(n,a,h),r=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,h=a.currentTarget,a=a.listener,l!==r&&n.isPropagationStopped())break t;lf(n,a,h),r=l}}}if(Zo)throw e=Rh,Zo=!1,Rh=null,e}function st(e,t){var s=t[zh];s===void 0&&(s=t[zh]=new Set);var i=e+"__bubble";s.has(i)||(Rg(t,e,2,!1),s.add(i))}function _l(e,t,s){var i=0;t&&(i|=4),Rg(s,e,i,t)}var ro="_reactListening"+Math.random().toString(36).slice(2);function gr(e){if(!e[ro]){e[ro]=!0,B0.forEach(function(s){s!=="selectionchange"&&(v_.has(s)||_l(s,!1,e),_l(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ro]||(t[ro]=!0,_l("selectionchange",!1,t))}}function Rg(e,t,s,i){switch(pg(t)){case 1:var n=Dw;break;case 4:n=Iw;break;default:n=ic}s=n.bind(null,t,s,e),n=void 0,!Eh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),i?n!==void 0?e.addEventListener(t,s,{capture:!0,passive:n}):e.addEventListener(t,s,!0):n!==void 0?e.addEventListener(t,s,{passive:n}):e.addEventListener(t,s,!1)}function Sl(e,t,s,i,n){var r=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===n||a.nodeType===8&&a.parentNode===n)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;o=o.return}for(;a!==null;){if(o=ii(a),o===null)return;if(l=o.tag,l===5||l===6){i=r=o;continue t}a=a.parentNode}}i=i.return}tg(function(){var h=r,u=Ju(s),c=[];t:{var d=Ag.get(e);if(d!==void 0){var f=rc,g=e;switch(e){case"keypress":if(jo(s)===0)break t;case"keydown":case"keyup":f=Kw;break;case"focusin":g="focus",f=ml;break;case"focusout":g="blur",f=ml;break;case"beforeblur":case"afterblur":f=ml;break;case"click":if(s.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Kd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=jw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Zw;break;case kg:case Tg:case Pg:f=Ow;break;case Mg:f=t_;break;case"scroll":f=Lw;break;case"wheel":f=s_;break;case"copy":case"cut":case"paste":f=Gw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Qd}var m=(t&4)!==0,x=!m&&e==="scroll",p=m?d!==null?d+"Capture":null:d;m=[];for(var y=h,v;y!==null;){v=y;var _=v.stateNode;if(v.tag===5&&_!==null&&(v=_,p!==null&&(_=ur(y,p),_!=null&&m.push(yr(y,_,v)))),x)break;y=y.return}0<m.length&&(d=new f(d,g,null,s,u),c.push({event:d,listeners:m}))}}if(!(t&7)){t:{if(d=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",d&&s!==Mh&&(g=s.relatedTarget||s.fromElement)&&(ii(g)||g[hs]))break t;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(g=s.relatedTarget||s.toElement,f=h,g=g?ii(g):null,g!==null&&(x=xi(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=h),f!==g)){if(m=Kd,_="onMouseLeave",p="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(m=Qd,_="onPointerLeave",p="onPointerEnter",y="pointer"),x=f==null?d:Ni(f),v=g==null?d:Ni(g),d=new m(_,y+"leave",f,s,u),d.target=x,d.relatedTarget=v,_=null,ii(u)===h&&(m=new m(p,y+"enter",g,s,u),m.target=v,m.relatedTarget=x,_=m),x=_,f&&g)e:{for(m=f,p=g,y=0,v=m;v;v=wi(v))y++;for(v=0,_=p;_;_=wi(_))v++;for(;0<y-v;)m=wi(m),y--;for(;0<v-y;)p=wi(p),v--;for(;y--;){if(m===p||p!==null&&m===p.alternate)break e;m=wi(m),p=wi(p)}m=null}else m=null;f!==null&&hf(c,d,f,m,!1),g!==null&&x!==null&&hf(c,x,g,m,!0)}}t:{if(d=h?Ni(h):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var S=h_;else if(tf(d))if(wg)S=f_;else{S=c_;var b=u_}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=d_);if(S&&(S=S(e,h))){vg(c,S,s,u);break t}b&&b(e,d,h),e==="focusout"&&(b=d._wrapperState)&&b.controlled&&d.type==="number"&&bh(d,"number",d.value)}switch(b=h?Ni(h):window,e){case"focusin":(tf(b)||b.contentEditable==="true")&&(Ei=b,Lh=h,Kn=null);break;case"focusout":Kn=Lh=Ei=null;break;case"mousedown":Fh=!0;break;case"contextmenu":case"mouseup":case"dragend":Fh=!1,of(c,s,u);break;case"selectionchange":if(g_)break;case"keydown":case"keyup":of(c,s,u)}var C;if(ac)t:{switch(e){case"compositionstart":var k="onCompositionStart";break t;case"compositionend":k="onCompositionEnd";break t;case"compositionupdate":k="onCompositionUpdate";break t}k=void 0}else Ai?yg(e,s)&&(k="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(k="onCompositionStart");k&&(gg&&s.locale!=="ko"&&(Ai||k!=="onCompositionStart"?k==="onCompositionEnd"&&Ai&&(C=mg()):(Ss=u,nc="value"in Ss?Ss.value:Ss.textContent,Ai=!0)),b=ia(h,k),0<b.length&&(k=new qd(k,e,null,s,u),c.push({event:k,listeners:b}),C?k.data=C:(C=xg(s),C!==null&&(k.data=C)))),(C=n_?r_(e,s):o_(e,s))&&(h=ia(h,"onBeforeInput"),0<h.length&&(u=new qd("onBeforeInput","beforeinput",null,s,u),c.push({event:u,listeners:h}),u.data=C))}Eg(c,t)})}function yr(e,t,s){return{instance:e,listener:t,currentTarget:s}}function ia(e,t){for(var s=t+"Capture",i=[];e!==null;){var n=e,r=n.stateNode;n.tag===5&&r!==null&&(n=r,r=ur(e,s),r!=null&&i.unshift(yr(e,r,n)),r=ur(e,t),r!=null&&i.push(yr(e,r,n))),e=e.return}return i}function wi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function hf(e,t,s,i,n){for(var r=t._reactName,o=[];s!==null&&s!==i;){var a=s,l=a.alternate,h=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&h!==null&&(a=h,n?(l=ur(s,r),l!=null&&o.unshift(yr(s,l,a))):n||(l=ur(s,r),l!=null&&o.push(yr(s,l,a)))),s=s.return}o.length!==0&&e.push({event:t,listeners:o})}var w_=/\r\n?/g,__=/\u0000|\uFFFD/g;function uf(e){return(typeof e=="string"?e:""+e).replace(w_,`
`).replace(__,"")}function oo(e,t,s){if(t=uf(t),uf(e)!==t&&s)throw Error(P(425))}function na(){}var jh=null,Bh=null;function Vh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Oh=typeof setTimeout=="function"?setTimeout:void 0,S_=typeof clearTimeout=="function"?clearTimeout:void 0,cf=typeof Promise=="function"?Promise:void 0,b_=typeof queueMicrotask=="function"?queueMicrotask:typeof cf<"u"?function(e){return cf.resolve(null).then(e).catch(C_)}:Oh;function C_(e){setTimeout(function(){throw e})}function bl(e,t){var s=t,i=0;do{var n=s.nextSibling;if(e.removeChild(s),n&&n.nodeType===8)if(s=n.data,s==="/$"){if(i===0){e.removeChild(n),fr(t);return}i--}else s!=="$"&&s!=="$?"&&s!=="$!"||i++;s=n}while(s);fr(t)}function Ms(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function df(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var mn=Math.random().toString(36).slice(2),We="__reactFiber$"+mn,xr="__reactProps$"+mn,hs="__reactContainer$"+mn,zh="__reactEvents$"+mn,k_="__reactListeners$"+mn,T_="__reactHandles$"+mn;function ii(e){var t=e[We];if(t)return t;for(var s=e.parentNode;s;){if(t=s[hs]||s[We]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=df(e);e!==null;){if(s=e[We])return s;e=df(e)}return t}e=s,s=e.parentNode}return null}function zr(e){return e=e[We]||e[hs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ni(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(P(33))}function Ba(e){return e[xr]||null}var Gh=[],Di=-1;function Bs(e){return{current:e}}function it(e){0>Di||(e.current=Gh[Di],Gh[Di]=null,Di--)}function et(e,t){Di++,Gh[Di]=e.current,e.current=t}var Is={},zt=Bs(Is),Qt=Bs(!1),ci=Is;function Ji(e,t){var s=e.type.contextTypes;if(!s)return Is;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n={},r;for(r in s)n[r]=t[r];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function Zt(e){return e=e.childContextTypes,e!=null}function ra(){it(Qt),it(zt)}function ff(e,t,s){if(zt.current!==Is)throw Error(P(168));et(zt,t),et(Qt,s)}function Ng(e,t,s){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return s;i=i.getChildContext();for(var n in i)if(!(n in t))throw Error(P(108,uw(e)||"Unknown",n));return ct({},s,i)}function oa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Is,ci=zt.current,et(zt,e),et(Qt,Qt.current),!0}function pf(e,t,s){var i=e.stateNode;if(!i)throw Error(P(169));s?(e=Ng(e,t,ci),i.__reactInternalMemoizedMergedChildContext=e,it(Qt),it(zt),et(zt,e)):it(Qt),et(Qt,s)}var Je=null,Va=!1,Cl=!1;function Dg(e){Je===null?Je=[e]:Je.push(e)}function P_(e){Va=!0,Dg(e)}function Vs(){if(!Cl&&Je!==null){Cl=!0;var e=0,t=K;try{var s=Je;for(K=1;e<s.length;e++){var i=s[e];do i=i(!0);while(i!==null)}Je=null,Va=!1}catch(n){throw Je!==null&&(Je=Je.slice(e+1)),ng(tc,Vs),n}finally{K=t,Cl=!1}}return null}var Ii=[],Li=0,aa=null,la=0,fe=[],pe=0,di=null,es=1,ss="";function Ks(e,t){Ii[Li++]=la,Ii[Li++]=aa,aa=e,la=t}function Ig(e,t,s){fe[pe++]=es,fe[pe++]=ss,fe[pe++]=di,di=e;var i=es;e=ss;var n=32-Re(i)-1;i&=~(1<<n),s+=1;var r=32-Re(t)+n;if(30<r){var o=n-n%5;r=(i&(1<<o)-1).toString(32),i>>=o,n-=o,es=1<<32-Re(t)+n|s<<n|i,ss=r+e}else es=1<<r|s<<n|i,ss=e}function hc(e){e.return!==null&&(Ks(e,1),Ig(e,1,0))}function uc(e){for(;e===aa;)aa=Ii[--Li],Ii[Li]=null,la=Ii[--Li],Ii[Li]=null;for(;e===di;)di=fe[--pe],fe[pe]=null,ss=fe[--pe],fe[pe]=null,es=fe[--pe],fe[pe]=null}var ne=null,ie=null,ot=!1,Me=null;function Lg(e,t){var s=me(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function mf(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ne=e,ie=Ms(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ne=e,ie=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=di!==null?{id:es,overflow:ss}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=me(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,ne=e,ie=null,!0):!1;default:return!1}}function Uh(e){return(e.mode&1)!==0&&(e.flags&128)===0}function $h(e){if(ot){var t=ie;if(t){var s=t;if(!mf(e,t)){if(Uh(e))throw Error(P(418));t=Ms(s.nextSibling);var i=ne;t&&mf(e,t)?Lg(i,s):(e.flags=e.flags&-4097|2,ot=!1,ne=e)}}else{if(Uh(e))throw Error(P(418));e.flags=e.flags&-4097|2,ot=!1,ne=e}}}function gf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ne=e}function ao(e){if(e!==ne)return!1;if(!ot)return gf(e),ot=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Vh(e.type,e.memoizedProps)),t&&(t=ie)){if(Uh(e))throw Fg(),Error(P(418));for(;t;)Lg(e,t),t=Ms(t.nextSibling)}if(gf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(P(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){ie=Ms(e.nextSibling);break t}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}ie=null}}else ie=ne?Ms(e.stateNode.nextSibling):null;return!0}function Fg(){for(var e=ie;e;)e=Ms(e.nextSibling)}function tn(){ie=ne=null,ot=!1}function cc(e){Me===null?Me=[e]:Me.push(e)}var M_=ps.ReactCurrentBatchConfig;function bn(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(P(309));var i=s.stateNode}if(!i)throw Error(P(147,e));var n=i,r=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(o){var a=n.refs;o===null?delete a[r]:a[r]=o},t._stringRef=r,t)}if(typeof e!="string")throw Error(P(284));if(!s._owner)throw Error(P(290,e))}return e}function lo(e,t){throw e=Object.prototype.toString.call(t),Error(P(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yf(e){var t=e._init;return t(e._payload)}function jg(e){function t(p,y){if(e){var v=p.deletions;v===null?(p.deletions=[y],p.flags|=16):v.push(y)}}function s(p,y){if(!e)return null;for(;y!==null;)t(p,y),y=y.sibling;return null}function i(p,y){for(p=new Map;y!==null;)y.key!==null?p.set(y.key,y):p.set(y.index,y),y=y.sibling;return p}function n(p,y){return p=Ns(p,y),p.index=0,p.sibling=null,p}function r(p,y,v){return p.index=v,e?(v=p.alternate,v!==null?(v=v.index,v<y?(p.flags|=2,y):v):(p.flags|=2,y)):(p.flags|=1048576,y)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,y,v,_){return y===null||y.tag!==6?(y=Rl(v,p.mode,_),y.return=p,y):(y=n(y,v),y.return=p,y)}function l(p,y,v,_){var S=v.type;return S===Mi?u(p,y,v.props.children,_,v.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===xs&&yf(S)===y.type)?(_=n(y,v.props),_.ref=bn(p,y,v),_.return=p,_):(_=$o(v.type,v.key,v.props,null,p.mode,_),_.ref=bn(p,y,v),_.return=p,_)}function h(p,y,v,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=Nl(v,p.mode,_),y.return=p,y):(y=n(y,v.children||[]),y.return=p,y)}function u(p,y,v,_,S){return y===null||y.tag!==7?(y=hi(v,p.mode,_,S),y.return=p,y):(y=n(y,v),y.return=p,y)}function c(p,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Rl(""+y,p.mode,v),y.return=p,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Qr:return v=$o(y.type,y.key,y.props,null,p.mode,v),v.ref=bn(p,null,y),v.return=p,v;case Pi:return y=Nl(y,p.mode,v),y.return=p,y;case xs:var _=y._init;return c(p,_(y._payload),v)}if(Ln(y)||xn(y))return y=hi(y,p.mode,v,null),y.return=p,y;lo(p,y)}return null}function d(p,y,v,_){var S=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:a(p,y,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Qr:return v.key===S?l(p,y,v,_):null;case Pi:return v.key===S?h(p,y,v,_):null;case xs:return S=v._init,d(p,y,S(v._payload),_)}if(Ln(v)||xn(v))return S!==null?null:u(p,y,v,_,null);lo(p,v)}return null}function f(p,y,v,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return p=p.get(v)||null,a(y,p,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Qr:return p=p.get(_.key===null?v:_.key)||null,l(y,p,_,S);case Pi:return p=p.get(_.key===null?v:_.key)||null,h(y,p,_,S);case xs:var b=_._init;return f(p,y,v,b(_._payload),S)}if(Ln(_)||xn(_))return p=p.get(v)||null,u(y,p,_,S,null);lo(y,_)}return null}function g(p,y,v,_){for(var S=null,b=null,C=y,k=y=0,A=null;C!==null&&k<v.length;k++){C.index>k?(A=C,C=null):A=C.sibling;var T=d(p,C,v[k],_);if(T===null){C===null&&(C=A);break}e&&C&&T.alternate===null&&t(p,C),y=r(T,y,k),b===null?S=T:b.sibling=T,b=T,C=A}if(k===v.length)return s(p,C),ot&&Ks(p,k),S;if(C===null){for(;k<v.length;k++)C=c(p,v[k],_),C!==null&&(y=r(C,y,k),b===null?S=C:b.sibling=C,b=C);return ot&&Ks(p,k),S}for(C=i(p,C);k<v.length;k++)A=f(C,p,k,v[k],_),A!==null&&(e&&A.alternate!==null&&C.delete(A.key===null?k:A.key),y=r(A,y,k),b===null?S=A:b.sibling=A,b=A);return e&&C.forEach(function(R){return t(p,R)}),ot&&Ks(p,k),S}function m(p,y,v,_){var S=xn(v);if(typeof S!="function")throw Error(P(150));if(v=S.call(v),v==null)throw Error(P(151));for(var b=S=null,C=y,k=y=0,A=null,T=v.next();C!==null&&!T.done;k++,T=v.next()){C.index>k?(A=C,C=null):A=C.sibling;var R=d(p,C,T.value,_);if(R===null){C===null&&(C=A);break}e&&C&&R.alternate===null&&t(p,C),y=r(R,y,k),b===null?S=R:b.sibling=R,b=R,C=A}if(T.done)return s(p,C),ot&&Ks(p,k),S;if(C===null){for(;!T.done;k++,T=v.next())T=c(p,T.value,_),T!==null&&(y=r(T,y,k),b===null?S=T:b.sibling=T,b=T);return ot&&Ks(p,k),S}for(C=i(p,C);!T.done;k++,T=v.next())T=f(C,p,k,T.value,_),T!==null&&(e&&T.alternate!==null&&C.delete(T.key===null?k:T.key),y=r(T,y,k),b===null?S=T:b.sibling=T,b=T);return e&&C.forEach(function($){return t(p,$)}),ot&&Ks(p,k),S}function x(p,y,v,_){if(typeof v=="object"&&v!==null&&v.type===Mi&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Qr:t:{for(var S=v.key,b=y;b!==null;){if(b.key===S){if(S=v.type,S===Mi){if(b.tag===7){s(p,b.sibling),y=n(b,v.props.children),y.return=p,p=y;break t}}else if(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===xs&&yf(S)===b.type){s(p,b.sibling),y=n(b,v.props),y.ref=bn(p,b,v),y.return=p,p=y;break t}s(p,b);break}else t(p,b);b=b.sibling}v.type===Mi?(y=hi(v.props.children,p.mode,_,v.key),y.return=p,p=y):(_=$o(v.type,v.key,v.props,null,p.mode,_),_.ref=bn(p,y,v),_.return=p,p=_)}return o(p);case Pi:t:{for(b=v.key;y!==null;){if(y.key===b)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){s(p,y.sibling),y=n(y,v.children||[]),y.return=p,p=y;break t}else{s(p,y);break}else t(p,y);y=y.sibling}y=Nl(v,p.mode,_),y.return=p,p=y}return o(p);case xs:return b=v._init,x(p,y,b(v._payload),_)}if(Ln(v))return g(p,y,v,_);if(xn(v))return m(p,y,v,_);lo(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(s(p,y.sibling),y=n(y,v),y.return=p,p=y):(s(p,y),y=Rl(v,p.mode,_),y.return=p,p=y),o(p)):s(p,y)}return x}var en=jg(!0),Bg=jg(!1),ha=Bs(null),ua=null,Fi=null,dc=null;function fc(){dc=Fi=ua=null}function pc(e){var t=ha.current;it(ha),e._currentValue=t}function Wh(e,t,s){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===s)break;e=e.return}}function Ki(e,t){ua=e,dc=Fi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(qt=!0),e.firstContext=null)}function ve(e){var t=e._currentValue;if(dc!==e)if(e={context:e,memoizedValue:t,next:null},Fi===null){if(ua===null)throw Error(P(308));Fi=e,ua.dependencies={lanes:0,firstContext:e}}else Fi=Fi.next=e;return t}var ni=null;function mc(e){ni===null?ni=[e]:ni.push(e)}function Vg(e,t,s,i){var n=t.interleaved;return n===null?(s.next=s,mc(t)):(s.next=n.next,n.next=s),t.interleaved=s,us(e,i)}function us(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var vs=!1;function gc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Og(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function is(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function As(e,t,s){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,H&2){var n=i.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),i.pending=t,us(e,s)}return n=i.interleaved,n===null?(t.next=t,mc(i)):(t.next=n.next,n.next=t),i.interleaved=t,us(e,s)}function Bo(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,s|=i,t.lanes=s,ec(e,s)}}function xf(e,t){var s=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,s===i)){var n=null,r=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};r===null?n=r=o:r=r.next=o,s=s.next}while(s!==null);r===null?n=r=t:r=r.next=t}else n=r=t;s={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:i.shared,effects:i.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function ca(e,t,s,i){var n=e.updateQueue;vs=!1;var r=n.firstBaseUpdate,o=n.lastBaseUpdate,a=n.shared.pending;if(a!==null){n.shared.pending=null;var l=a,h=l.next;l.next=null,o===null?r=h:o.next=h,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=h:a.next=h,u.lastBaseUpdate=l))}if(r!==null){var c=n.baseState;o=0,u=h=l=null,a=r;do{var d=a.lane,f=a.eventTime;if((i&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var g=e,m=a;switch(d=t,f=s,m.tag){case 1:if(g=m.payload,typeof g=="function"){c=g.call(f,c,d);break t}c=g;break t;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,d=typeof g=="function"?g.call(f,c,d):g,d==null)break t;c=ct({},c,d);break t;case 2:vs=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=n.effects,d===null?n.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(h=u=f,l=c):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=n.shared.pending,a===null)break;d=a,a=d.next,d.next=null,n.lastBaseUpdate=d,n.shared.pending=null}}while(!0);if(u===null&&(l=c),n.baseState=l,n.firstBaseUpdate=h,n.lastBaseUpdate=u,t=n.shared.interleaved,t!==null){n=t;do o|=n.lane,n=n.next;while(n!==t)}else r===null&&(n.shared.lanes=0);pi|=o,e.lanes=o,e.memoizedState=c}}function vf(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],n=i.callback;if(n!==null){if(i.callback=null,i=s,typeof n!="function")throw Error(P(191,n));n.call(i)}}}var Gr={},Ye=Bs(Gr),vr=Bs(Gr),wr=Bs(Gr);function ri(e){if(e===Gr)throw Error(P(174));return e}function yc(e,t){switch(et(wr,t),et(vr,e),et(Ye,Gr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:kh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=kh(t,e)}it(Ye),et(Ye,t)}function sn(){it(Ye),it(vr),it(wr)}function zg(e){ri(wr.current);var t=ri(Ye.current),s=kh(t,e.type);t!==s&&(et(vr,e),et(Ye,s))}function xc(e){vr.current===e&&(it(Ye),it(vr))}var at=Bs(0);function da(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var kl=[];function vc(){for(var e=0;e<kl.length;e++)kl[e]._workInProgressVersionPrimary=null;kl.length=0}var Vo=ps.ReactCurrentDispatcher,Tl=ps.ReactCurrentBatchConfig,fi=0,ut=null,bt=null,Tt=null,fa=!1,qn=!1,_r=0,A_=0;function Lt(){throw Error(P(321))}function wc(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!De(e[s],t[s]))return!1;return!0}function _c(e,t,s,i,n,r){if(fi=r,ut=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Vo.current=e===null||e.memoizedState===null?D_:I_,e=s(i,n),qn){r=0;do{if(qn=!1,_r=0,25<=r)throw Error(P(301));r+=1,Tt=bt=null,t.updateQueue=null,Vo.current=L_,e=s(i,n)}while(qn)}if(Vo.current=pa,t=bt!==null&&bt.next!==null,fi=0,Tt=bt=ut=null,fa=!1,t)throw Error(P(300));return e}function Sc(){var e=_r!==0;return _r=0,e}function Ue(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?ut.memoizedState=Tt=e:Tt=Tt.next=e,Tt}function we(){if(bt===null){var e=ut.alternate;e=e!==null?e.memoizedState:null}else e=bt.next;var t=Tt===null?ut.memoizedState:Tt.next;if(t!==null)Tt=t,bt=e;else{if(e===null)throw Error(P(310));bt=e,e={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},Tt===null?ut.memoizedState=Tt=e:Tt=Tt.next=e}return Tt}function Sr(e,t){return typeof t=="function"?t(e):t}function Pl(e){var t=we(),s=t.queue;if(s===null)throw Error(P(311));s.lastRenderedReducer=e;var i=bt,n=i.baseQueue,r=s.pending;if(r!==null){if(n!==null){var o=n.next;n.next=r.next,r.next=o}i.baseQueue=n=r,s.pending=null}if(n!==null){r=n.next,i=i.baseState;var a=o=null,l=null,h=r;do{var u=h.lane;if((fi&u)===u)l!==null&&(l=l.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:e(i,h.action);else{var c={lane:u,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};l===null?(a=l=c,o=i):l=l.next=c,ut.lanes|=u,pi|=u}h=h.next}while(h!==null&&h!==r);l===null?o=i:l.next=a,De(i,t.memoizedState)||(qt=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=l,s.lastRenderedState=i}if(e=s.interleaved,e!==null){n=e;do r=n.lane,ut.lanes|=r,pi|=r,n=n.next;while(n!==e)}else n===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Ml(e){var t=we(),s=t.queue;if(s===null)throw Error(P(311));s.lastRenderedReducer=e;var i=s.dispatch,n=s.pending,r=t.memoizedState;if(n!==null){s.pending=null;var o=n=n.next;do r=e(r,o.action),o=o.next;while(o!==n);De(r,t.memoizedState)||(qt=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),s.lastRenderedState=r}return[r,i]}function Gg(){}function Ug(e,t){var s=ut,i=we(),n=t(),r=!De(i.memoizedState,n);if(r&&(i.memoizedState=n,qt=!0),i=i.queue,bc(Hg.bind(null,s,i,e),[e]),i.getSnapshot!==t||r||Tt!==null&&Tt.memoizedState.tag&1){if(s.flags|=2048,br(9,Wg.bind(null,s,i,n,t),void 0,null),At===null)throw Error(P(349));fi&30||$g(s,t,n)}return n}function $g(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=ut.updateQueue,t===null?(t={lastEffect:null,stores:null},ut.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Wg(e,t,s,i){t.value=s,t.getSnapshot=i,Yg(t)&&Xg(e)}function Hg(e,t,s){return s(function(){Yg(t)&&Xg(e)})}function Yg(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!De(e,s)}catch{return!0}}function Xg(e){var t=us(e,1);t!==null&&Ne(t,e,1,-1)}function wf(e){var t=Ue();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sr,lastRenderedState:e},t.queue=e,e=e.dispatch=N_.bind(null,ut,e),[t.memoizedState,e]}function br(e,t,s,i){return e={tag:e,create:t,destroy:s,deps:i,next:null},t=ut.updateQueue,t===null?(t={lastEffect:null,stores:null},ut.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(i=s.next,s.next=e,e.next=i,t.lastEffect=e)),e}function Kg(){return we().memoizedState}function Oo(e,t,s,i){var n=Ue();ut.flags|=e,n.memoizedState=br(1|t,s,void 0,i===void 0?null:i)}function Oa(e,t,s,i){var n=we();i=i===void 0?null:i;var r=void 0;if(bt!==null){var o=bt.memoizedState;if(r=o.destroy,i!==null&&wc(i,o.deps)){n.memoizedState=br(t,s,r,i);return}}ut.flags|=e,n.memoizedState=br(1|t,s,r,i)}function _f(e,t){return Oo(8390656,8,e,t)}function bc(e,t){return Oa(2048,8,e,t)}function qg(e,t){return Oa(4,2,e,t)}function Qg(e,t){return Oa(4,4,e,t)}function Zg(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Jg(e,t,s){return s=s!=null?s.concat([e]):null,Oa(4,4,Zg.bind(null,t,e),s)}function Cc(){}function ty(e,t){var s=we();t=t===void 0?null:t;var i=s.memoizedState;return i!==null&&t!==null&&wc(t,i[1])?i[0]:(s.memoizedState=[e,t],e)}function ey(e,t){var s=we();t=t===void 0?null:t;var i=s.memoizedState;return i!==null&&t!==null&&wc(t,i[1])?i[0]:(e=e(),s.memoizedState=[e,t],e)}function sy(e,t,s){return fi&21?(De(s,t)||(s=ag(),ut.lanes|=s,pi|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,qt=!0),e.memoizedState=s)}function E_(e,t){var s=K;K=s!==0&&4>s?s:4,e(!0);var i=Tl.transition;Tl.transition={};try{e(!1),t()}finally{K=s,Tl.transition=i}}function iy(){return we().memoizedState}function R_(e,t,s){var i=Rs(e);if(s={lane:i,action:s,hasEagerState:!1,eagerState:null,next:null},ny(e))ry(t,s);else if(s=Vg(e,t,s,i),s!==null){var n=$t();Ne(s,e,i,n),oy(s,t,i)}}function N_(e,t,s){var i=Rs(e),n={lane:i,action:s,hasEagerState:!1,eagerState:null,next:null};if(ny(e))ry(t,n);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var o=t.lastRenderedState,a=r(o,s);if(n.hasEagerState=!0,n.eagerState=a,De(a,o)){var l=t.interleaved;l===null?(n.next=n,mc(t)):(n.next=l.next,l.next=n),t.interleaved=n;return}}catch{}finally{}s=Vg(e,t,n,i),s!==null&&(n=$t(),Ne(s,e,i,n),oy(s,t,i))}}function ny(e){var t=e.alternate;return e===ut||t!==null&&t===ut}function ry(e,t){qn=fa=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function oy(e,t,s){if(s&4194240){var i=t.lanes;i&=e.pendingLanes,s|=i,t.lanes=s,ec(e,s)}}var pa={readContext:ve,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},D_={readContext:ve,useCallback:function(e,t){return Ue().memoizedState=[e,t===void 0?null:t],e},useContext:ve,useEffect:_f,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,Oo(4194308,4,Zg.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Oo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oo(4,2,e,t)},useMemo:function(e,t){var s=Ue();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var i=Ue();return t=s!==void 0?s(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=R_.bind(null,ut,e),[i.memoizedState,e]},useRef:function(e){var t=Ue();return e={current:e},t.memoizedState=e},useState:wf,useDebugValue:Cc,useDeferredValue:function(e){return Ue().memoizedState=e},useTransition:function(){var e=wf(!1),t=e[0];return e=E_.bind(null,e[1]),Ue().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var i=ut,n=Ue();if(ot){if(s===void 0)throw Error(P(407));s=s()}else{if(s=t(),At===null)throw Error(P(349));fi&30||$g(i,t,s)}n.memoizedState=s;var r={value:s,getSnapshot:t};return n.queue=r,_f(Hg.bind(null,i,r,e),[e]),i.flags|=2048,br(9,Wg.bind(null,i,r,s,t),void 0,null),s},useId:function(){var e=Ue(),t=At.identifierPrefix;if(ot){var s=ss,i=es;s=(i&~(1<<32-Re(i)-1)).toString(32)+s,t=":"+t+"R"+s,s=_r++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=A_++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},I_={readContext:ve,useCallback:ty,useContext:ve,useEffect:bc,useImperativeHandle:Jg,useInsertionEffect:qg,useLayoutEffect:Qg,useMemo:ey,useReducer:Pl,useRef:Kg,useState:function(){return Pl(Sr)},useDebugValue:Cc,useDeferredValue:function(e){var t=we();return sy(t,bt.memoizedState,e)},useTransition:function(){var e=Pl(Sr)[0],t=we().memoizedState;return[e,t]},useMutableSource:Gg,useSyncExternalStore:Ug,useId:iy,unstable_isNewReconciler:!1},L_={readContext:ve,useCallback:ty,useContext:ve,useEffect:bc,useImperativeHandle:Jg,useInsertionEffect:qg,useLayoutEffect:Qg,useMemo:ey,useReducer:Ml,useRef:Kg,useState:function(){return Ml(Sr)},useDebugValue:Cc,useDeferredValue:function(e){var t=we();return bt===null?t.memoizedState=e:sy(t,bt.memoizedState,e)},useTransition:function(){var e=Ml(Sr)[0],t=we().memoizedState;return[e,t]},useMutableSource:Gg,useSyncExternalStore:Ug,useId:iy,unstable_isNewReconciler:!1};function Te(e,t){if(e&&e.defaultProps){t=ct({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Hh(e,t,s,i){t=e.memoizedState,s=s(i,t),s=s==null?t:ct({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var za={isMounted:function(e){return(e=e._reactInternals)?xi(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var i=$t(),n=Rs(e),r=is(i,n);r.payload=t,s!=null&&(r.callback=s),t=As(e,r,n),t!==null&&(Ne(t,e,n,i),Bo(t,e,n))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var i=$t(),n=Rs(e),r=is(i,n);r.tag=1,r.payload=t,s!=null&&(r.callback=s),t=As(e,r,n),t!==null&&(Ne(t,e,n,i),Bo(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=$t(),i=Rs(e),n=is(s,i);n.tag=2,t!=null&&(n.callback=t),t=As(e,n,i),t!==null&&(Ne(t,e,i,s),Bo(t,e,i))}};function Sf(e,t,s,i,n,r,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,r,o):t.prototype&&t.prototype.isPureReactComponent?!mr(s,i)||!mr(n,r):!0}function ay(e,t,s){var i=!1,n=Is,r=t.contextType;return typeof r=="object"&&r!==null?r=ve(r):(n=Zt(t)?ci:zt.current,i=t.contextTypes,r=(i=i!=null)?Ji(e,n):Is),t=new t(s,r),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=r),t}function bf(e,t,s,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,i),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Yh(e,t,s,i){var n=e.stateNode;n.props=s,n.state=e.memoizedState,n.refs={},gc(e);var r=t.contextType;typeof r=="object"&&r!==null?n.context=ve(r):(r=Zt(t)?ci:zt.current,n.context=Ji(e,r)),n.state=e.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(Hh(e,t,r,s),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&za.enqueueReplaceState(n,n.state,null),ca(e,s,n,i),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function nn(e,t){try{var s="",i=t;do s+=hw(i),i=i.return;while(i);var n=s}catch(r){n=`
Error generating stack: `+r.message+`
`+r.stack}return{value:e,source:t,stack:n,digest:null}}function Al(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Xh(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var F_=typeof WeakMap=="function"?WeakMap:Map;function ly(e,t,s){s=is(-1,s),s.tag=3,s.payload={element:null};var i=t.value;return s.callback=function(){ga||(ga=!0,nu=i),Xh(e,t)},s}function hy(e,t,s){s=is(-1,s),s.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var n=t.value;s.payload=function(){return i(n)},s.callback=function(){Xh(e,t)}}var r=e.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(s.callback=function(){Xh(e,t),typeof i!="function"&&(Es===null?Es=new Set([this]):Es.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),s}function Cf(e,t,s){var i=e.pingCache;if(i===null){i=e.pingCache=new F_;var n=new Set;i.set(t,n)}else n=i.get(t),n===void 0&&(n=new Set,i.set(t,n));n.has(s)||(n.add(s),e=q_.bind(null,e,t,s),t.then(e,e))}function kf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Tf(e,t,s,i,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=is(-1,1),t.tag=2,As(s,t,1))),s.lanes|=1),e)}var j_=ps.ReactCurrentOwner,qt=!1;function Gt(e,t,s,i){t.child=e===null?Bg(t,null,s,i):en(t,e.child,s,i)}function Pf(e,t,s,i,n){s=s.render;var r=t.ref;return Ki(t,n),i=_c(e,t,s,i,r,n),s=Sc(),e!==null&&!qt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,cs(e,t,n)):(ot&&s&&hc(t),t.flags|=1,Gt(e,t,i,n),t.child)}function Mf(e,t,s,i,n){if(e===null){var r=s.type;return typeof r=="function"&&!Nc(r)&&r.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=r,uy(e,t,r,i,n)):(e=$o(s.type,null,i,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!(e.lanes&n)){var o=r.memoizedProps;if(s=s.compare,s=s!==null?s:mr,s(o,i)&&e.ref===t.ref)return cs(e,t,n)}return t.flags|=1,e=Ns(r,i),e.ref=t.ref,e.return=t,t.child=e}function uy(e,t,s,i,n){if(e!==null){var r=e.memoizedProps;if(mr(r,i)&&e.ref===t.ref)if(qt=!1,t.pendingProps=i=r,(e.lanes&n)!==0)e.flags&131072&&(qt=!0);else return t.lanes=e.lanes,cs(e,t,n)}return Kh(e,t,s,i,n)}function cy(e,t,s){var i=t.pendingProps,n=i.children,r=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(Bi,se),se|=s;else{if(!(s&1073741824))return e=r!==null?r.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,et(Bi,se),se|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:s,et(Bi,se),se|=i}else r!==null?(i=r.baseLanes|s,t.memoizedState=null):i=s,et(Bi,se),se|=i;return Gt(e,t,n,s),t.child}function dy(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Kh(e,t,s,i,n){var r=Zt(s)?ci:zt.current;return r=Ji(t,r),Ki(t,n),s=_c(e,t,s,i,r,n),i=Sc(),e!==null&&!qt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,cs(e,t,n)):(ot&&i&&hc(t),t.flags|=1,Gt(e,t,s,n),t.child)}function Af(e,t,s,i,n){if(Zt(s)){var r=!0;oa(t)}else r=!1;if(Ki(t,n),t.stateNode===null)zo(e,t),ay(t,s,i),Yh(t,s,i,n),i=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,h=s.contextType;typeof h=="object"&&h!==null?h=ve(h):(h=Zt(s)?ci:zt.current,h=Ji(t,h));var u=s.getDerivedStateFromProps,c=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==h)&&bf(t,o,i,h),vs=!1;var d=t.memoizedState;o.state=d,ca(t,i,o,n),l=t.memoizedState,a!==i||d!==l||Qt.current||vs?(typeof u=="function"&&(Hh(t,s,u,i),l=t.memoizedState),(a=vs||Sf(t,s,a,i,d,l,h))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=h,i=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,Og(e,t),a=t.memoizedProps,h=t.type===t.elementType?a:Te(t.type,a),o.props=h,c=t.pendingProps,d=o.context,l=s.contextType,typeof l=="object"&&l!==null?l=ve(l):(l=Zt(s)?ci:zt.current,l=Ji(t,l));var f=s.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==c||d!==l)&&bf(t,o,i,l),vs=!1,d=t.memoizedState,o.state=d,ca(t,i,o,n);var g=t.memoizedState;a!==c||d!==g||Qt.current||vs?(typeof f=="function"&&(Hh(t,s,f,i),g=t.memoizedState),(h=vs||Sf(t,s,h,i,d,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=g),o.props=i,o.state=g,o.context=l,i=h):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return qh(e,t,s,i,r,n)}function qh(e,t,s,i,n,r){dy(e,t);var o=(t.flags&128)!==0;if(!i&&!o)return n&&pf(t,s,!1),cs(e,t,r);i=t.stateNode,j_.current=t;var a=o&&typeof s.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&o?(t.child=en(t,e.child,null,r),t.child=en(t,null,a,r)):Gt(e,t,a,r),t.memoizedState=i.state,n&&pf(t,s,!0),t.child}function fy(e){var t=e.stateNode;t.pendingContext?ff(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ff(e,t.context,!1),yc(e,t.containerInfo)}function Ef(e,t,s,i,n){return tn(),cc(n),t.flags|=256,Gt(e,t,s,i),t.child}var Qh={dehydrated:null,treeContext:null,retryLane:0};function Zh(e){return{baseLanes:e,cachePool:null,transitions:null}}function py(e,t,s){var i=t.pendingProps,n=at.current,r=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(n&2)!==0),a?(r=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),et(at,n&1),e===null)return $h(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,e=i.fallback,r?(i=t.mode,r=t.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=$a(o,i,0,null),e=hi(e,i,s,null),r.return=t,e.return=t,r.sibling=e,t.child=r,t.child.memoizedState=Zh(s),t.memoizedState=Qh,e):kc(t,o));if(n=e.memoizedState,n!==null&&(a=n.dehydrated,a!==null))return B_(e,t,o,i,a,n,s);if(r){r=i.fallback,o=t.mode,n=e.child,a=n.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&t.child!==n?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=Ns(n,l),i.subtreeFlags=n.subtreeFlags&14680064),a!==null?r=Ns(a,r):(r=hi(r,o,s,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,o=e.child.memoizedState,o=o===null?Zh(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=e.childLanes&~s,t.memoizedState=Qh,i}return r=e.child,e=r.sibling,i=Ns(r,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=s),i.return=t,i.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=i,t.memoizedState=null,i}function kc(e,t){return t=$a({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ho(e,t,s,i){return i!==null&&cc(i),en(t,e.child,null,s),e=kc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function B_(e,t,s,i,n,r,o){if(s)return t.flags&256?(t.flags&=-257,i=Al(Error(P(422))),ho(e,t,o,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(r=i.fallback,n=t.mode,i=$a({mode:"visible",children:i.children},n,0,null),r=hi(r,n,o,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,t.mode&1&&en(t,e.child,null,o),t.child.memoizedState=Zh(o),t.memoizedState=Qh,r);if(!(t.mode&1))return ho(e,t,o,null);if(n.data==="$!"){if(i=n.nextSibling&&n.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(P(419)),i=Al(r,i,void 0),ho(e,t,o,i)}if(a=(o&e.childLanes)!==0,qt||a){if(i=At,i!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(i.suspendedLanes|o)?0:n,n!==0&&n!==r.retryLane&&(r.retryLane=n,us(e,n),Ne(i,e,n,-1))}return Rc(),i=Al(Error(P(421))),ho(e,t,o,i)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=Q_.bind(null,e),n._reactRetry=t,null):(e=r.treeContext,ie=Ms(n.nextSibling),ne=t,ot=!0,Me=null,e!==null&&(fe[pe++]=es,fe[pe++]=ss,fe[pe++]=di,es=e.id,ss=e.overflow,di=t),t=kc(t,i.children),t.flags|=4096,t)}function Rf(e,t,s){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Wh(e.return,t,s)}function El(e,t,s,i,n){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:s,tailMode:n}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=s,r.tailMode=n)}function my(e,t,s){var i=t.pendingProps,n=i.revealOrder,r=i.tail;if(Gt(e,t,i.children,s),i=at.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rf(e,s,t);else if(e.tag===19)Rf(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(et(at,i),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(s=t.child,n=null;s!==null;)e=s.alternate,e!==null&&da(e)===null&&(n=s),s=s.sibling;s=n,s===null?(n=t.child,t.child=null):(n=s.sibling,s.sibling=null),El(t,!1,n,s,r);break;case"backwards":for(s=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&da(e)===null){t.child=n;break}e=n.sibling,n.sibling=s,s=n,n=e}El(t,!0,s,null,r);break;case"together":El(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function cs(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),pi|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(P(153));if(t.child!==null){for(e=t.child,s=Ns(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Ns(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function V_(e,t,s){switch(t.tag){case 3:fy(t),tn();break;case 5:zg(t);break;case 1:Zt(t.type)&&oa(t);break;case 4:yc(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,n=t.memoizedProps.value;et(ha,i._currentValue),i._currentValue=n;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(et(at,at.current&1),t.flags|=128,null):s&t.child.childLanes?py(e,t,s):(et(at,at.current&1),e=cs(e,t,s),e!==null?e.sibling:null);et(at,at.current&1);break;case 19:if(i=(s&t.childLanes)!==0,e.flags&128){if(i)return my(e,t,s);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),et(at,at.current),i)break;return null;case 22:case 23:return t.lanes=0,cy(e,t,s)}return cs(e,t,s)}var gy,Jh,yy,xy;gy=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Jh=function(){};yy=function(e,t,s,i){var n=e.memoizedProps;if(n!==i){e=t.stateNode,ri(Ye.current);var r=null;switch(s){case"input":n=_h(e,n),i=_h(e,i),r=[];break;case"select":n=ct({},n,{value:void 0}),i=ct({},i,{value:void 0}),r=[];break;case"textarea":n=Ch(e,n),i=Ch(e,i),r=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=na)}Th(s,i);var o;s=null;for(h in n)if(!i.hasOwnProperty(h)&&n.hasOwnProperty(h)&&n[h]!=null)if(h==="style"){var a=n[h];for(o in a)a.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(lr.hasOwnProperty(h)?r||(r=[]):(r=r||[]).push(h,null));for(h in i){var l=i[h];if(a=n!=null?n[h]:void 0,i.hasOwnProperty(h)&&l!==a&&(l!=null||a!=null))if(h==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(s||(s={}),s[o]=l[o])}else s||(r||(r=[]),r.push(h,s)),s=l;else h==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(h,l)):h==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(h,""+l):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(lr.hasOwnProperty(h)?(l!=null&&h==="onScroll"&&st("scroll",e),r||a===l||(r=[])):(r=r||[]).push(h,l))}s&&(r=r||[]).push("style",s);var h=r;(t.updateQueue=h)&&(t.flags|=4)}};xy=function(e,t,s,i){s!==i&&(t.flags|=4)};function Cn(e,t){if(!ot)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ft(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,i=0;if(t)for(var n=e.child;n!==null;)s|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)s|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=i,e.childLanes=s,t}function O_(e,t,s){var i=t.pendingProps;switch(uc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(t),null;case 1:return Zt(t.type)&&ra(),Ft(t),null;case 3:return i=t.stateNode,sn(),it(Qt),it(zt),vc(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(ao(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Me!==null&&(au(Me),Me=null))),Jh(e,t),Ft(t),null;case 5:xc(t);var n=ri(wr.current);if(s=t.type,e!==null&&t.stateNode!=null)yy(e,t,s,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(P(166));return Ft(t),null}if(e=ri(Ye.current),ao(t)){i=t.stateNode,s=t.type;var r=t.memoizedProps;switch(i[We]=t,i[xr]=r,e=(t.mode&1)!==0,s){case"dialog":st("cancel",i),st("close",i);break;case"iframe":case"object":case"embed":st("load",i);break;case"video":case"audio":for(n=0;n<jn.length;n++)st(jn[n],i);break;case"source":st("error",i);break;case"img":case"image":case"link":st("error",i),st("load",i);break;case"details":st("toggle",i);break;case"input":Vd(i,r),st("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},st("invalid",i);break;case"textarea":zd(i,r),st("invalid",i)}Th(s,r),n=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&oo(i.textContent,a,e),n=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&oo(i.textContent,a,e),n=["children",""+a]):lr.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&st("scroll",i)}switch(s){case"input":Zr(i),Od(i,r,!0);break;case"textarea":Zr(i),Gd(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=na)}i=n,t.updateQueue=i,i!==null&&(t.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=H0(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=o.createElement(s,{is:i.is}):(e=o.createElement(s),s==="select"&&(o=e,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):e=o.createElementNS(e,s),e[We]=t,e[xr]=i,gy(e,t,!1,!1),t.stateNode=e;t:{switch(o=Ph(s,i),s){case"dialog":st("cancel",e),st("close",e),n=i;break;case"iframe":case"object":case"embed":st("load",e),n=i;break;case"video":case"audio":for(n=0;n<jn.length;n++)st(jn[n],e);n=i;break;case"source":st("error",e),n=i;break;case"img":case"image":case"link":st("error",e),st("load",e),n=i;break;case"details":st("toggle",e),n=i;break;case"input":Vd(e,i),n=_h(e,i),st("invalid",e);break;case"option":n=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},n=ct({},i,{value:void 0}),st("invalid",e);break;case"textarea":zd(e,i),n=Ch(e,i),st("invalid",e);break;default:n=i}Th(s,n),a=n;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?K0(e,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Y0(e,l)):r==="children"?typeof l=="string"?(s!=="textarea"||l!=="")&&hr(e,l):typeof l=="number"&&hr(e,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(lr.hasOwnProperty(r)?l!=null&&r==="onScroll"&&st("scroll",e):l!=null&&Ku(e,r,l,o))}switch(s){case"input":Zr(e),Od(e,i,!1);break;case"textarea":Zr(e),Gd(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Ds(i.value));break;case"select":e.multiple=!!i.multiple,r=i.value,r!=null?Wi(e,!!i.multiple,r,!1):i.defaultValue!=null&&Wi(e,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=na)}switch(s){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ft(t),null;case 6:if(e&&t.stateNode!=null)xy(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(P(166));if(s=ri(wr.current),ri(Ye.current),ao(t)){if(i=t.stateNode,s=t.memoizedProps,i[We]=t,(r=i.nodeValue!==s)&&(e=ne,e!==null))switch(e.tag){case 3:oo(i.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&oo(i.nodeValue,s,(e.mode&1)!==0)}r&&(t.flags|=4)}else i=(s.nodeType===9?s:s.ownerDocument).createTextNode(i),i[We]=t,t.stateNode=i}return Ft(t),null;case 13:if(it(at),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ot&&ie!==null&&t.mode&1&&!(t.flags&128))Fg(),tn(),t.flags|=98560,r=!1;else if(r=ao(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(P(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(P(317));r[We]=t}else tn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ft(t),r=!1}else Me!==null&&(au(Me),Me=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||at.current&1?Ct===0&&(Ct=3):Rc())),t.updateQueue!==null&&(t.flags|=4),Ft(t),null);case 4:return sn(),Jh(e,t),e===null&&gr(t.stateNode.containerInfo),Ft(t),null;case 10:return pc(t.type._context),Ft(t),null;case 17:return Zt(t.type)&&ra(),Ft(t),null;case 19:if(it(at),r=t.memoizedState,r===null)return Ft(t),null;if(i=(t.flags&128)!==0,o=r.rendering,o===null)if(i)Cn(r,!1);else{if(Ct!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=da(e),o!==null){for(t.flags|=128,Cn(r,!1),i=o.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=s,s=t.child;s!==null;)r=s,e=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=e,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,e=o.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return et(at,at.current&1|2),t.child}e=e.sibling}r.tail!==null&&xt()>rn&&(t.flags|=128,i=!0,Cn(r,!1),t.lanes=4194304)}else{if(!i)if(e=da(o),e!==null){if(t.flags|=128,i=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Cn(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!ot)return Ft(t),null}else 2*xt()-r.renderingStartTime>rn&&s!==1073741824&&(t.flags|=128,i=!0,Cn(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(s=r.last,s!==null?s.sibling=o:t.child=o,r.last=o)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=xt(),t.sibling=null,s=at.current,et(at,i?s&1|2:s&1),t):(Ft(t),null);case 22:case 23:return Ec(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?se&1073741824&&(Ft(t),t.subtreeFlags&6&&(t.flags|=8192)):Ft(t),null;case 24:return null;case 25:return null}throw Error(P(156,t.tag))}function z_(e,t){switch(uc(t),t.tag){case 1:return Zt(t.type)&&ra(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return sn(),it(Qt),it(zt),vc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return xc(t),null;case 13:if(it(at),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(P(340));tn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return it(at),null;case 4:return sn(),null;case 10:return pc(t.type._context),null;case 22:case 23:return Ec(),null;case 24:return null;default:return null}}var uo=!1,Bt=!1,G_=typeof WeakSet=="function"?WeakSet:Set,L=null;function ji(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(i){pt(e,t,i)}else s.current=null}function tu(e,t,s){try{s()}catch(i){pt(e,t,i)}}var Nf=!1;function U_(e,t){if(jh=ea,e=bg(),lc(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else t:{s=(s=e.ownerDocument)&&s.defaultView||window;var i=s.getSelection&&s.getSelection();if(i&&i.rangeCount!==0){s=i.anchorNode;var n=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{s.nodeType,r.nodeType}catch{s=null;break t}var o=0,a=-1,l=-1,h=0,u=0,c=e,d=null;e:for(;;){for(var f;c!==s||n!==0&&c.nodeType!==3||(a=o+n),c!==r||i!==0&&c.nodeType!==3||(l=o+i),c.nodeType===3&&(o+=c.nodeValue.length),(f=c.firstChild)!==null;)d=c,c=f;for(;;){if(c===e)break e;if(d===s&&++h===n&&(a=o),d===r&&++u===i&&(l=o),(f=c.nextSibling)!==null)break;c=d,d=c.parentNode}c=f}s=a===-1||l===-1?null:{start:a,end:l}}else s=null}s=s||{start:0,end:0}}else s=null;for(Bh={focusedElem:e,selectionRange:s},ea=!1,L=t;L!==null;)if(t=L,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,L=e;else for(;L!==null;){t=L;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,x=g.memoizedState,p=t.stateNode,y=p.getSnapshotBeforeUpdate(t.elementType===t.type?m:Te(t.type,m),x);p.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(_){pt(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,L=e;break}L=t.return}return g=Nf,Nf=!1,g}function Qn(e,t,s){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,r!==void 0&&tu(t,s,r)}n=n.next}while(n!==i)}}function Ga(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var i=s.create;s.destroy=i()}s=s.next}while(s!==t)}}function eu(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function vy(e){var t=e.alternate;t!==null&&(e.alternate=null,vy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[We],delete t[xr],delete t[zh],delete t[k_],delete t[T_])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function wy(e){return e.tag===5||e.tag===3||e.tag===4}function Df(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||wy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function su(e,t,s){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=na));else if(i!==4&&(e=e.child,e!==null))for(su(e,t,s),e=e.sibling;e!==null;)su(e,t,s),e=e.sibling}function iu(e,t,s){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(iu(e,t,s),e=e.sibling;e!==null;)iu(e,t,s),e=e.sibling}var Et=null,Pe=!1;function gs(e,t,s){for(s=s.child;s!==null;)_y(e,t,s),s=s.sibling}function _y(e,t,s){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(Ia,s)}catch{}switch(s.tag){case 5:Bt||ji(s,t);case 6:var i=Et,n=Pe;Et=null,gs(e,t,s),Et=i,Pe=n,Et!==null&&(Pe?(e=Et,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Et.removeChild(s.stateNode));break;case 18:Et!==null&&(Pe?(e=Et,s=s.stateNode,e.nodeType===8?bl(e.parentNode,s):e.nodeType===1&&bl(e,s),fr(e)):bl(Et,s.stateNode));break;case 4:i=Et,n=Pe,Et=s.stateNode.containerInfo,Pe=!0,gs(e,t,s),Et=i,Pe=n;break;case 0:case 11:case 14:case 15:if(!Bt&&(i=s.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){n=i=i.next;do{var r=n,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&tu(s,t,o),n=n.next}while(n!==i)}gs(e,t,s);break;case 1:if(!Bt&&(ji(s,t),i=s.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=s.memoizedProps,i.state=s.memoizedState,i.componentWillUnmount()}catch(a){pt(s,t,a)}gs(e,t,s);break;case 21:gs(e,t,s);break;case 22:s.mode&1?(Bt=(i=Bt)||s.memoizedState!==null,gs(e,t,s),Bt=i):gs(e,t,s);break;default:gs(e,t,s)}}function If(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new G_),t.forEach(function(i){var n=Z_.bind(null,e,i);s.has(i)||(s.add(i),i.then(n,n))})}}function be(e,t){var s=t.deletions;if(s!==null)for(var i=0;i<s.length;i++){var n=s[i];try{var r=e,o=t,a=o;t:for(;a!==null;){switch(a.tag){case 5:Et=a.stateNode,Pe=!1;break t;case 3:Et=a.stateNode.containerInfo,Pe=!0;break t;case 4:Et=a.stateNode.containerInfo,Pe=!0;break t}a=a.return}if(Et===null)throw Error(P(160));_y(r,o,n),Et=null,Pe=!1;var l=n.alternate;l!==null&&(l.return=null),n.return=null}catch(h){pt(n,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Sy(t,e),t=t.sibling}function Sy(e,t){var s=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(be(t,e),Oe(e),i&4){try{Qn(3,e,e.return),Ga(3,e)}catch(m){pt(e,e.return,m)}try{Qn(5,e,e.return)}catch(m){pt(e,e.return,m)}}break;case 1:be(t,e),Oe(e),i&512&&s!==null&&ji(s,s.return);break;case 5:if(be(t,e),Oe(e),i&512&&s!==null&&ji(s,s.return),e.flags&32){var n=e.stateNode;try{hr(n,"")}catch(m){pt(e,e.return,m)}}if(i&4&&(n=e.stateNode,n!=null)){var r=e.memoizedProps,o=s!==null?s.memoizedProps:r,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&$0(n,r),Ph(a,o);var h=Ph(a,r);for(o=0;o<l.length;o+=2){var u=l[o],c=l[o+1];u==="style"?K0(n,c):u==="dangerouslySetInnerHTML"?Y0(n,c):u==="children"?hr(n,c):Ku(n,u,c,h)}switch(a){case"input":Sh(n,r);break;case"textarea":W0(n,r);break;case"select":var d=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!r.multiple;var f=r.value;f!=null?Wi(n,!!r.multiple,f,!1):d!==!!r.multiple&&(r.defaultValue!=null?Wi(n,!!r.multiple,r.defaultValue,!0):Wi(n,!!r.multiple,r.multiple?[]:"",!1))}n[xr]=r}catch(m){pt(e,e.return,m)}}break;case 6:if(be(t,e),Oe(e),i&4){if(e.stateNode===null)throw Error(P(162));n=e.stateNode,r=e.memoizedProps;try{n.nodeValue=r}catch(m){pt(e,e.return,m)}}break;case 3:if(be(t,e),Oe(e),i&4&&s!==null&&s.memoizedState.isDehydrated)try{fr(t.containerInfo)}catch(m){pt(e,e.return,m)}break;case 4:be(t,e),Oe(e);break;case 13:be(t,e),Oe(e),n=e.child,n.flags&8192&&(r=n.memoizedState!==null,n.stateNode.isHidden=r,!r||n.alternate!==null&&n.alternate.memoizedState!==null||(Mc=xt())),i&4&&If(e);break;case 22:if(u=s!==null&&s.memoizedState!==null,e.mode&1?(Bt=(h=Bt)||u,be(t,e),Bt=h):be(t,e),Oe(e),i&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!u&&e.mode&1)for(L=e,u=e.child;u!==null;){for(c=L=u;L!==null;){switch(d=L,f=d.child,d.tag){case 0:case 11:case 14:case 15:Qn(4,d,d.return);break;case 1:ji(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){i=d,s=d.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){pt(i,s,m)}}break;case 5:ji(d,d.return);break;case 22:if(d.memoizedState!==null){Ff(c);continue}}f!==null?(f.return=d,L=f):Ff(c)}u=u.sibling}t:for(u=null,c=e;;){if(c.tag===5){if(u===null){u=c;try{n=c.stateNode,h?(r=n.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=c.stateNode,l=c.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=X0("display",o))}catch(m){pt(e,e.return,m)}}}else if(c.tag===6){if(u===null)try{c.stateNode.nodeValue=h?"":c.memoizedProps}catch(m){pt(e,e.return,m)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===e)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break t;for(;c.sibling===null;){if(c.return===null||c.return===e)break t;u===c&&(u=null),c=c.return}u===c&&(u=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:be(t,e),Oe(e),i&4&&If(e);break;case 21:break;default:be(t,e),Oe(e)}}function Oe(e){var t=e.flags;if(t&2){try{t:{for(var s=e.return;s!==null;){if(wy(s)){var i=s;break t}s=s.return}throw Error(P(160))}switch(i.tag){case 5:var n=i.stateNode;i.flags&32&&(hr(n,""),i.flags&=-33);var r=Df(e);iu(e,r,n);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Df(e);su(e,a,o);break;default:throw Error(P(161))}}catch(l){pt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $_(e,t,s){L=e,by(e)}function by(e,t,s){for(var i=(e.mode&1)!==0;L!==null;){var n=L,r=n.child;if(n.tag===22&&i){var o=n.memoizedState!==null||uo;if(!o){var a=n.alternate,l=a!==null&&a.memoizedState!==null||Bt;a=uo;var h=Bt;if(uo=o,(Bt=l)&&!h)for(L=n;L!==null;)o=L,l=o.child,o.tag===22&&o.memoizedState!==null?jf(n):l!==null?(l.return=o,L=l):jf(n);for(;r!==null;)L=r,by(r),r=r.sibling;L=n,uo=a,Bt=h}Lf(e)}else n.subtreeFlags&8772&&r!==null?(r.return=n,L=r):Lf(e)}}function Lf(e){for(;L!==null;){var t=L;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Bt||Ga(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Bt)if(s===null)i.componentDidMount();else{var n=t.elementType===t.type?s.memoizedProps:Te(t.type,s.memoizedProps);i.componentDidUpdate(n,s.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&vf(t,r,i);break;case 3:var o=t.updateQueue;if(o!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}vf(t,o,s)}break;case 5:var a=t.stateNode;if(s===null&&t.flags&4){s=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&s.focus();break;case"img":l.src&&(s.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var u=h.memoizedState;if(u!==null){var c=u.dehydrated;c!==null&&fr(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}Bt||t.flags&512&&eu(t)}catch(d){pt(t,t.return,d)}}if(t===e){L=null;break}if(s=t.sibling,s!==null){s.return=t.return,L=s;break}L=t.return}}function Ff(e){for(;L!==null;){var t=L;if(t===e){L=null;break}var s=t.sibling;if(s!==null){s.return=t.return,L=s;break}L=t.return}}function jf(e){for(;L!==null;){var t=L;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Ga(4,t)}catch(l){pt(t,s,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var n=t.return;try{i.componentDidMount()}catch(l){pt(t,n,l)}}var r=t.return;try{eu(t)}catch(l){pt(t,r,l)}break;case 5:var o=t.return;try{eu(t)}catch(l){pt(t,o,l)}}}catch(l){pt(t,t.return,l)}if(t===e){L=null;break}var a=t.sibling;if(a!==null){a.return=t.return,L=a;break}L=t.return}}var W_=Math.ceil,ma=ps.ReactCurrentDispatcher,Tc=ps.ReactCurrentOwner,ye=ps.ReactCurrentBatchConfig,H=0,At=null,wt=null,Dt=0,se=0,Bi=Bs(0),Ct=0,Cr=null,pi=0,Ua=0,Pc=0,Zn=null,Xt=null,Mc=0,rn=1/0,Ze=null,ga=!1,nu=null,Es=null,co=!1,bs=null,ya=0,Jn=0,ru=null,Go=-1,Uo=0;function $t(){return H&6?xt():Go!==-1?Go:Go=xt()}function Rs(e){return e.mode&1?H&2&&Dt!==0?Dt&-Dt:M_.transition!==null?(Uo===0&&(Uo=ag()),Uo):(e=K,e!==0||(e=window.event,e=e===void 0?16:pg(e.type)),e):1}function Ne(e,t,s,i){if(50<Jn)throw Jn=0,ru=null,Error(P(185));Vr(e,s,i),(!(H&2)||e!==At)&&(e===At&&(!(H&2)&&(Ua|=s),Ct===4&&_s(e,Dt)),Jt(e,i),s===1&&H===0&&!(t.mode&1)&&(rn=xt()+500,Va&&Vs()))}function Jt(e,t){var s=e.callbackNode;Mw(e,t);var i=ta(e,e===At?Dt:0);if(i===0)s!==null&&Wd(s),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(s!=null&&Wd(s),t===1)e.tag===0?P_(Bf.bind(null,e)):Dg(Bf.bind(null,e)),b_(function(){!(H&6)&&Vs()}),s=null;else{switch(lg(i)){case 1:s=tc;break;case 4:s=rg;break;case 16:s=Jo;break;case 536870912:s=og;break;default:s=Jo}s=Ry(s,Cy.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Cy(e,t){if(Go=-1,Uo=0,H&6)throw Error(P(327));var s=e.callbackNode;if(qi()&&e.callbackNode!==s)return null;var i=ta(e,e===At?Dt:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=xa(e,i);else{t=i;var n=H;H|=2;var r=Ty();(At!==e||Dt!==t)&&(Ze=null,rn=xt()+500,li(e,t));do try{X_();break}catch(a){ky(e,a)}while(!0);fc(),ma.current=r,H=n,wt!==null?t=0:(At=null,Dt=0,t=Ct)}if(t!==0){if(t===2&&(n=Nh(e),n!==0&&(i=n,t=ou(e,n))),t===1)throw s=Cr,li(e,0),_s(e,i),Jt(e,xt()),s;if(t===6)_s(e,i);else{if(n=e.current.alternate,!(i&30)&&!H_(n)&&(t=xa(e,i),t===2&&(r=Nh(e),r!==0&&(i=r,t=ou(e,r))),t===1))throw s=Cr,li(e,0),_s(e,i),Jt(e,xt()),s;switch(e.finishedWork=n,e.finishedLanes=i,t){case 0:case 1:throw Error(P(345));case 2:qs(e,Xt,Ze);break;case 3:if(_s(e,i),(i&130023424)===i&&(t=Mc+500-xt(),10<t)){if(ta(e,0)!==0)break;if(n=e.suspendedLanes,(n&i)!==i){$t(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=Oh(qs.bind(null,e,Xt,Ze),t);break}qs(e,Xt,Ze);break;case 4:if(_s(e,i),(i&4194240)===i)break;for(t=e.eventTimes,n=-1;0<i;){var o=31-Re(i);r=1<<o,o=t[o],o>n&&(n=o),i&=~r}if(i=n,i=xt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*W_(i/1960))-i,10<i){e.timeoutHandle=Oh(qs.bind(null,e,Xt,Ze),i);break}qs(e,Xt,Ze);break;case 5:qs(e,Xt,Ze);break;default:throw Error(P(329))}}}return Jt(e,xt()),e.callbackNode===s?Cy.bind(null,e):null}function ou(e,t){var s=Zn;return e.current.memoizedState.isDehydrated&&(li(e,t).flags|=256),e=xa(e,t),e!==2&&(t=Xt,Xt=s,t!==null&&au(t)),e}function au(e){Xt===null?Xt=e:Xt.push.apply(Xt,e)}function H_(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var i=0;i<s.length;i++){var n=s[i],r=n.getSnapshot;n=n.value;try{if(!De(r(),n))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _s(e,t){for(t&=~Pc,t&=~Ua,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Re(t),i=1<<s;e[s]=-1,t&=~i}}function Bf(e){if(H&6)throw Error(P(327));qi();var t=ta(e,0);if(!(t&1))return Jt(e,xt()),null;var s=xa(e,t);if(e.tag!==0&&s===2){var i=Nh(e);i!==0&&(t=i,s=ou(e,i))}if(s===1)throw s=Cr,li(e,0),_s(e,t),Jt(e,xt()),s;if(s===6)throw Error(P(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,qs(e,Xt,Ze),Jt(e,xt()),null}function Ac(e,t){var s=H;H|=1;try{return e(t)}finally{H=s,H===0&&(rn=xt()+500,Va&&Vs())}}function mi(e){bs!==null&&bs.tag===0&&!(H&6)&&qi();var t=H;H|=1;var s=ye.transition,i=K;try{if(ye.transition=null,K=1,e)return e()}finally{K=i,ye.transition=s,H=t,!(H&6)&&Vs()}}function Ec(){se=Bi.current,it(Bi)}function li(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,S_(s)),wt!==null)for(s=wt.return;s!==null;){var i=s;switch(uc(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ra();break;case 3:sn(),it(Qt),it(zt),vc();break;case 5:xc(i);break;case 4:sn();break;case 13:it(at);break;case 19:it(at);break;case 10:pc(i.type._context);break;case 22:case 23:Ec()}s=s.return}if(At=e,wt=e=Ns(e.current,null),Dt=se=t,Ct=0,Cr=null,Pc=Ua=pi=0,Xt=Zn=null,ni!==null){for(t=0;t<ni.length;t++)if(s=ni[t],i=s.interleaved,i!==null){s.interleaved=null;var n=i.next,r=s.pending;if(r!==null){var o=r.next;r.next=n,i.next=o}s.pending=i}ni=null}return e}function ky(e,t){do{var s=wt;try{if(fc(),Vo.current=pa,fa){for(var i=ut.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}fa=!1}if(fi=0,Tt=bt=ut=null,qn=!1,_r=0,Tc.current=null,s===null||s.return===null){Ct=1,Cr=t,wt=null;break}t:{var r=e,o=s.return,a=s,l=t;if(t=Dt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=l,u=a,c=u.tag;if(!(u.mode&1)&&(c===0||c===11||c===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=kf(o);if(f!==null){f.flags&=-257,Tf(f,o,a,r,t),f.mode&1&&Cf(r,h,t),t=f,l=h;var g=t.updateQueue;if(g===null){var m=new Set;m.add(l),t.updateQueue=m}else g.add(l);break t}else{if(!(t&1)){Cf(r,h,t),Rc();break t}l=Error(P(426))}}else if(ot&&a.mode&1){var x=kf(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Tf(x,o,a,r,t),cc(nn(l,a));break t}}r=l=nn(l,a),Ct!==4&&(Ct=2),Zn===null?Zn=[r]:Zn.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var p=ly(r,l,t);xf(r,p);break t;case 1:a=l;var y=r.type,v=r.stateNode;if(!(r.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Es===null||!Es.has(v)))){r.flags|=65536,t&=-t,r.lanes|=t;var _=hy(r,a,t);xf(r,_);break t}}r=r.return}while(r!==null)}My(s)}catch(S){t=S,wt===s&&s!==null&&(wt=s=s.return);continue}break}while(!0)}function Ty(){var e=ma.current;return ma.current=pa,e===null?pa:e}function Rc(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),At===null||!(pi&268435455)&&!(Ua&268435455)||_s(At,Dt)}function xa(e,t){var s=H;H|=2;var i=Ty();(At!==e||Dt!==t)&&(Ze=null,li(e,t));do try{Y_();break}catch(n){ky(e,n)}while(!0);if(fc(),H=s,ma.current=i,wt!==null)throw Error(P(261));return At=null,Dt=0,Ct}function Y_(){for(;wt!==null;)Py(wt)}function X_(){for(;wt!==null&&!vw();)Py(wt)}function Py(e){var t=Ey(e.alternate,e,se);e.memoizedProps=e.pendingProps,t===null?My(e):wt=t,Tc.current=null}function My(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=z_(s,t),s!==null){s.flags&=32767,wt=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ct=6,wt=null;return}}else if(s=O_(s,t,se),s!==null){wt=s;return}if(t=t.sibling,t!==null){wt=t;return}wt=t=e}while(t!==null);Ct===0&&(Ct=5)}function qs(e,t,s){var i=K,n=ye.transition;try{ye.transition=null,K=1,K_(e,t,s,i)}finally{ye.transition=n,K=i}return null}function K_(e,t,s,i){do qi();while(bs!==null);if(H&6)throw Error(P(327));s=e.finishedWork;var n=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(P(177));e.callbackNode=null,e.callbackPriority=0;var r=s.lanes|s.childLanes;if(Aw(e,r),e===At&&(wt=At=null,Dt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||co||(co=!0,Ry(Jo,function(){return qi(),null})),r=(s.flags&15990)!==0,s.subtreeFlags&15990||r){r=ye.transition,ye.transition=null;var o=K;K=1;var a=H;H|=4,Tc.current=null,U_(e,s),Sy(s,e),m_(Bh),ea=!!jh,Bh=jh=null,e.current=s,$_(s),ww(),H=a,K=o,ye.transition=r}else e.current=s;if(co&&(co=!1,bs=e,ya=n),r=e.pendingLanes,r===0&&(Es=null),bw(s.stateNode),Jt(e,xt()),t!==null)for(i=e.onRecoverableError,s=0;s<t.length;s++)n=t[s],i(n.value,{componentStack:n.stack,digest:n.digest});if(ga)throw ga=!1,e=nu,nu=null,e;return ya&1&&e.tag!==0&&qi(),r=e.pendingLanes,r&1?e===ru?Jn++:(Jn=0,ru=e):Jn=0,Vs(),null}function qi(){if(bs!==null){var e=lg(ya),t=ye.transition,s=K;try{if(ye.transition=null,K=16>e?16:e,bs===null)var i=!1;else{if(e=bs,bs=null,ya=0,H&6)throw Error(P(331));var n=H;for(H|=4,L=e.current;L!==null;){var r=L,o=r.child;if(L.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var h=a[l];for(L=h;L!==null;){var u=L;switch(u.tag){case 0:case 11:case 15:Qn(8,u,r)}var c=u.child;if(c!==null)c.return=u,L=c;else for(;L!==null;){u=L;var d=u.sibling,f=u.return;if(vy(u),u===h){L=null;break}if(d!==null){d.return=f,L=d;break}L=f}}}var g=r.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var x=m.sibling;m.sibling=null,m=x}while(m!==null)}}L=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,L=o;else t:for(;L!==null;){if(r=L,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Qn(9,r,r.return)}var p=r.sibling;if(p!==null){p.return=r.return,L=p;break t}L=r.return}}var y=e.current;for(L=y;L!==null;){o=L;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,L=v;else t:for(o=y;L!==null;){if(a=L,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ga(9,a)}}catch(S){pt(a,a.return,S)}if(a===o){L=null;break t}var _=a.sibling;if(_!==null){_.return=a.return,L=_;break t}L=a.return}}if(H=n,Vs(),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(Ia,e)}catch{}i=!0}return i}finally{K=s,ye.transition=t}}return!1}function Vf(e,t,s){t=nn(s,t),t=ly(e,t,1),e=As(e,t,1),t=$t(),e!==null&&(Vr(e,1,t),Jt(e,t))}function pt(e,t,s){if(e.tag===3)Vf(e,e,s);else for(;t!==null;){if(t.tag===3){Vf(t,e,s);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Es===null||!Es.has(i))){e=nn(s,e),e=hy(t,e,1),t=As(t,e,1),e=$t(),t!==null&&(Vr(t,1,e),Jt(t,e));break}}t=t.return}}function q_(e,t,s){var i=e.pingCache;i!==null&&i.delete(t),t=$t(),e.pingedLanes|=e.suspendedLanes&s,At===e&&(Dt&s)===s&&(Ct===4||Ct===3&&(Dt&130023424)===Dt&&500>xt()-Mc?li(e,0):Pc|=s),Jt(e,t)}function Ay(e,t){t===0&&(e.mode&1?(t=eo,eo<<=1,!(eo&130023424)&&(eo=4194304)):t=1);var s=$t();e=us(e,t),e!==null&&(Vr(e,t,s),Jt(e,s))}function Q_(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Ay(e,s)}function Z_(e,t){var s=0;switch(e.tag){case 13:var i=e.stateNode,n=e.memoizedState;n!==null&&(s=n.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(P(314))}i!==null&&i.delete(t),Ay(e,s)}var Ey;Ey=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||Qt.current)qt=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return qt=!1,V_(e,t,s);qt=!!(e.flags&131072)}else qt=!1,ot&&t.flags&1048576&&Ig(t,la,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;zo(e,t),e=t.pendingProps;var n=Ji(t,zt.current);Ki(t,s),n=_c(null,t,i,e,n,s);var r=Sc();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Zt(i)?(r=!0,oa(t)):r=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,gc(t),n.updater=za,t.stateNode=n,n._reactInternals=t,Yh(t,i,e,s),t=qh(null,t,i,!0,r,s)):(t.tag=0,ot&&r&&hc(t),Gt(null,t,n,s),t=t.child),t;case 16:i=t.elementType;t:{switch(zo(e,t),e=t.pendingProps,n=i._init,i=n(i._payload),t.type=i,n=t.tag=tS(i),e=Te(i,e),n){case 0:t=Kh(null,t,i,e,s);break t;case 1:t=Af(null,t,i,e,s);break t;case 11:t=Pf(null,t,i,e,s);break t;case 14:t=Mf(null,t,i,Te(i.type,e),s);break t}throw Error(P(306,i,""))}return t;case 0:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Te(i,n),Kh(e,t,i,n,s);case 1:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Te(i,n),Af(e,t,i,n,s);case 3:t:{if(fy(t),e===null)throw Error(P(387));i=t.pendingProps,r=t.memoizedState,n=r.element,Og(e,t),ca(t,i,null,s);var o=t.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){n=nn(Error(P(423)),t),t=Ef(e,t,i,s,n);break t}else if(i!==n){n=nn(Error(P(424)),t),t=Ef(e,t,i,s,n);break t}else for(ie=Ms(t.stateNode.containerInfo.firstChild),ne=t,ot=!0,Me=null,s=Bg(t,null,i,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(tn(),i===n){t=cs(e,t,s);break t}Gt(e,t,i,s)}t=t.child}return t;case 5:return zg(t),e===null&&$h(t),i=t.type,n=t.pendingProps,r=e!==null?e.memoizedProps:null,o=n.children,Vh(i,n)?o=null:r!==null&&Vh(i,r)&&(t.flags|=32),dy(e,t),Gt(e,t,o,s),t.child;case 6:return e===null&&$h(t),null;case 13:return py(e,t,s);case 4:return yc(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=en(t,null,i,s):Gt(e,t,i,s),t.child;case 11:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Te(i,n),Pf(e,t,i,n,s);case 7:return Gt(e,t,t.pendingProps,s),t.child;case 8:return Gt(e,t,t.pendingProps.children,s),t.child;case 12:return Gt(e,t,t.pendingProps.children,s),t.child;case 10:t:{if(i=t.type._context,n=t.pendingProps,r=t.memoizedProps,o=n.value,et(ha,i._currentValue),i._currentValue=o,r!==null)if(De(r.value,o)){if(r.children===n.children&&!Qt.current){t=cs(e,t,s);break t}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=is(-1,s&-s),l.tag=2;var h=r.updateQueue;if(h!==null){h=h.shared;var u=h.pending;u===null?l.next=l:(l.next=u.next,u.next=l),h.pending=l}}r.lanes|=s,l=r.alternate,l!==null&&(l.lanes|=s),Wh(r.return,s,t),a.lanes|=s;break}l=l.next}}else if(r.tag===10)o=r.type===t.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(P(341));o.lanes|=s,a=o.alternate,a!==null&&(a.lanes|=s),Wh(o,s,t),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===t){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Gt(e,t,n.children,s),t=t.child}return t;case 9:return n=t.type,i=t.pendingProps.children,Ki(t,s),n=ve(n),i=i(n),t.flags|=1,Gt(e,t,i,s),t.child;case 14:return i=t.type,n=Te(i,t.pendingProps),n=Te(i.type,n),Mf(e,t,i,n,s);case 15:return uy(e,t,t.type,t.pendingProps,s);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Te(i,n),zo(e,t),t.tag=1,Zt(i)?(e=!0,oa(t)):e=!1,Ki(t,s),ay(t,i,n),Yh(t,i,n,s),qh(null,t,i,!0,e,s);case 19:return my(e,t,s);case 22:return cy(e,t,s)}throw Error(P(156,t.tag))};function Ry(e,t){return ng(e,t)}function J_(e,t,s,i){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function me(e,t,s,i){return new J_(e,t,s,i)}function Nc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tS(e){if(typeof e=="function")return Nc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Qu)return 11;if(e===Zu)return 14}return 2}function Ns(e,t){var s=e.alternate;return s===null?(s=me(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function $o(e,t,s,i,n,r){var o=2;if(i=e,typeof e=="function")Nc(e)&&(o=1);else if(typeof e=="string")o=5;else t:switch(e){case Mi:return hi(s.children,n,r,t);case qu:o=8,n|=8;break;case yh:return e=me(12,s,t,n|2),e.elementType=yh,e.lanes=r,e;case xh:return e=me(13,s,t,n),e.elementType=xh,e.lanes=r,e;case vh:return e=me(19,s,t,n),e.elementType=vh,e.lanes=r,e;case z0:return $a(s,n,r,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case V0:o=10;break t;case O0:o=9;break t;case Qu:o=11;break t;case Zu:o=14;break t;case xs:o=16,i=null;break t}throw Error(P(130,e==null?e:typeof e,""))}return t=me(o,s,t,n),t.elementType=e,t.type=i,t.lanes=r,t}function hi(e,t,s,i){return e=me(7,e,i,t),e.lanes=s,e}function $a(e,t,s,i){return e=me(22,e,i,t),e.elementType=z0,e.lanes=s,e.stateNode={isHidden:!1},e}function Rl(e,t,s){return e=me(6,e,null,t),e.lanes=s,e}function Nl(e,t,s){return t=me(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function eS(e,t,s,i,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dl(0),this.expirationTimes=dl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dl(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Dc(e,t,s,i,n,r,o,a,l){return e=new eS(e,t,s,a,l),t===1?(t=1,r===!0&&(t|=8)):t=0,r=me(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:i,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},gc(r),e}function sS(e,t,s){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pi,key:i==null?null:""+i,children:e,containerInfo:t,implementation:s}}function Ny(e){if(!e)return Is;e=e._reactInternals;t:{if(xi(e)!==e||e.tag!==1)throw Error(P(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(Zt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(P(171))}if(e.tag===1){var s=e.type;if(Zt(s))return Ng(e,s,t)}return t}function Dy(e,t,s,i,n,r,o,a,l){return e=Dc(s,i,!0,e,n,r,o,a,l),e.context=Ny(null),s=e.current,i=$t(),n=Rs(s),r=is(i,n),r.callback=t??null,As(s,r,n),e.current.lanes=n,Vr(e,n,i),Jt(e,i),e}function Wa(e,t,s,i){var n=t.current,r=$t(),o=Rs(n);return s=Ny(s),t.context===null?t.context=s:t.pendingContext=s,t=is(r,o),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=As(n,t,o),e!==null&&(Ne(e,n,o,r),Bo(e,n,o)),o}function va(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Of(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Ic(e,t){Of(e,t),(e=e.alternate)&&Of(e,t)}function iS(){return null}var Iy=typeof reportError=="function"?reportError:function(e){console.error(e)};function Lc(e){this._internalRoot=e}Ha.prototype.render=Lc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(P(409));Wa(e,t,null,null)};Ha.prototype.unmount=Lc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;mi(function(){Wa(null,e,null,null)}),t[hs]=null}};function Ha(e){this._internalRoot=e}Ha.prototype.unstable_scheduleHydration=function(e){if(e){var t=cg();e={blockedOn:null,target:e,priority:t};for(var s=0;s<ws.length&&t!==0&&t<ws[s].priority;s++);ws.splice(s,0,e),s===0&&fg(e)}};function Fc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ya(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function zf(){}function nS(e,t,s,i,n){if(n){if(typeof i=="function"){var r=i;i=function(){var h=va(o);r.call(h)}}var o=Dy(t,i,e,0,null,!1,!1,"",zf);return e._reactRootContainer=o,e[hs]=o.current,gr(e.nodeType===8?e.parentNode:e),mi(),o}for(;n=e.lastChild;)e.removeChild(n);if(typeof i=="function"){var a=i;i=function(){var h=va(l);a.call(h)}}var l=Dc(e,0,!1,null,null,!1,!1,"",zf);return e._reactRootContainer=l,e[hs]=l.current,gr(e.nodeType===8?e.parentNode:e),mi(function(){Wa(t,l,s,i)}),l}function Xa(e,t,s,i,n){var r=s._reactRootContainer;if(r){var o=r;if(typeof n=="function"){var a=n;n=function(){var l=va(o);a.call(l)}}Wa(t,o,e,n)}else o=nS(s,t,e,n,i);return va(o)}hg=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Fn(t.pendingLanes);s!==0&&(ec(t,s|1),Jt(t,xt()),!(H&6)&&(rn=xt()+500,Vs()))}break;case 13:mi(function(){var i=us(e,1);if(i!==null){var n=$t();Ne(i,e,1,n)}}),Ic(e,1)}};sc=function(e){if(e.tag===13){var t=us(e,134217728);if(t!==null){var s=$t();Ne(t,e,134217728,s)}Ic(e,134217728)}};ug=function(e){if(e.tag===13){var t=Rs(e),s=us(e,t);if(s!==null){var i=$t();Ne(s,e,t,i)}Ic(e,t)}};cg=function(){return K};dg=function(e,t){var s=K;try{return K=e,t()}finally{K=s}};Ah=function(e,t,s){switch(t){case"input":if(Sh(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var i=s[t];if(i!==e&&i.form===e.form){var n=Ba(i);if(!n)throw Error(P(90));U0(i),Sh(i,n)}}}break;case"textarea":W0(e,s);break;case"select":t=s.value,t!=null&&Wi(e,!!s.multiple,t,!1)}};Z0=Ac;J0=mi;var rS={usingClientEntryPoint:!1,Events:[zr,Ni,Ba,q0,Q0,Ac]},kn={findFiberByHostInstance:ii,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oS={bundleType:kn.bundleType,version:kn.version,rendererPackageName:kn.rendererPackageName,rendererConfig:kn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ps.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=sg(e),e===null?null:e.stateNode},findFiberByHostInstance:kn.findFiberByHostInstance||iS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fo.isDisabled&&fo.supportsFiber)try{Ia=fo.inject(oS),He=fo}catch{}}he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rS;he.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fc(t))throw Error(P(200));return sS(e,t,null,s)};he.createRoot=function(e,t){if(!Fc(e))throw Error(P(299));var s=!1,i="",n=Iy;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=Dc(e,1,!1,null,null,s,!1,i,n),e[hs]=t.current,gr(e.nodeType===8?e.parentNode:e),new Lc(t)};he.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(P(188)):(e=Object.keys(e).join(","),Error(P(268,e)));return e=sg(t),e=e===null?null:e.stateNode,e};he.flushSync=function(e){return mi(e)};he.hydrate=function(e,t,s){if(!Ya(t))throw Error(P(200));return Xa(null,e,t,!0,s)};he.hydrateRoot=function(e,t,s){if(!Fc(e))throw Error(P(405));var i=s!=null&&s.hydratedSources||null,n=!1,r="",o=Iy;if(s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(r=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),t=Dy(t,null,e,1,s??null,n,!1,r,o),e[hs]=t.current,gr(e),i)for(e=0;e<i.length;e++)s=i[e],n=s._getVersion,n=n(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,n]:t.mutableSourceEagerHydrationData.push(s,n);return new Ha(t)};he.render=function(e,t,s){if(!Ya(t))throw Error(P(200));return Xa(null,e,t,!1,s)};he.unmountComponentAtNode=function(e){if(!Ya(e))throw Error(P(40));return e._reactRootContainer?(mi(function(){Xa(null,null,e,!1,function(){e._reactRootContainer=null,e[hs]=null})}),!0):!1};he.unstable_batchedUpdates=Ac;he.unstable_renderSubtreeIntoContainer=function(e,t,s,i){if(!Ya(s))throw Error(P(200));if(e==null||e._reactInternals===void 0)throw Error(P(38));return Xa(e,t,s,!1,i)};he.version="18.3.1-next-f1338f8080-20240426";function Ly(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ly)}catch(e){console.error(e)}}Ly(),L0.exports=he;var aS=L0.exports,Gf=aS;mh.createRoot=Gf.createRoot,mh.hydrateRoot=Gf.hydrateRoot;const lS={},Uf=e=>{let t;const s=new Set,i=(u,c)=>{const d=typeof u=="function"?u(t):u;if(!Object.is(d,t)){const f=t;t=c??(typeof d!="object"||d===null)?d:Object.assign({},t,d),s.forEach(g=>g(t,f))}},n=()=>t,l={setState:i,getState:n,getInitialState:()=>h,subscribe:u=>(s.add(u),()=>s.delete(u)),destroy:()=>{(lS?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},h=t=e(i,n,l);return l},hS=e=>e?Uf(e):Uf;var Fy={exports:{}},jy={},By={exports:{}},Vy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var on=M;function uS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cS=typeof Object.is=="function"?Object.is:uS,dS=on.useState,fS=on.useEffect,pS=on.useLayoutEffect,mS=on.useDebugValue;function gS(e,t){var s=t(),i=dS({inst:{value:s,getSnapshot:t}}),n=i[0].inst,r=i[1];return pS(function(){n.value=s,n.getSnapshot=t,Dl(n)&&r({inst:n})},[e,s,t]),fS(function(){return Dl(n)&&r({inst:n}),e(function(){Dl(n)&&r({inst:n})})},[e]),mS(s),s}function Dl(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!cS(e,s)}catch{return!0}}function yS(e,t){return t()}var xS=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?yS:gS;Vy.useSyncExternalStore=on.useSyncExternalStore!==void 0?on.useSyncExternalStore:xS;By.exports=Vy;var vS=By.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ka=M,wS=vS;function _S(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var SS=typeof Object.is=="function"?Object.is:_S,bS=wS.useSyncExternalStore,CS=Ka.useRef,kS=Ka.useEffect,TS=Ka.useMemo,PS=Ka.useDebugValue;jy.useSyncExternalStoreWithSelector=function(e,t,s,i,n){var r=CS(null);if(r.current===null){var o={hasValue:!1,value:null};r.current=o}else o=r.current;r=TS(function(){function l(f){if(!h){if(h=!0,u=f,f=i(f),n!==void 0&&o.hasValue){var g=o.value;if(n(g,f))return c=g}return c=f}if(g=c,SS(u,f))return g;var m=i(f);return n!==void 0&&n(g,m)?(u=f,g):(u=f,c=m)}var h=!1,u,c,d=s===void 0?null:s;return[function(){return l(t())},d===null?void 0:function(){return l(d())}]},[t,s,i,n]);var a=bS(e,r[0],r[1]);return kS(function(){o.hasValue=!0,o.value=a},[a]),PS(a),a};Fy.exports=jy;var MS=Fy.exports;const AS=Na(MS),Oy={},{useDebugValue:ES}=Hu,{useSyncExternalStoreWithSelector:RS}=AS;let $f=!1;const NS=e=>e;function DS(e,t=NS,s){(Oy?"production":void 0)!=="production"&&s&&!$f&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),$f=!0);const i=RS(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return ES(i),i}const Wf=e=>{(Oy?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?hS(e):e,s=(i,n)=>DS(t,i,n);return Object.assign(s,t),s},IS=e=>e?Wf(e):Wf,O=IS(e=>({hp:100,maxHp:100,scrap:100,wave:1,level:1,xp:0,maxXp:100,wagonCount:0,maxWagonCount:0,ownedWagons:[],speed:0,gear:0,waveTimer:0,waveDuration:1800,gameState:"PLAY",cameraMode:"follow",godMode:!1,setStats:t=>e(s=>({...s,...t})),setGameState:t=>e({gameState:t}),rerollCost:50,increaseRerollCost:()=>e(t=>({rerollCost:t.rerollCost+50}))}));function St(e,t){const s=t.length;if(s===0)return{x:0,y:0};let i=Math.floor(e),n=i-1,r=i+1,o=i+2,a=e-i;n=(n%s+s)%s,i=(i%s+s)%s,r=(r%s+s)%s,o=(o%s+s)%s;const l=t[n],h=t[i],u=t[r],c=t[o],d=a*a,f=d*a,g=.5*(2*h.x+(-l.x+u.x)*a+(2*l.x-5*h.x+4*u.x-c.x)*d+(-l.x+3*h.x-3*u.x+c.x)*f),m=.5*(2*h.y+(-l.y+u.y)*a+(2*l.y-5*h.y+4*u.y-c.y)*d+(-l.y+3*h.y-3*u.y+c.y)*f);return{x:g,y:m}}function Hf(e){let t=0;const s=.1;let i=St(0,e);for(let n=s;n<=e.length;n+=s){const r=St(n,e);t+=Math.hypot(r.x-i.x,r.y-i.y),i=r}return t}class LS{constructor(){this.ctx=new(window.AudioContext||window.webkitAudioContext),this.masterGain=this.ctx.createGain(),this.masterGain.gain.value=.4,this.masterGain.connect(this.ctx.destination);const t=this.ctx.sampleRate*2;this.noiseBuffer=this.ctx.createBuffer(1,t,this.ctx.sampleRate);const s=this.noiseBuffer.getChannelData(0);for(let i=0;i<t;i++)s[i]=Math.random()*2-1;this.lastPlayed={},this.isMuted=!0,this.masterGain.gain.value=0}toggleMute(){return this.isMuted=!this.isMuted,this.isMuted?this.masterGain.gain.setTargetAtTime(0,this.ctx.currentTime,.1):(this.resume(),this.masterGain.gain.setTargetAtTime(.4,this.ctx.currentTime,.1)),this.isMuted}resume(){this.ctx.state==="suspended"&&this.ctx.resume()}play(t,s=0){this.resume();const i=this.ctx.currentTime,n=this.lastPlayed[t]||0;if(t==="shoot"&&i-n<.08||t==="flame"&&i-n<.1||t==="collect"&&i-n<.05)return;this.lastPlayed[t]=i;const r=this.ctx.createStereoPanner();switch(r.pan.value=Math.max(-1,Math.min(1,s)),r.connect(this.masterGain),t){case"shoot":this.playTone(i,"square",150,60,.08,.1,r),this.playNoise(i,.05,1200,"lowpass",.15,.01,r);break;case"sniper":this.playTone(i,"triangle",120,30,.3,.3,r),this.playNoise(i,.25,600,"lowpass",.4,.01,r);break;case"flame":this.playNoise(i,.15,800,"lowpass",.1,.05,r);break;case"tesla":this.playTone(i,"sawtooth",800,200,.15,.15,r),this.playTone(i,"square",400,100,.15,.05,r);break;case"mortar":this.playTone(i,"sine",100,20,.4,.4,r),this.playNoise(i,.3,300,"lowpass",.3,.01,r);break;case"railgun":this.playTone(i,"sawtooth",2e3,50,.5,.2,r),this.playNoise(i,.3,2e3,"bandpass",.4,.01,r);break;case"cryo":this.playTone(i,"sine",1200,1500,.2,.1,r);break;case"acid":this.playNoise(i,.2,1500,"bandpass",.15,.05,r);break;case"gravity":this.playTone(i,"sine",50,150,.4,.3,r);break;case"thumper":this.playTone(i,"square",50,10,.3,.5,r);break;case"explode":this.playNoise(i,.5,150,"lowpass",.6,.01,r);break;case"build":this.playTone(i,"sine",400,800,.15,.2,r);break;case"collect":this.playTone(i,"triangle",1200,1800,.08,.1,r);break;case"levelup":this.playTone(i,"square",440,440,.1,.2,r),this.playTone(i+.1,"square",554,554,.1,.2,r),this.playTone(i+.2,"square",659,659,.4,.2,r);break;case"spawn":this.playTone(i,"sawtooth",150,50,.6,.3,r);break;default:this.playTone(i,"sine",440,220,.1,.1,r);break}}playTone(t,s,i,n,r,o,a){const l=this.ctx.createOscillator(),h=this.ctx.createGain();l.type=s,l.frequency.setValueAtTime(i,t),l.frequency.exponentialRampToValueAtTime(Math.max(1,n),t+r),h.gain.setValueAtTime(o,t),h.gain.exponentialRampToValueAtTime(.001,t+r),l.connect(h),h.connect(a),l.start(t),l.stop(t+r)}playNoise(t,s,i,n,r,o=.01,a){const l=this.ctx.createBufferSource();l.buffer=this.noiseBuffer,l.loopStart=Math.random()*(this.noiseBuffer.duration-s),l.loopEnd=l.loopStart+s,l.loop=!0;const h=this.ctx.createBiquadFilter();h.type=n,h.frequency.setValueAtTime(i,t),n==="bandpass"&&(h.Q.value=1);const u=this.ctx.createGain();u.gain.setValueAtTime(0,t),u.gain.linearRampToValueAtTime(r,t+o),u.gain.exponentialRampToValueAtTime(.001,t+s),l.connect(h),h.connect(u),u.connect(a),l.start(t),l.stop(t+s)}startMusic(){this.musicStarted||(this.musicStarted=!0,this.resume(),this.sequencer=new FS(this.ctx,this.masterGain),this.sequencer.start())}}class FS{constructor(t,s){this.ctx=t,this.dest=s,this.isPlaying=!1,this.tempo=110,this.nextNoteTime=0,this.step=0,this.scale=[82.41,87.31,98,110,123.47,130.81,146.83,164.81,174.61,196,220,246.94,261.63,293.66,329.63],this.delayNode=this.ctx.createDelay(),this.delayNode.delayTime.value=60/this.tempo*.75,this.delayFeedback=this.ctx.createGain(),this.delayFeedback.gain.value=.4,this.delayFilter=this.ctx.createBiquadFilter(),this.delayFilter.type="lowpass",this.delayFilter.frequency.value=1e3,this.delayNode.connect(this.delayFeedback),this.delayFeedback.connect(this.delayFilter),this.delayFilter.connect(this.delayNode),this.delayNode.connect(this.dest),this.bassPattern=[0,null,0,null,3,null,0,null,0,null,0,null,1,null,4,null],this.kickPattern=[1,0,0,0,1,0,0,0,1,0,0,0,1,0,1,0],this.melodyPattern=[null,7,null,8,null,7,null,9,null,7,null,6,null,7,null,10],this.padChord=[0,4,7]}start(){this.isPlaying=!0,this.nextNoteTime=this.ctx.currentTime,this.scheduler()}scheduler(){if(!this.isPlaying)return;const s=60/this.tempo/4;for(;this.nextNoteTime<this.ctx.currentTime+.1;)this.playStep(this.nextNoteTime),this.nextNoteTime+=s,this.step=(this.step+1)%16;setTimeout(()=>this.scheduler(),25)}playStep(t){this.kickPattern[this.step]&&this.playKick(t);const s=this.bassPattern[this.step];s!==null&&this.playSynth(t,this.scale[s],"sawtooth",.2,.2,150,!1);const i=this.melodyPattern[this.step];if(i!==null){let n=i;Math.random()<.3&&(n+=Math.random()>.5?1:-1),this.playSynth(t,this.scale[n],"triangle",.1,.1,1200,!0)}this.step%2===1&&this.playNoise(t,.03),this.step===0&&this.padChord.forEach((n,r)=>{this.playPad(t,this.scale[n+7],.05,4)})}playKick(t){const s=this.ctx.createOscillator(),i=this.ctx.createGain();s.frequency.setValueAtTime(150,t),s.frequency.exponentialRampToValueAtTime(.01,t+.5),i.gain.setValueAtTime(.8,t),i.gain.exponentialRampToValueAtTime(.001,t+.5),s.connect(i),i.connect(this.dest),s.start(t),s.stop(t+.5)}playSynth(t,s,i,n,r,o,a){const l=this.ctx.createOscillator(),h=this.ctx.createGain(),u=this.ctx.createBiquadFilter();l.type=i,l.frequency.setValueAtTime(s,t),u.type="lowpass",u.frequency.setValueAtTime(o,t),u.frequency.exponentialRampToValueAtTime(o*.5,t+r),h.gain.setValueAtTime(n,t),h.gain.exponentialRampToValueAtTime(.001,t+r),l.connect(u),u.connect(h),h.connect(this.dest),a&&h.connect(this.delayNode),l.start(t),l.stop(t+r)}playPad(t,s,i,n){const r=this.ctx.createOscillator(),o=this.ctx.createGain();r.type="sine",r.frequency.value=s,o.gain.setValueAtTime(0,t),o.gain.linearRampToValueAtTime(i,t+1),o.gain.linearRampToValueAtTime(0,t+n),r.connect(o),o.connect(this.dest),r.start(t),r.stop(t+n)}playNoise(t,s){const i=this.ctx.sampleRate*s,n=this.ctx.createBuffer(1,i,this.ctx.sampleRate),r=n.getChannelData(0);for(let h=0;h<i;h++)r[h]=Math.random()*2-1;const o=this.ctx.createBufferSource();o.buffer=n;const a=this.ctx.createBiquadFilter();a.type="highpass",a.frequency.value=6e3;const l=this.ctx.createGain();l.gain.setValueAtTime(.05,t),l.gain.exponentialRampToValueAtTime(.001,t+s),o.connect(a),a.connect(l),l.connect(this.dest),o.start(t)}}const G=new LS,jS="modulepreload",BS=function(e){return"/loop-train/"+e},Yf={},wa=function(t,s,i){let n=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.allSettled(s.map(l=>{if(l=BS(l),l in Yf)return;Yf[l]=!0;const h=l.endsWith(".css"),u=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const c=document.createElement("link");if(c.rel=h?"stylesheet":jS,h||(c.as="script"),c.crossOrigin="",c.href=l,a&&c.setAttribute("nonce",a),document.head.appendChild(c),h)return new Promise((d,f)=>{c.addEventListener("load",d),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return n.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return t().catch(r)})};var q=(e=>(e.Application="application",e.WebGLPipes="webgl-pipes",e.WebGLPipesAdaptor="webgl-pipes-adaptor",e.WebGLSystem="webgl-system",e.WebGPUPipes="webgpu-pipes",e.WebGPUPipesAdaptor="webgpu-pipes-adaptor",e.WebGPUSystem="webgpu-system",e.CanvasSystem="canvas-system",e.CanvasPipesAdaptor="canvas-pipes-adaptor",e.CanvasPipes="canvas-pipes",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e.MaskEffect="mask-effect",e.BlendMode="blend-mode",e.TextureSource="texture-source",e.Environment="environment",e.ShapeBuilder="shape-builder",e.Batcher="batcher",e))(q||{});const lu=e=>{if(typeof e=="function"||typeof e=="object"&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e={...typeof e.extension!="object"?{type:e.extension}:e.extension,ref:e}}if(typeof e=="object")e={...e};else throw new Error("Invalid extension type");return typeof e.type=="string"&&(e.type=[e.type]),e},po=(e,t)=>lu(e).priority??t,_e={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(lu).forEach(t=>{t.type.forEach(s=>{var i,n;return(n=(i=this._removeHandlers)[s])==null?void 0:n.call(i,t)})}),this},add(...e){return e.map(lu).forEach(t=>{t.type.forEach(s=>{var r,o;const i=this._addHandlers,n=this._queue;i[s]?(o=i[s])==null||o.call(i,t):(n[s]=n[s]||[],(r=n[s])==null||r.push(t))})}),this},handle(e,t,s){var o;const i=this._addHandlers,n=this._removeHandlers;if(i[e]||n[e])throw new Error(`Extension type ${e} already has a handler`);i[e]=t,n[e]=s;const r=this._queue;return r[e]&&((o=r[e])==null||o.forEach(a=>t(a)),delete r[e]),this},handleByMap(e,t){return this.handle(e,s=>{s.name&&(t[s.name]=s.ref)},s=>{s.name&&delete t[s.name]})},handleByNamedList(e,t,s=-1){return this.handle(e,i=>{t.findIndex(r=>r.name===i.name)>=0||(t.push({name:i.name,value:i.ref}),t.sort((r,o)=>po(o.value,s)-po(r.value,s)))},i=>{const n=t.findIndex(r=>r.name===i.name);n!==-1&&t.splice(n,1)})},handleByList(e,t,s=-1){return this.handle(e,i=>{t.includes(i.ref)||(t.push(i.ref),t.sort((n,r)=>po(r,s)-po(n,s)))},i=>{const n=t.indexOf(i.ref);n!==-1&&t.splice(n,1)})},mixin(e,...t){for(const s of t)Object.defineProperties(e.prototype,Object.getOwnPropertyDescriptors(s))}},VS={extension:{type:q.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await wa(()=>import("./browserAll-BjBWlbGG.js"),__vite__mapDeps([0,1,2]))}},OS={extension:{type:q.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await wa(()=>import("./webworkerAll-kpWzgapQ.js"),__vite__mapDeps([1,2]))}};class Nt{constructor(t,s,i){this._x=s||0,this._y=i||0,this._observer=t}clone(t){return new Nt(t??this._observer,this._x,this._y)}set(t=0,s=t){return(this._x!==t||this._y!==s)&&(this._x=t,this._y=s,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}var zy={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,s="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(s=!1));function n(l,h,u){this.fn=l,this.context=h,this.once=u||!1}function r(l,h,u,c,d){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new n(u,c||l,d),g=s?s+h:h;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],f]:l._events[g].push(f):(l._events[g]=f,l._eventsCount++),l}function o(l,h){--l._eventsCount===0?l._events=new i:delete l._events[h]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var h=[],u,c;if(this._eventsCount===0)return h;for(c in u=this._events)t.call(u,c)&&h.push(s?c.slice(1):c);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(u)):h},a.prototype.listeners=function(h){var u=s?s+h:h,c=this._events[u];if(!c)return[];if(c.fn)return[c.fn];for(var d=0,f=c.length,g=new Array(f);d<f;d++)g[d]=c[d].fn;return g},a.prototype.listenerCount=function(h){var u=s?s+h:h,c=this._events[u];return c?c.fn?1:c.length:0},a.prototype.emit=function(h,u,c,d,f,g){var m=s?s+h:h;if(!this._events[m])return!1;var x=this._events[m],p=arguments.length,y,v;if(x.fn){switch(x.once&&this.removeListener(h,x.fn,void 0,!0),p){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,u),!0;case 3:return x.fn.call(x.context,u,c),!0;case 4:return x.fn.call(x.context,u,c,d),!0;case 5:return x.fn.call(x.context,u,c,d,f),!0;case 6:return x.fn.call(x.context,u,c,d,f,g),!0}for(v=1,y=new Array(p-1);v<p;v++)y[v-1]=arguments[v];x.fn.apply(x.context,y)}else{var _=x.length,S;for(v=0;v<_;v++)switch(x[v].once&&this.removeListener(h,x[v].fn,void 0,!0),p){case 1:x[v].fn.call(x[v].context);break;case 2:x[v].fn.call(x[v].context,u);break;case 3:x[v].fn.call(x[v].context,u,c);break;case 4:x[v].fn.call(x[v].context,u,c,d);break;default:if(!y)for(S=1,y=new Array(p-1);S<p;S++)y[S-1]=arguments[S];x[v].fn.apply(x[v].context,y)}}return!0},a.prototype.on=function(h,u,c){return r(this,h,u,c,!1)},a.prototype.once=function(h,u,c){return r(this,h,u,c,!0)},a.prototype.removeListener=function(h,u,c,d){var f=s?s+h:h;if(!this._events[f])return this;if(!u)return o(this,f),this;var g=this._events[f];if(g.fn)g.fn===u&&(!d||g.once)&&(!c||g.context===c)&&o(this,f);else{for(var m=0,x=[],p=g.length;m<p;m++)(g[m].fn!==u||d&&!g[m].once||c&&g[m].context!==c)&&x.push(g[m]);x.length?this._events[f]=x.length===1?x[0]:x:o(this,f)}return this},a.prototype.removeAllListeners=function(h){var u;return h?(u=s?s+h:h,this._events[u]&&o(this,u)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=s,a.EventEmitter=a,e.exports=a})(zy);var zS=zy.exports;const qe=Na(zS),GS=Math.PI*2,US=180/Math.PI,$S=Math.PI/180;class Vt{constructor(t=0,s=0){this.x=0,this.y=0,this.x=t,this.y=s}clone(){return new Vt(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,s=t){return this.x=t,this.y=s,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Il.x=0,Il.y=0,Il}}const Il=new Vt;class W{constructor(t=1,s=0,i=0,n=1,r=0,o=0){this.array=null,this.a=t,this.b=s,this.c=i,this.d=n,this.tx=r,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,s,i,n,r,o){return this.a=t,this.b=s,this.c=i,this.d=n,this.tx=r,this.ty=o,this}toArray(t,s){this.array||(this.array=new Float32Array(9));const i=s||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,s){s=s||new Vt;const i=t.x,n=t.y;return s.x=this.a*i+this.c*n+this.tx,s.y=this.b*i+this.d*n+this.ty,s}applyInverse(t,s){s=s||new Vt;const i=this.a,n=this.b,r=this.c,o=this.d,a=this.tx,l=this.ty,h=1/(i*o+r*-n),u=t.x,c=t.y;return s.x=o*h*u+-r*h*c+(l*r-a*o)*h,s.y=i*h*c+-n*h*u+(-l*i+a*n)*h,s}translate(t,s){return this.tx+=t,this.ty+=s,this}scale(t,s){return this.a*=t,this.d*=s,this.c*=t,this.b*=s,this.tx*=t,this.ty*=s,this}rotate(t){const s=Math.cos(t),i=Math.sin(t),n=this.a,r=this.c,o=this.tx;return this.a=n*s-this.b*i,this.b=n*i+this.b*s,this.c=r*s-this.d*i,this.d=r*i+this.d*s,this.tx=o*s-this.ty*i,this.ty=o*i+this.ty*s,this}append(t){const s=this.a,i=this.b,n=this.c,r=this.d;return this.a=t.a*s+t.b*n,this.b=t.a*i+t.b*r,this.c=t.c*s+t.d*n,this.d=t.c*i+t.d*r,this.tx=t.tx*s+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this}appendFrom(t,s){const i=t.a,n=t.b,r=t.c,o=t.d,a=t.tx,l=t.ty,h=s.a,u=s.b,c=s.c,d=s.d;return this.a=i*h+n*c,this.b=i*u+n*d,this.c=r*h+o*c,this.d=r*u+o*d,this.tx=a*h+l*c+s.tx,this.ty=a*u+l*d+s.ty,this}setTransform(t,s,i,n,r,o,a,l,h){return this.a=Math.cos(a+h)*r,this.b=Math.sin(a+h)*r,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=t-(i*this.a+n*this.c),this.ty=s-(i*this.b+n*this.d),this}prepend(t){const s=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=s*t.a+this.ty*t.c+t.tx,this.ty=s*t.b+this.ty*t.d+t.ty,this}decompose(t){const s=this.a,i=this.b,n=this.c,r=this.d,o=t.pivot,a=-Math.atan2(-n,r),l=Math.atan2(i,s),h=Math.abs(a+l);return h<1e-5||Math.abs(GS-h)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=l),t.scale.x=Math.sqrt(s*s+i*i),t.scale.y=Math.sqrt(n*n+r*r),t.position.x=this.tx+(o.x*s+o.y*n),t.position.y=this.ty+(o.x*i+o.y*r),t}invert(){const t=this.a,s=this.b,i=this.c,n=this.d,r=this.tx,o=t*n-s*i;return this.a=n/o,this.b=-s/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-n*r)/o,this.ty=-(t*this.ty-s*r)/o,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new W;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return HS.identity()}static get shared(){return WS.identity()}}const WS=new W,HS=new W,Qs=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Zs=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Js=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ti=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],hu=[],Gy=[],mo=Math.sign;function YS(){for(let e=0;e<16;e++){const t=[];hu.push(t);for(let s=0;s<16;s++){const i=mo(Qs[e]*Qs[s]+Js[e]*Zs[s]),n=mo(Zs[e]*Qs[s]+ti[e]*Zs[s]),r=mo(Qs[e]*Js[s]+Js[e]*ti[s]),o=mo(Zs[e]*Js[s]+ti[e]*ti[s]);for(let a=0;a<16;a++)if(Qs[a]===i&&Zs[a]===n&&Js[a]===r&&ti[a]===o){t.push(a);break}}}for(let e=0;e<16;e++){const t=new W;t.set(Qs[e],Zs[e],Js[e],ti[e],0,0),Gy.push(t)}}YS();const J={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>Qs[e],uY:e=>Zs[e],vX:e=>Js[e],vY:e=>ti[e],inv:e=>e&8?e&15:-e&7,add:(e,t)=>hu[e][t],sub:(e,t)=>hu[e][J.inv(t)],rotate180:e=>e^4,isVertical:e=>(e&3)===2,byDirection:(e,t)=>Math.abs(e)*2<=Math.abs(t)?t>=0?J.S:J.N:Math.abs(t)*2<=Math.abs(e)?e>0?J.E:J.W:t>0?e>0?J.SE:J.SW:e>0?J.NE:J.NW,matrixAppendRotationInv:(e,t,s=0,i=0)=>{const n=Gy[J.inv(t)];n.tx=s,n.ty=i,e.append(n)},transformRectCoords:(e,t,s,i)=>{const{x:n,y:r,width:o,height:a}=e,{x:l,y:h,width:u,height:c}=t;return s===J.E?(i.set(n+l,r+h,o,a),i):s===J.S?i.set(u-r-a+l,n+h,a,o):s===J.W?i.set(u-n-o+l,c-r-a+h,o,a):s===J.N?i.set(r+l,c-n-o+h,a,o):i.set(n+l,r+h,o,a)}},go=[new Vt,new Vt,new Vt,new Vt];class vt{constructor(t=0,s=0,i=0,n=0){this.type="rectangle",this.x=Number(t),this.y=Number(s),this.width=Number(i),this.height=Number(n)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new vt(0,0,0,0)}clone(){return new vt(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,s){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&s>=this.y&&s<this.y+this.height}strokeContains(t,s,i,n=.5){const{width:r,height:o}=this;if(r<=0||o<=0)return!1;const a=this.x,l=this.y,h=i*(1-n),u=i-h,c=a-h,d=a+r+h,f=l-h,g=l+o+h,m=a+u,x=a+r-u,p=l+u,y=l+o-u;return t>=c&&t<=d&&s>=f&&s<=g&&!(t>m&&t<x&&s>p&&s<y)}intersects(t,s){if(!s){const k=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=k)return!1;const T=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>T}const i=this.left,n=this.right,r=this.top,o=this.bottom;if(n<=i||o<=r)return!1;const a=go[0].set(t.left,t.top),l=go[1].set(t.left,t.bottom),h=go[2].set(t.right,t.top),u=go[3].set(t.right,t.bottom);if(h.x<=a.x||l.y<=a.y)return!1;const c=Math.sign(s.a*s.d-s.b*s.c);if(c===0||(s.apply(a,a),s.apply(l,l),s.apply(h,h),s.apply(u,u),Math.max(a.x,l.x,h.x,u.x)<=i||Math.min(a.x,l.x,h.x,u.x)>=n||Math.max(a.y,l.y,h.y,u.y)<=r||Math.min(a.y,l.y,h.y,u.y)>=o))return!1;const d=c*(l.y-a.y),f=c*(a.x-l.x),g=d*i+f*r,m=d*n+f*r,x=d*i+f*o,p=d*n+f*o;if(Math.max(g,m,x,p)<=d*a.x+f*a.y||Math.min(g,m,x,p)>=d*u.x+f*u.y)return!1;const y=c*(a.y-h.y),v=c*(h.x-a.x),_=y*i+v*r,S=y*n+v*r,b=y*i+v*o,C=y*n+v*o;return!(Math.max(_,S,b,C)<=y*a.x+v*a.y||Math.min(_,S,b,C)>=y*u.x+v*u.y)}pad(t=0,s=t){return this.x-=t,this.y-=s,this.width+=t*2,this.height+=s*2,this}fit(t){const s=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),r=Math.min(this.y+this.height,t.y+t.height);return this.x=s,this.width=Math.max(i-s,0),this.y=n,this.height=Math.max(r-n,0),this}ceil(t=1,s=.001){const i=Math.ceil((this.x+this.width-s)*t)/t,n=Math.ceil((this.y+this.height-s)*t)/t;return this.x=Math.floor((this.x+s)*t)/t,this.y=Math.floor((this.y+s)*t)/t,this.width=i-this.x,this.height=n-this.y,this}scale(t,s=t){return this.x*=t,this.y*=s,this.width*=t,this.height*=s,this}enlarge(t){const s=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),r=Math.max(this.y+this.height,t.y+t.height);return this.x=s,this.width=i-s,this.y=n,this.height=r-n,this}getBounds(t){return t||(t=new vt),t.copyFrom(this),t}containsRect(t){if(this.width<=0||this.height<=0)return!1;const s=t.x,i=t.y,n=t.x+t.width,r=t.y+t.height;return s>=this.x&&s<this.x+this.width&&i>=this.y&&i<this.y+this.height&&n>=this.x&&n<this.x+this.width&&r>=this.y&&r<this.y+this.height}set(t,s,i,n){return this.x=t,this.y=s,this.width=i,this.height=n,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const Ll={default:-1};function gt(e="default"){return Ll[e]===void 0&&(Ll[e]=-1),++Ll[e]}const Xf=new Set,mt="8.0.0",XS="8.3.4",Vi={quiet:!1,noColor:!1},X=(e,t,s=3)=>{if(Vi.quiet||Xf.has(t))return;let i=new Error().stack;const n=`${t}
Deprecated since v${e}`,r=typeof console.groupCollapsed=="function"&&!Vi.noColor;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",n):(i=i.split(`
`).splice(s).join(`
`),r?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",n),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",n),console.warn(i))),Xf.add(t)};Object.defineProperties(X,{quiet:{get:()=>Vi.quiet,set:e=>{Vi.quiet=e},enumerable:!0,configurable:!1},noColor:{get:()=>Vi.noColor,set:e=>{Vi.noColor=e},enumerable:!0,configurable:!1}});const Uy=()=>{};function an(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function Kf(e){return!(e&e-1)&&!!e}function $y(e){const t={};for(const s in e)e[s]!==void 0&&(t[s]=e[s]);return t}const qf=Object.create(null);function KS(e){const t=qf[e];return t===void 0&&(qf[e]=gt("resource")),t}const Wy=class Hy extends qe{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...Hy.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){X(mt,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=KS(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};Wy.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let _a=Wy;const Yy=class Xy extends qe{constructor(t={}){super(),this.options=t,this.uid=gt("textureSource"),this._resourceType="textureSource",this._resourceId=gt("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...Xy.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new _a($y(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){var s,i;this.style!==t&&((s=this._style)==null||s.off("change",this._onStyleChange,this),this._style=t,(i=this._style)==null||i.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(t){this._style.maxAnisotropy=t}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=gt("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,s,i){i||(i=this._resolution),t||(t=this.width),s||(s=this.height);const n=Math.round(t*i),r=Math.round(s*i);return this.width=n/i,this.height=r/i,this._resolution=i,this.pixelWidth===n&&this.pixelHeight===r?!1:(this._refreshPOT(),this.pixelWidth=n,this.pixelHeight=r,this.emit("resize",this),this._resourceId=gt("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Kf(this.pixelWidth)&&Kf(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};Yy.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Fe=Yy;class jc extends Fe{constructor(t){const s=t.resource||new Float32Array(t.width*t.height*4);let i=t.format;i||(s instanceof Float32Array?i="rgba32float":s instanceof Int32Array||s instanceof Uint32Array?i="rgba32uint":s instanceof Int16Array||s instanceof Uint16Array?i="rgba16uint":(s instanceof Int8Array,i="bgra8unorm")),super({...t,resource:s,format:i}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}jc.extension=q.TextureSource;const Qf=new W;class qS{constructor(t,s){this.mapCoord=new W,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof s>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=s,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){var s;this.texture!==t&&((s=this._texture)==null||s.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,s){s===void 0&&(s=t);const i=this.mapCoord;for(let n=0;n<t.length;n+=2){const r=t[n],o=t[n+1];s[n]=r*i.a+o*i.c+i.tx,s[n+1]=r*i.b+o*i.d+i.ty}return s}update(){const t=this._texture;this._updateID++;const s=t.uvs;this.mapCoord.set(s.x1-s.x0,s.y1-s.y0,s.x3-s.x0,s.y3-s.y0,s.x0,s.y0);const i=t.orig,n=t.trim;n&&(Qf.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(Qf));const r=t.source,o=this.uClampFrame,a=this.clampMargin/r._resolution,l=this.clampOffset/r._resolution;return o[0]=(t.frame.x+a+l)/r.width,o[1]=(t.frame.y+a+l)/r.height,o[2]=(t.frame.x+t.frame.width-a+l)/r.width,o[3]=(t.frame.y+t.frame.height-a+l)/r.height,this.uClampOffset[0]=this.clampOffset/r.pixelWidth,this.uClampOffset[1]=this.clampOffset/r.pixelHeight,this.isSimple=t.frame.width===r.width&&t.frame.height===r.height&&t.rotate===0,!0}}class Q extends qe{constructor({source:t,label:s,frame:i,orig:n,trim:r,defaultAnchor:o,defaultBorders:a,rotate:l,dynamic:h}={}){if(super(),this.uid=gt("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new vt,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=s,this.source=(t==null?void 0:t.source)??new Fe,this.noFrame=!i,i)this.frame.copyFrom(i);else{const{width:u,height:c}=this._source;this.frame.width=u,this.frame.height=c}this.orig=n||this.frame,this.trim=r,this.rotate=l??0,this.defaultAnchor=o,this.defaultBorders=a,this.destroyed=!1,this.dynamic=h||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new qS(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:s}=this,{width:i,height:n}=this._source,r=s.x/i,o=s.y/n,a=s.width/i,l=s.height/n;let h=this.rotate;if(h){const u=a/2,c=l/2,d=r+u,f=o+c;h=J.add(h,J.NW),t.x0=d+u*J.uX(h),t.y0=f+c*J.uY(h),h=J.add(h,2),t.x1=d+u*J.uX(h),t.y1=f+c*J.uY(h),h=J.add(h,2),t.x2=d+u*J.uX(h),t.y2=f+c*J.uY(h),h=J.add(h,2),t.x3=d+u*J.uX(h),t.y3=f+c*J.uY(h)}else t.x0=r,t.y0=o,t.x1=r+a,t.y1=o,t.x2=r+a,t.y2=o+l,t.x3=r,t.y3=o+l}destroy(t=!1){this._source&&(this._source.off("resize",this.update,this),t&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return X(mt,"Texture.baseTexture is now Texture.source"),this._source}}Q.EMPTY=new Q({label:"EMPTY",source:new Fe({label:"EMPTY"})});Q.EMPTY.destroy=Uy;Q.WHITE=new Q({source:new jc({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Q.WHITE.destroy=Uy;function QS(e,t,s){const{width:i,height:n}=s.orig,r=s.trim;if(r){const o=r.width,a=r.height;e.minX=r.x-t._x*i,e.maxX=e.minX+o,e.minY=r.y-t._y*n,e.maxY=e.minY+a}else e.minX=-t._x*i,e.maxX=e.minX+i,e.minY=-t._y*n,e.maxY=e.minY+n}const Zf=new W;class Ie{constructor(t=1/0,s=1/0,i=-1/0,n=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Zf,this.minX=t,this.minY=s,this.maxX=i,this.maxY=n}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new vt);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Zf,this}set(t,s,i,n){this.minX=t,this.minY=s,this.maxX=i,this.maxY=n}addFrame(t,s,i,n,r){r||(r=this.matrix);const o=r.a,a=r.b,l=r.c,h=r.d,u=r.tx,c=r.ty;let d=this.minX,f=this.minY,g=this.maxX,m=this.maxY,x=o*t+l*s+u,p=a*t+h*s+c;x<d&&(d=x),p<f&&(f=p),x>g&&(g=x),p>m&&(m=p),x=o*i+l*s+u,p=a*i+h*s+c,x<d&&(d=x),p<f&&(f=p),x>g&&(g=x),p>m&&(m=p),x=o*t+l*n+u,p=a*t+h*n+c,x<d&&(d=x),p<f&&(f=p),x>g&&(g=x),p>m&&(m=p),x=o*i+l*n+u,p=a*i+h*n+c,x<d&&(d=x),p<f&&(f=p),x>g&&(g=x),p>m&&(m=p),this.minX=d,this.minY=f,this.maxX=g,this.maxY=m}addRect(t,s){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,s)}addBounds(t,s){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,s)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const s=this.minX,i=this.minY,n=this.maxX,r=this.maxY,{a:o,b:a,c:l,d:h,tx:u,ty:c}=t;let d=o*s+l*i+u,f=a*s+h*i+c;this.minX=d,this.minY=f,this.maxX=d,this.maxY=f,d=o*n+l*i+u,f=a*n+h*i+c,this.minX=d<this.minX?d:this.minX,this.minY=f<this.minY?f:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=f>this.maxY?f:this.maxY,d=o*s+l*r+u,f=a*s+h*r+c,this.minX=d<this.minX?d:this.minX,this.minY=f<this.minY?f:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=f>this.maxY?f:this.maxY,d=o*n+l*r+u,f=a*n+h*r+c,this.minX=d<this.minX?d:this.minX,this.minY=f<this.minY?f:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=f>this.maxY?f:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,s,i,n){return this.minX<t&&(this.minX=t),this.maxX>s&&(this.maxX=s),this.minY<i&&(this.minY=i),this.maxY>n&&(this.maxY=n),this}pad(t,s=t){return this.minX-=t,this.maxX+=t,this.minY-=s,this.maxY+=s,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Ie(this.minX,this.minY,this.maxX,this.maxY)}scale(t,s=t){return this.minX*=t,this.minY*=s,this.maxX*=t,this.maxY*=s,this}get x(){return this.minX}set x(t){const s=this.maxX-this.minX;this.minX=t,this.maxX=t+s}get y(){return this.minY}set y(t){const s=this.maxY-this.minY;this.minY=t,this.maxY=t+s}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,s,i,n){let r=this.minX,o=this.minY,a=this.maxX,l=this.maxY;n||(n=this.matrix);const h=n.a,u=n.b,c=n.c,d=n.d,f=n.tx,g=n.ty;for(let m=s;m<i;m+=2){const x=t[m],p=t[m+1],y=h*x+c*p+f,v=u*x+d*p+g;r=y<r?y:r,o=v<o?v:o,a=y>a?y:a,l=v>l?v:l}this.minX=r,this.minY=o,this.maxX=a,this.maxY=l}containsPoint(t,s){return this.minX<=t&&this.minY<=s&&this.maxX>=t&&this.maxY>=s}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(t){return this.minX=t.minX,this.minY=t.minY,this.maxX=t.maxX,this.maxY=t.maxY,this}}var ZS={grad:.9,turn:360,rad:360/(2*Math.PI)},Qe=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},Pt=function(e,t,s){return t===void 0&&(t=0),s===void 0&&(s=Math.pow(10,t)),Math.round(s*e)/s+0},ge=function(e,t,s){return t===void 0&&(t=0),s===void 0&&(s=1),e>s?s:e>t?e:t},Ky=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},Jf=function(e){return{r:ge(e.r,0,255),g:ge(e.g,0,255),b:ge(e.b,0,255),a:ge(e.a)}},Fl=function(e){return{r:Pt(e.r),g:Pt(e.g),b:Pt(e.b),a:Pt(e.a,3)}},JS=/^#([0-9a-f]{3,8})$/i,yo=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},qy=function(e){var t=e.r,s=e.g,i=e.b,n=e.a,r=Math.max(t,s,i),o=r-Math.min(t,s,i),a=o?r===t?(s-i)/o:r===s?2+(i-t)/o:4+(t-s)/o:0;return{h:60*(a<0?a+6:a),s:r?o/r*100:0,v:r/255*100,a:n}},Qy=function(e){var t=e.h,s=e.s,i=e.v,n=e.a;t=t/360*6,s/=100,i/=100;var r=Math.floor(t),o=i*(1-s),a=i*(1-(t-r)*s),l=i*(1-(1-t+r)*s),h=r%6;return{r:255*[i,a,o,o,l,i][h],g:255*[l,i,i,a,o,o][h],b:255*[o,o,l,i,i,a][h],a:n}},tp=function(e){return{h:Ky(e.h),s:ge(e.s,0,100),l:ge(e.l,0,100),a:ge(e.a)}},ep=function(e){return{h:Pt(e.h),s:Pt(e.s),l:Pt(e.l),a:Pt(e.a,3)}},sp=function(e){return Qy((s=(t=e).s,{h:t.h,s:(s*=((i=t.l)<50?i:100-i)/100)>0?2*s/(i+s)*100:0,v:i+s,a:t.a}));var t,s,i},tr=function(e){return{h:(t=qy(e)).h,s:(n=(200-(s=t.s))*(i=t.v)/100)>0&&n<200?s*i/100/(n<=100?n:200-n)*100:0,l:n/2,a:t.a};var t,s,i,n},t2=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,e2=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,s2=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,i2=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,uu={string:[[function(e){var t=JS.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?Pt(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?Pt(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=s2.exec(e)||i2.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:Jf({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=t2.exec(e)||e2.exec(e);if(!t)return null;var s,i,n=tp({h:(s=t[1],i=t[2],i===void 0&&(i="deg"),Number(s)*(ZS[i]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return sp(n)},"hsl"]],object:[[function(e){var t=e.r,s=e.g,i=e.b,n=e.a,r=n===void 0?1:n;return Qe(t)&&Qe(s)&&Qe(i)?Jf({r:Number(t),g:Number(s),b:Number(i),a:Number(r)}):null},"rgb"],[function(e){var t=e.h,s=e.s,i=e.l,n=e.a,r=n===void 0?1:n;if(!Qe(t)||!Qe(s)||!Qe(i))return null;var o=tp({h:Number(t),s:Number(s),l:Number(i),a:Number(r)});return sp(o)},"hsl"],[function(e){var t=e.h,s=e.s,i=e.v,n=e.a,r=n===void 0?1:n;if(!Qe(t)||!Qe(s)||!Qe(i))return null;var o=function(a){return{h:Ky(a.h),s:ge(a.s,0,100),v:ge(a.v,0,100),a:ge(a.a)}}({h:Number(t),s:Number(s),v:Number(i),a:Number(r)});return Qy(o)},"hsv"]]},ip=function(e,t){for(var s=0;s<t.length;s++){var i=t[s][0](e);if(i)return[i,t[s][1]]}return[null,void 0]},n2=function(e){return typeof e=="string"?ip(e.trim(),uu.string):typeof e=="object"&&e!==null?ip(e,uu.object):[null,void 0]},jl=function(e,t){var s=tr(e);return{h:s.h,s:ge(s.s+100*t,0,100),l:s.l,a:s.a}},Bl=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},np=function(e,t){var s=tr(e);return{h:s.h,s:s.s,l:ge(s.l+100*t,0,100),a:s.a}},cu=function(){function e(t){this.parsed=n2(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return Pt(Bl(this.rgba),2)},e.prototype.isDark=function(){return Bl(this.rgba)<.5},e.prototype.isLight=function(){return Bl(this.rgba)>=.5},e.prototype.toHex=function(){return t=Fl(this.rgba),s=t.r,i=t.g,n=t.b,o=(r=t.a)<1?yo(Pt(255*r)):"","#"+yo(s)+yo(i)+yo(n)+o;var t,s,i,n,r,o},e.prototype.toRgb=function(){return Fl(this.rgba)},e.prototype.toRgbString=function(){return t=Fl(this.rgba),s=t.r,i=t.g,n=t.b,(r=t.a)<1?"rgba("+s+", "+i+", "+n+", "+r+")":"rgb("+s+", "+i+", "+n+")";var t,s,i,n,r},e.prototype.toHsl=function(){return ep(tr(this.rgba))},e.prototype.toHslString=function(){return t=ep(tr(this.rgba)),s=t.h,i=t.s,n=t.l,(r=t.a)<1?"hsla("+s+", "+i+"%, "+n+"%, "+r+")":"hsl("+s+", "+i+"%, "+n+"%)";var t,s,i,n,r},e.prototype.toHsv=function(){return t=qy(this.rgba),{h:Pt(t.h),s:Pt(t.s),v:Pt(t.v),a:Pt(t.a,3)};var t},e.prototype.invert=function(){return ze({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),ze(jl(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),ze(jl(this.rgba,-t))},e.prototype.grayscale=function(){return ze(jl(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),ze(np(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),ze(np(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?ze({r:(s=this.rgba).r,g:s.g,b:s.b,a:t}):Pt(this.rgba.a,3);var s},e.prototype.hue=function(t){var s=tr(this.rgba);return typeof t=="number"?ze({h:t,s:s.s,l:s.l,a:s.a}):Pt(s.h)},e.prototype.isEqual=function(t){return this.toHex()===ze(t).toHex()},e}(),ze=function(e){return e instanceof cu?e:new cu(e)},rp=[],r2=function(e){e.forEach(function(t){rp.indexOf(t)<0&&(t(cu,uu),rp.push(t))})};function o2(e,t){var s={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var n in s)i[s[n]]=n;var r={};e.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,h=i[this.toHex()];if(h)return h;if(o!=null&&o.closest){var u=this.toRgb(),c=1/0,d="black";if(!r.length)for(var f in s)r[f]=new e(s[f]).toRgb();for(var g in s){var m=(a=u,l=r[g],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));m<c&&(c=m,d=g)}return d}},t.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":s[a];return l?new e(l).toRgb():null},"name"])}r2([o2]);const ln=class Bn{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof Bn)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._value=this._cloneSource(t),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,s){const i=typeof t;if(i!==typeof s)return!1;if(i==="number"||i==="string"||t instanceof Number)return t===s;if(Array.isArray(t)&&Array.isArray(s)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(s))return t.length!==s.length?!1:t.every((r,o)=>r===s[o]);if(t!==null&&s!==null){const r=Object.keys(t),o=Object.keys(s);return r.length!==o.length?!1:r.every(a=>t[a]===s[a])}return t===s}toRgba(){const[t,s,i,n]=this._components;return{r:t,g:s,b:i,a:n}}toRgb(){const[t,s,i]=this._components;return{r:t,g:s,b:i}}toRgbaString(){const[t,s,i]=this.toUint8RgbArray();return`rgba(${t},${s},${i},${this.alpha})`}toUint8RgbArray(t){const[s,i,n]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb),t[0]=Math.round(s*255),t[1]=Math.round(i*255),t[2]=Math.round(n*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t||(t=this._arrayRgba);const[s,i,n,r]=this._components;return t[0]=s,t[1]=i,t[2]=n,t[3]=r,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb);const[s,i,n]=this._components;return t[0]=s,t[1]=i,t[2]=n,t}toNumber(){return this._int}toBgrNumber(){const[t,s,i]=this.toUint8RgbArray();return(i<<16)+(s<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[s,i,n,r]=Bn._temp.setValue(t)._components;return this._components[0]*=s,this._components[1]*=i,this._components[2]*=n,this._components[3]*=r,this._refreshInt(),this._value=null,this}premultiply(t,s=!0){return s&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,s=!0){if(t===1)return(255<<24)+this._int;if(t===0)return s?0:this._int;let i=this._int>>16&255,n=this._int>>8&255,r=this._int&255;return s&&(i=i*t+.5|0,n=n*t+.5|0,r=r*t+.5|0),(t*255<<24)+(i<<16)+(n<<8)+r}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const s=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-s.length)+s}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let s,i,n,r;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const o=t;s=(o>>16&255)/255,i=(o>>8&255)/255,n=(o&255)/255,r=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[s,i,n,r=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[s,i,n,r=255]=t,s/=255,i/=255,n/=255,r/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const a=Bn.HEX_PATTERN.exec(t);a&&(t=`#${a[2]}`)}const o=ze(t);o.isValid()&&({r:s,g:i,b:n,a:r}=o.rgba,s/=255,i/=255,n/=255)}if(s!==void 0)this._components[0]=s,this._components[1]=i,this._components[2]=n,this._components[3]=r,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);const[t,s,i]=this._components;this._int=(t*255<<16)+(s*255<<8)+(i*255|0)}_clamp(t,s=0,i=1){return typeof t=="number"?Math.min(Math.max(t,s),i):(t.forEach((n,r)=>{t[r]=Math.min(Math.max(n,s),i)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof Bn||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};ln.shared=new ln;ln._temp=new ln;ln.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let kt=ln;const a2={cullArea:null,cullable:!1,cullableChildren:!0};let Vl=0;const op=500;function Wt(...e){Vl!==op&&(Vl++,Vl===op?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...e))}const Ur={_registeredResources:new Set,register(e){this._registeredResources.add(e)},unregister(e){this._registeredResources.delete(e)},release(){this._registeredResources.forEach(e=>e.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(e){return this._registeredResources.has(e)},reset(){this._registeredResources.clear()}};class l2{constructor(t,s){this._pool=[],this._count=0,this._index=0,this._classType=t,s&&this.prepopulate(s)}prepopulate(t){for(let s=0;s<t;s++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){var i;let s;return this._index>0?s=this._pool[--this._index]:(s=new this._classType,this._count++),(i=s.init)==null||i.call(s,t),s}return(t){var s;(s=t.reset)==null||s.call(t),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let t=0;t<this._index;t++)this._pool[t].destroy();this._pool.length=0,this._count=0,this._index=0}}class h2{constructor(){this._poolsByClass=new Map}prepopulate(t,s){this.getPool(t).prepopulate(s)}get(t,s){return this.getPool(t).get(s)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new l2(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(s=>{const i=t[s._classType.name]?s._classType.name+s._classType.ID:s._classType.name;t[i]={free:s.totalFree,used:s.totalUsed,size:s.totalSize}}),t}clear(){this._poolsByClass.forEach(t=>t.clear()),this._poolsByClass.clear()}}const xe=new h2;Ur.register(xe);const u2={get isCachedAsTexture(){var e;return!!((e=this.renderGroup)!=null&&e.isCachedAsTexture)},cacheAsTexture(e){typeof e=="boolean"&&e===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(e===!0?{}:e))},updateCacheTexture(){var e;(e=this.renderGroup)==null||e.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(e){X("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(e)}};function c2(e,t,s){const i=e.length;let n;if(t>=i||s===0)return;s=t+s>i?i-t:s;const r=i-s;for(n=t;n<r;++n)e[n]=e[n+s];e.length=r}const d2={allowChildren:!0,removeChildren(e=0,t){var r;const s=t??this.children.length,i=s-e,n=[];if(i>0&&i<=s){for(let a=s-1;a>=e;a--){const l=this.children[a];l&&(n.push(l),l.parent=null)}c2(this.children,e,s);const o=this.renderGroup||this.parentRenderGroup;o&&o.removeChildren(n);for(let a=0;a<n.length;++a){const l=n[a];(r=l.parentRenderLayer)==null||r.detach(l),this.emit("childRemoved",l,this,a),n[a].emit("removed",this)}return n.length>0&&this._didViewChangeTick++,n}else if(i===0&&this.children.length===0)return n;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(e){const t=this.getChildAt(e);return this.removeChild(t)},getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]},setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(e),this.addChildAt(e,t)},getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(e,t){this.allowChildren||X(mt,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:s}=this;if(t<0||t>s.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${s.length}`);if(e.parent){const n=e.parent.children.indexOf(e);if(e.parent===this&&n===t)return e;n!==-1&&e.parent.children.splice(n,1)}t===s.length?s.push(e):s.splice(t,0,e),e.parent=this,e.didChange=!0,e._updateFlags=15;const i=this.renderGroup||this.parentRenderGroup;return i&&i.addChild(e),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",e,this,t),e.emit("added",this),e},swapChildren(e,t){if(e===t)return;const s=this.getChildIndex(e),i=this.getChildIndex(t);this.children[s]=t,this.children[i]=e;const n=this.renderGroup||this.parentRenderGroup;n&&(n.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)},reparentChild(...e){return e.length===1?this.reparentChildAt(e[0],this.children.length):(e.forEach(t=>this.reparentChildAt(t,this.children.length)),e[0])},reparentChildAt(e,t){if(e.parent===this)return this.setChildIndex(e,t),e;const s=e.worldTransform.clone();e.removeFromParent(),this.addChildAt(e,t);const i=this.worldTransform.clone();return i.invert(),s.prepend(i),e.setFromMatrix(s),e},replaceChild(e,t){e.updateLocalTransform(),this.addChildAt(t,this.getChildIndex(e)),t.setFromMatrix(e.localTransform),t.updateLocalTransform(),this.removeChild(e)}},f2={collectRenderables(e,t,s){this.parentRenderLayer&&this.parentRenderLayer!==s||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(e,t,s):this.renderGroup?t.renderPipes.renderGroup.addRenderGroup(this.renderGroup,e):this.collectRenderablesWithEffects(e,t,s))},collectRenderablesSimple(e,t,s){const i=this.children,n=i.length;for(let r=0;r<n;r++)i[r].collectRenderables(e,t,s)},collectRenderablesWithEffects(e,t,s){const{renderPipes:i}=t;for(let n=0;n<this.effects.length;n++){const r=this.effects[n];i[r.pipe].push(r,this,e)}this.collectRenderablesSimple(e,t,s);for(let n=this.effects.length-1;n>=0;n--){const r=this.effects[n];i[r.pipe].pop(r,this,e)}}};class ap{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}class p2{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let s=0;s<this._tests.length;s++){const i=this._tests[s];if(i.test(t))return xe.get(i.maskClass,t)}return t}returnMaskEffect(t){xe.return(t)}}const du=new p2;_e.handleByList(q.MaskEffect,du._effectClasses);const m2={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const e=this.renderGroup||this.parentRenderGroup;e&&(e.structureDidChange=!0)},addEffect(e){this.effects.indexOf(e)===-1&&(this.effects.push(e),this.effects.sort((s,i)=>s.priority-i.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(e){const t=this.effects.indexOf(e);t!==-1&&(this.effects.splice(t,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(e){const t=this._maskEffect;(t==null?void 0:t.mask)!==e&&(t&&(this.removeEffect(t),du.returnMaskEffect(t),this._maskEffect=null),e!=null&&(this._maskEffect=du.getMaskEffect(e),this.addEffect(this._maskEffect)))},get mask(){var e;return(e=this._maskEffect)==null?void 0:e.mask},setMask(e){this._maskOptions={...this._maskOptions,...e},e.mask&&(this.mask=e.mask),this._markStructureAsChanged()},set filters(e){var r;!Array.isArray(e)&&e&&(e=[e]);const t=this._filterEffect||(this._filterEffect=new ap);e=e;const s=(e==null?void 0:e.length)>0,i=((r=t.filters)==null?void 0:r.length)>0,n=s!==i;e=Array.isArray(e)?e.slice(0):e,t.filters=Object.freeze(e),n&&(s?this.addEffect(t):(this.removeEffect(t),t.filters=e??null))},get filters(){var e;return(e=this._filterEffect)==null?void 0:e.filters},set filterArea(e){this._filterEffect||(this._filterEffect=new ap),this._filterEffect.filterArea=e},get filterArea(){var e;return(e=this._filterEffect)==null?void 0:e.filterArea}},g2={label:null,get name(){return X(mt,"Container.name property has been removed, use Container.label instead"),this.label},set name(e){X(mt,"Container.name property has been removed, use Container.label instead"),this.label=e},getChildByName(e,t=!1){return this.getChildByLabel(e,t)},getChildByLabel(e,t=!1){const s=this.children;for(let i=0;i<s.length;i++){const n=s[i];if(n.label===e||e instanceof RegExp&&e.test(n.label))return n}if(t)for(let i=0;i<s.length;i++){const r=s[i].getChildByLabel(e,!0);if(r)return r}return null},getChildrenByLabel(e,t=!1,s=[]){const i=this.children;for(let n=0;n<i.length;n++){const r=i[n];(r.label===e||e instanceof RegExp&&e.test(r.label))&&s.push(r)}if(t)for(let n=0;n<i.length;n++)i[n].getChildrenByLabel(e,!0,s);return s}},Ut=xe.getPool(W),ns=xe.getPool(Ie),y2=new W,x2={getFastGlobalBounds(e,t){t||(t=new Ie),t.clear(),this._getGlobalBoundsRecursive(!!e,t,this.parentRenderLayer),t.isValid||t.set(0,0,0,0);const s=this.renderGroup||this.parentRenderGroup;return t.applyMatrix(s.worldTransform),t},_getGlobalBoundsRecursive(e,t,s){let i=t;if(e&&this.parentRenderLayer&&this.parentRenderLayer!==s||this.localDisplayStatus!==7||!this.measurable)return;const n=!!this.effects.length;if((this.renderGroup||n)&&(i=ns.get().clear()),this.boundsArea)t.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const o=this.bounds;i.addFrame(o.minX,o.minY,o.maxX,o.maxY,this.groupTransform)}const r=this.children;for(let o=0;o<r.length;o++)r[o]._getGlobalBoundsRecursive(e,i,s)}if(n){let r=!1;const o=this.renderGroup||this.parentRenderGroup;for(let a=0;a<this.effects.length;a++)this.effects[a].addBounds&&(r||(r=!0,i.applyMatrix(o.worldTransform)),this.effects[a].addBounds(i,!0));r&&i.applyMatrix(o.worldTransform.copyTo(y2).invert()),t.addBounds(i),ns.return(i)}else this.renderGroup&&(t.addBounds(i,this.relativeGroupTransform),ns.return(i))}};function Zy(e,t,s){s.clear();let i,n;return e.parent?t?i=e.parent.worldTransform:(n=Ut.get().identity(),i=Bc(e,n)):i=W.IDENTITY,Jy(e,s,i,t),n&&Ut.return(n),s.isValid||s.set(0,0,0,0),s}function Jy(e,t,s,i){var a,l;if(!e.visible||!e.measurable)return;let n;i?n=e.worldTransform:(e.updateLocalTransform(),n=Ut.get(),n.appendFrom(e.localTransform,s));const r=t,o=!!e.effects.length;if(o&&(t=ns.get().clear()),e.boundsArea)t.addRect(e.boundsArea,n);else{const h=e.bounds;h&&!h.isEmpty()&&(t.matrix=n,t.addBounds(h));for(let u=0;u<e.children.length;u++)Jy(e.children[u],t,n,i)}if(o){for(let h=0;h<e.effects.length;h++)(l=(a=e.effects[h]).addBounds)==null||l.call(a,t);r.addBounds(t,W.IDENTITY),ns.return(t)}i||Ut.return(n)}function Bc(e,t){const s=e.parent;return s&&(Bc(s,t),s.updateLocalTransform(),t.append(s.localTransform)),t}function tx(e,t){if(e===16777215||!t)return t;if(t===16777215||!e)return e;const s=e>>16&255,i=e>>8&255,n=e&255,r=t>>16&255,o=t>>8&255,a=t&255,l=s*r/255|0,h=i*o/255|0,u=n*a/255|0;return(l<<16)+(h<<8)+u}const lp=16777215;function hp(e,t){return e===lp?t:t===lp?e:tx(e,t)}function Wo(e){return((e&255)<<16)+(e&65280)+(e>>16&255)}const v2={getGlobalAlpha(e){if(e)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let t=this.alpha,s=this.parent;for(;s;)t*=s.alpha,s=s.parent;return t},getGlobalTransform(e=new W,t){if(t)return e.copyFrom(this.worldTransform);this.updateLocalTransform();const s=Bc(this,Ut.get().identity());return e.appendFrom(this.localTransform,s),Ut.return(s),e},getGlobalTint(e){if(e)return this.renderGroup?Wo(this.renderGroup.worldColor):this.parentRenderGroup?Wo(hp(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let t=this.localColor,s=this.parent;for(;s;)t=hp(t,s.localColor),s=s.parent;return Wo(t)}};function ex(e,t,s){return t.clear(),s||(s=W.IDENTITY),sx(e,t,s,e,!0),t.isValid||t.set(0,0,0,0),t}function sx(e,t,s,i,n){var l,h;let r;if(n)r=Ut.get(),r=s.copyTo(r);else{if(!e.visible||!e.measurable)return;e.updateLocalTransform();const u=e.localTransform;r=Ut.get(),r.appendFrom(u,s)}const o=t,a=!!e.effects.length;if(a&&(t=ns.get().clear()),e.boundsArea)t.addRect(e.boundsArea,r);else{e.renderPipeId&&(t.matrix=r,t.addBounds(e.bounds));const u=e.children;for(let c=0;c<u.length;c++)sx(u[c],t,r,i,!1)}if(a){for(let u=0;u<e.effects.length;u++)(h=(l=e.effects[u]).addLocalBounds)==null||h.call(l,t,i);o.addBounds(t,W.IDENTITY),ns.return(t)}Ut.return(r)}function ix(e,t){const s=e.children;for(let i=0;i<s.length;i++){const n=s[i],r=n.uid,o=(n._didViewChangeTick&65535)<<16|n._didContainerChangeTick&65535,a=t.index;(t.data[a]!==r||t.data[a+1]!==o)&&(t.data[t.index]=r,t.data[t.index+1]=o,t.didChange=!0),t.index=a+2,n.children.length&&ix(n,t)}return t.didChange}const w2=new W,_2={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(e,t){const s=Math.sign(this.scale.x)||1;t!==0?this.scale.x=e/t*s:this.scale.x=s},_setHeight(e,t){const s=Math.sign(this.scale.y)||1;t!==0?this.scale.y=e/t*s:this.scale.y=s},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Ie});const e=this._localBoundsCacheData;return e.index=1,e.didChange=!1,e.data[0]!==this._didViewChangeTick&&(e.didChange=!0,e.data[0]=this._didViewChangeTick),ix(this,e),e.didChange&&ex(this,e.localBounds,w2),e.localBounds},getBounds(e,t){return Zy(this,e,t||new Ie)}},S2={_onRender:null,set onRender(e){const t=this.renderGroup||this.parentRenderGroup;if(!e){this._onRender&&(t==null||t.removeOnRender(this)),this._onRender=null;return}this._onRender||t==null||t.addOnRender(this),this._onRender=e},get onRender(){return this._onRender}},b2={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(C2))}};function C2(e,t){return e._zIndex-t._zIndex}const k2={getGlobalPosition(e=new Vt,t=!1){return this.parent?this.parent.toGlobal(this._position,e,t):(e.x=this._position.x,e.y=this._position.y),e},toGlobal(e,t,s=!1){const i=this.getGlobalTransform(Ut.get(),s);return t=i.apply(e,t),Ut.return(i),t},toLocal(e,t,s,i){t&&(e=t.toGlobal(e,s,i));const n=this.getGlobalTransform(Ut.get(),i);return s=n.applyInverse(e,s),Ut.return(n),s}};class nx{constructor(){this.uid=gt("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let T2=0;class P2{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this.textureStyle=new _a(this.textureOptions)}createTexture(t,s,i){const n=new Fe({...this.textureOptions,width:t,height:s,resolution:1,antialias:i,autoGarbageCollect:!1});return new Q({source:n,label:`texturePool_${T2++}`})}getOptimalTexture(t,s,i=1,n){let r=Math.ceil(t*i-1e-6),o=Math.ceil(s*i-1e-6);r=an(r),o=an(o);const a=(r<<17)+(o<<1)+(n?1:0);this._texturePool[a]||(this._texturePool[a]=[]);let l=this._texturePool[a].pop();return l||(l=this.createTexture(r,o,n)),l.source._resolution=i,l.source.width=r/i,l.source.height=o/i,l.source.pixelWidth=r,l.source.pixelHeight=o,l.frame.x=0,l.frame.y=0,l.frame.width=t,l.frame.height=s,l.updateUvs(),this._poolKeyHash[l.uid]=a,l}getSameSizeTexture(t,s=!1){const i=t.source;return this.getOptimalTexture(t.width,t.height,i._resolution,s)}returnTexture(t,s=!1){const i=this._poolKeyHash[t.uid];s&&(t.source.style=this.textureStyle),this._texturePool[i].push(t)}clear(t){if(t=t!==!1,t)for(const s in this._texturePool){const i=this._texturePool[s];if(i)for(let n=0;n<i.length;n++)i[n].destroy(!0)}this._texturePool={}}}const rx=new P2;Ur.register(rx);class M2{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new W,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new nx,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const s=t.children;for(let i=0;i<s.length;i++){const n=s[i];n._updateFlags=15,this.addChild(n)}}enableCacheAsTexture(t={}){this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(rx.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const t=this._parentCacheAsTextureRenderGroup;t&&!t.textureNeedsUpdate&&t.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const s=this.childrenToUpdate[t];s.list.fill(null),s.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const s=this.renderGroupChildren.indexOf(t);s>-1&&this.renderGroupChildren.splice(s,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);const s=t.children;for(let i=0;i<s.length;i++)this.addChild(s[i])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}const s=t.children;for(let i=0;i<s.length;i++)this.removeChild(s[i])}removeChildren(t){for(let s=0;s<t.length;s++)this.removeChild(t[s])}onChildUpdate(t){let s=this.childrenToUpdate[t.relativeRenderGroupDepth];s||(s=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),s.list[s.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(t){for(let s=0;s<this._onRenderContainers.length;s++)this._onRenderContainers[s]._onRender(t)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){const s=this.root.children;for(let i=0;i<s.length;i++)this._getChildren(s[i],t);return t}_getChildren(t,s=[]){if(s.push(t),t.renderGroup)return s;const i=t.children;for(let n=0;n<i.length;n++)this._getChildren(i[n],s);return s}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return this._matrixDirty&1?(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new W),this._inverseWorldTransform.copyFrom(this.worldTransform).invert()):this._inverseWorldTransform}get textureOffsetInverseTransform(){return this._matrixDirty&2?(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new W),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y)):this._textureOffsetInverseTransform}get inverseParentTextureTransform(){if(!(this._matrixDirty&4))return this._inverseParentTextureTransform;this._matrixDirty&=-5;const t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new W),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function A2(e,t,s={}){for(const i in t)!s[i]&&t[i]!==void 0&&(e[i]=t[i])}const Ol=new Nt(null),xo=new Nt(null),zl=new Nt(null,1,1),vo=new Nt(null),up=1,E2=2,Gl=4;class tt extends qe{constructor(t={}){var s,i;super(),this.uid=gt("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new W,this.relativeGroupTransform=new W,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Nt(this,0,0),this._scale=zl,this._pivot=xo,this._origin=vo,this._skew=Ol,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],A2(this,t,{children:!0,parent:!0,effects:!0}),(s=t.children)==null||s.forEach(n=>this.addChild(n)),(i=t.parent)==null||i.addChild(this)}static mixin(t){X("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),_e.mixin(tt,t)}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=t&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...t){if(this.allowChildren||X(mt,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let n=0;n<t.length;n++)this.addChild(t[n]);return t[0]}const s=t[0],i=this.renderGroup||this.parentRenderGroup;return s.parent===this?(this.children.splice(this.children.indexOf(s),1),this.children.push(s),i&&(i.structureDidChange=!0),s):(s.parent&&s.parent.removeChild(s),this.children.push(s),this.sortableChildren&&(this.sortDirty=!0),s.parent=this,s.didChange=!0,s._updateFlags=15,i&&i.addChild(s),this.emit("childAdded",s,this,this.children.length-1),s.emit("added",this),this._didViewChangeTick++,s._zIndex!==0&&s.depthOfChildModified(),s)}removeChild(...t){if(t.length>1){for(let n=0;n<t.length;n++)this.removeChild(t[n]);return t[0]}const s=t[0],i=this.children.indexOf(s);return i>-1&&(this._didViewChangeTick++,this.children.splice(i,1),this.renderGroup?this.renderGroup.removeChild(s):this.parentRenderGroup&&this.parentRenderGroup.removeChild(s),s.parentRenderLayer&&s.parentRenderLayer.detach(s),s.parent=null,this.emit("childRemoved",s,this,i),s.emit("removed",this)),s}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),this.renderGroup=xe.get(M2,this),this.groupTransform=W.IDENTITY,t==null||t.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),xe.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t==null||t.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new W),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*US}set angle(t){this.rotation=t*$S}get pivot(){return this._pivot===xo&&(this._pivot=new Nt(this,0,0)),this._pivot}set pivot(t){this._pivot===xo&&(this._pivot=new Nt(this,0,0),this._origin!==vo&&Wt("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===Ol&&(this._skew=new Nt(this,0,0)),this._skew}set skew(t){this._skew===Ol&&(this._skew=new Nt(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===zl&&(this._scale=new Nt(this,1,1)),this._scale}set scale(t){this._scale===zl&&(this._scale=new Nt(this,0,0)),typeof t=="string"&&(t=parseFloat(t)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get origin(){return this._origin===vo&&(this._origin=new Nt(this,0,0)),this._origin}set origin(t){this._origin===vo&&(this._origin=new Nt(this,0,0),this._pivot!==xo&&Wt("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof t=="number"?this._origin.set(t):this._origin.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const s=this.getLocalBounds().width;this._setWidth(t,s)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const s=this.getLocalBounds().height;this._setHeight(t,s)}getSize(t){t||(t={});const s=this.getLocalBounds();return t.width=Math.abs(this.scale.x*s.width),t.height=Math.abs(this.scale.y*s.height),t}setSize(t,s){const i=this.getLocalBounds();typeof t=="object"?(s=t.height??t.width,t=t.width):s??(s=t),t!==void 0&&this._setWidth(t,i.width),s!==void 0&&this._setHeight(s,i.height)}_updateSkew(){const t=this._rotation,s=this._skew;this._cx=Math.cos(t+s._y),this._sx=Math.sin(t+s._y),this._cy=-Math.sin(t-s._x),this._sy=Math.cos(t-s._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this.origin.set(typeof t.originX=="number"?t.originX:this.origin.x,typeof t.originY=="number"?t.originY:this.origin.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const s=this.localTransform,i=this._scale,n=this._pivot,r=this._origin,o=this._position,a=i._x,l=i._y,h=n._x,u=n._y,c=-r._x,d=-r._y;s.a=this._cx*a,s.b=this._sx*a,s.c=this._cy*l,s.d=this._sy*l,s.tx=o._x-(h*s.a+u*s.c)+(c*s.a+d*s.c)-c,s.ty=o._y-(h*s.b+u*s.d)+(c*s.b+d*s.d)-d}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=up,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const i=kt.shared.setValue(t??16777215).toBgrNumber();i!==this.localColor&&(this.localColor=i,this._updateFlags|=up,this._onUpdate())}get tint(){return Wo(this.localColor)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=E2,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){const s=t?2:0;(this.localDisplayStatus&2)!==s&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Gl,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){const s=t?0:4;(this.localDisplayStatus&4)!==s&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Gl,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){const s=t?1:0;(this.localDisplayStatus&1)!==s&&(this._updateFlags|=Gl,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){var n;if(this.destroyed)return;this.destroyed=!0;let s;if(this.children.length&&(s=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof t=="boolean"?t:t==null?void 0:t.children)&&s)for(let r=0;r<s.length;++r)s[r].destroy(t);(n=this.renderGroup)==null||n.destroy(),this.renderGroup=null}}_e.mixin(tt,d2,x2,k2,S2,_2,m2,g2,b2,a2,u2,v2,f2);class Vc extends tt{constructor(t){super(t),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new Ie(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const s=this.bounds,{x:i,y:n}=t;return i>=s.minX&&i<=s.maxX&&n>=s.minY&&n<=s.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){var s,i;super.destroy(t),this._bounds=null;for(const n in this._gpuData)(i=(s=this._gpuData[n]).destroy)==null||i.call(s);this._gpuData=null}collectRenderablesSimple(t,s,i){const{renderPipes:n}=s;n.blendMode.pushBlendMode(this,this.groupBlendMode,t),n[this.renderPipeId].addRenderable(this,t),this.didViewUpdate=!1;const o=this.children,a=o.length;for(let l=0;l<a;l++)o[l].collectRenderables(t,s,i);n.blendMode.popBlendMode(t)}}class Le extends Vc{constructor(t=Q.EMPTY){t instanceof Q&&(t={texture:t});const{texture:s=Q.EMPTY,anchor:i,roundPixels:n,width:r,height:o,...a}=t;super({label:"Sprite",...a}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Nt({_onUpdate:()=>{this.onViewUpdate()}}),i?this.anchor=i:s.defaultAnchor&&(this.anchor=s.defaultAnchor),this.texture=s,this.allowChildren=!1,this.roundPixels=n??!1,r!==void 0&&(this.width=r),o!==void 0&&(this.height=o)}static from(t,s=!1){return t instanceof Q?new Le(t):new Le(Q.from(t,s))}set texture(t){t||(t=Q.EMPTY);const s=this._texture;s!==t&&(s&&s.dynamic&&s.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return QS(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return X("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const t=this._anchor,s=this._texture,i=this._bounds,{width:n,height:r}=s.orig;i.minX=-t._x*n,i.maxX=i.minX+n,i.minY=-t._y*r,i.maxY=i.minY+r}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(i)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,s){typeof t=="object"?(s=t.height??t.width,t=t.width):s??(s=t),t!==void 0&&this._setWidth(t,this._texture.orig.width),s!==void 0&&this._setHeight(s,this._texture.orig.height)}}const R2=new Ie;function ox(e,t,s){const i=R2;e.measurable=!0,Zy(e,s,i),t.addBoundsMask(i),e.measurable=!1}function ax(e,t,s){const i=ns.get();e.measurable=!0;const n=Ut.get().identity(),r=lx(e,s,n);ex(e,i,r),e.measurable=!1,t.addBoundsMask(i),Ut.return(n),ns.return(i)}function lx(e,t,s){return e?(e!==t&&(lx(e.parent,t,s),e.updateLocalTransform(),s.append(e.localTransform)),s):(Wt("Mask bounds, renderable is not inside the root container"),s)}class hx{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof Le),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(t,s){this.inverse||ox(this.mask,t,s)}addLocalBounds(t,s){ax(this.mask,t,s)}containsPoint(t,s){const i=this.mask;return s(i,t)}destroy(){this.reset()}static test(t){return t instanceof Le}}hx.extension=q.MaskEffect;class ux{constructor(t){this.priority=0,this.pipe="colorMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}}ux.extension=q.MaskEffect;class cx{constructor(t){this.priority=0,this.pipe="stencilMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(t,s){ox(this.mask,t,s)}addLocalBounds(t,s){ax(this.mask,t,s)}containsPoint(t,s){const i=this.mask;return s(i,t)}destroy(){this.reset()}static test(t){return t instanceof tt}}cx.extension=q.MaskEffect;const N2={createCanvas:(e,t)=>{const s=document.createElement("canvas");return s.width=e,s.height=t,s},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>new DOMParser().parseFromString(e,"text/xml")};let cp=N2;const re={get(){return cp},set(e){cp=e}};class dx extends Fe{constructor(t){t.resource||(t.resource=re.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,s=this.height,i=this._resolution){const n=super.resize(t,s,i);return n&&this.resizeCanvas(),n}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}dx.extension=q.TextureSource;class Sa extends Fe{constructor(t){super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}Sa.extension=q.TextureSource;var fu=(e=>(e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e))(fu||{});class Ul{constructor(t,s=null,i=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=s,this.priority=i,this._once=n}match(t,s=null){return this._fn===t&&this._context===s}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const s=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),s}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const s=this.next;return this.next=t?null:s,this.previous=null,s}}const fx=class ee{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Ul(null,null,1/0),this.deltaMS=1/ee.targetFPMS,this.elapsedMS=1/ee.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,s,i=fu.NORMAL){return this._addListener(new Ul(t,s,i))}addOnce(t,s,i=fu.NORMAL){return this._addListener(new Ul(t,s,i,!0))}_addListener(t){let s=this._head.next,i=this._head;if(!s)t.connect(i);else{for(;s;){if(t.priority>s.priority){t.connect(i);break}i=s,s=s.next}t.previous||t.connect(i)}return this._startIfPossible(),this}remove(t,s){let i=this._head.next;for(;i;)i.match(t,s)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,s=this._head;for(;s=s.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let s;if(t>this.lastTime){if(s=this.elapsedMS=t-this.lastTime,s>this._maxElapsedMS&&(s=this._maxElapsedMS),s*=this.speed,this._minElapsedMS){const r=t-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=t-r%this._minElapsedMS}this.deltaMS=s,this.deltaTime=this.deltaMS*ee.targetFPMS;const i=this._head;let n=i.next;for(;n;)n=n.emit(this);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const s=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,s)/1e3,ee.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const s=Math.max(this.minFPS,t);this._minElapsedMS=1/(s/1e3)}}static get shared(){if(!ee._shared){const t=ee._shared=new ee;t.autoStart=!0,t._protected=!0}return ee._shared}static get system(){if(!ee._system){const t=ee._system=new ee;t.autoStart=!0,t._protected=!0}return ee._system}};fx.targetFPMS=.06;let wo=fx,$l;async function D2(){return $l??($l=(async()=>{var o;const t=re.get().createCanvas(1,1).getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const s=await new Promise(a=>{const l=document.createElement("video");l.onloadeddata=()=>a(l),l.onerror=()=>a(null),l.autoplay=!1,l.crossOrigin="anonymous",l.preload="auto",l.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",l.load()});if(!s)return"premultiply-alpha-on-upload";const i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i);const n=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,s);const r=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,r),t.deleteFramebuffer(n),t.deleteTexture(i),(o=t.getExtension("WEBGL_lose_context"))==null||o.loseContext(),r[0]<=r[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),$l}const qa=class px extends Fe{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...px.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=wo.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,s=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(s.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await D2(),this._load=new Promise((i,n)=>{this.isValid?i(this):(this._resolve=i,this._reject=n,s.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${s.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(wo.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(wo.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(wo.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};qa.extension=q.TextureSource;qa.defaultOptions={...Fe.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};qa.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let I2=qa;const bi=(e,t,s=!1)=>(Array.isArray(e)||(e=[e]),t?e.map(i=>typeof i=="string"||s?t(i):i):e);class L2{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const s=this._cache.get(t);return s||Wt(`[Assets] Asset id ${t} was not found in the Cache`),s}set(t,s){const i=bi(t);let n;for(let l=0;l<this.parsers.length;l++){const h=this.parsers[l];if(h.test(s)){n=h.getCacheableAssets(i,s);break}}const r=new Map(Object.entries(n||{}));n||i.forEach(l=>{r.set(l,s)});const o=[...r.keys()],a={cacheKeys:o,keys:i};i.forEach(l=>{this._cacheMap.set(l,a)}),o.forEach(l=>{const h=n?n[l]:s;this._cache.has(l)&&this._cache.get(l)!==h&&Wt("[Cache] already has key:",l),this._cache.set(l,r.get(l))})}remove(t){if(!this._cacheMap.has(t)){Wt(`[Assets] Asset id ${t} was not found in the Cache`);return}const s=this._cacheMap.get(t);s.cacheKeys.forEach(n=>{this._cache.delete(n)}),s.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const Ci=new L2,pu=[];_e.handleByList(q.TextureSource,pu);function mx(e={}){const t=e&&e.resource,s=t?e.resource:e,i=t?e:{resource:e};for(let n=0;n<pu.length;n++){const r=pu[n];if(r.test(s))return new r(i)}throw new Error(`Could not find a source type for resource: ${i.resource}`)}function F2(e={},t=!1){const s=e&&e.resource,i=s?e.resource:e,n=s?e:{resource:e};if(!t&&Ci.has(i))return Ci.get(i);const r=new Q({source:mx(n)});return r.on("destroy",()=>{Ci.has(i)&&Ci.remove(i)}),t||Ci.set(i,r),r}function j2(e,t=!1){return typeof e=="string"?Ci.get(e):e instanceof Fe?new Q({source:e}):F2(e,t)}Q.from=j2;Fe.from=mx;_e.add(hx,ux,cx,I2,Sa,dx,jc);var gx=(e=>(e[e.Low=0]="Low",e[e.Normal=1]="Normal",e[e.High=2]="High",e))(gx||{});function Ce(e){if(typeof e!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function Tn(e){return e.split("?")[0].split("#")[0]}function B2(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function V2(e,t,s){return e.replace(new RegExp(B2(t),"g"),s)}function O2(e,t){let s="",i=0,n=-1,r=0,o=-1;for(let a=0;a<=e.length;++a){if(a<e.length)o=e.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(n===a-1||r===1))if(n!==a-1&&r===2){if(s.length<2||i!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){const l=s.lastIndexOf("/");if(l!==s.length-1){l===-1?(s="",i=0):(s=s.slice(0,l),i=s.length-1-s.lastIndexOf("/")),n=a,r=0;continue}}else if(s.length===2||s.length===1){s="",i=0,n=a,r=0;continue}}}else s.length>0?s+=`/${e.slice(n+1,a)}`:s=e.slice(n+1,a),i=a-n-1;n=a,r=0}else o===46&&r!==-1?++r:r=-1}return s}const kr={toPosix(e){return V2(e,"\\","/")},isUrl(e){return/^https?:/.test(this.toPosix(e))},isDataUrl(e){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e)},isBlobUrl(e){return e.startsWith("blob:")},hasProtocol(e){return/^[^/:]+:/.test(this.toPosix(e))},getProtocol(e){Ce(e),e=this.toPosix(e);const t=/^file:\/\/\//.exec(e);if(t)return t[0];const s=/^[^/:]+:\/{0,2}/.exec(e);return s?s[0]:""},toAbsolute(e,t,s){if(Ce(e),this.isDataUrl(e)||this.isBlobUrl(e))return e;const i=Tn(this.toPosix(t??re.get().getBaseUrl())),n=Tn(this.toPosix(s??this.rootname(i)));return e=this.toPosix(e),e.startsWith("/")?kr.join(n,e.slice(1)):this.isAbsolute(e)?e:this.join(i,e)},normalize(e){if(Ce(e),e.length===0)return".";if(this.isDataUrl(e)||this.isBlobUrl(e))return e;e=this.toPosix(e);let t="";const s=e.startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));const i=e.endsWith("/");return e=O2(e),e.length>0&&i&&(e+="/"),s?`/${e}`:t+e},isAbsolute(e){return Ce(e),e=this.toPosix(e),this.hasProtocol(e)?!0:e.startsWith("/")},join(...e){if(e.length===0)return".";let t;for(let s=0;s<e.length;++s){const i=e[s];if(Ce(i),i.length>0)if(t===void 0)t=i;else{const n=e[s-1]??"";this.joinExtensions.includes(this.extname(n).toLowerCase())?t+=`/../${i}`:t+=`/${i}`}}return t===void 0?".":this.normalize(t)},dirname(e){if(Ce(e),e.length===0)return".";e=this.toPosix(e);let t=e.charCodeAt(0);const s=t===47;let i=-1,n=!0;const r=this.getProtocol(e),o=e;e=e.slice(r.length);for(let a=e.length-1;a>=1;--a)if(t=e.charCodeAt(a),t===47){if(!n){i=a;break}}else n=!1;return i===-1?s?"/":this.isUrl(o)?r+e:r:s&&i===1?"//":r+e.slice(0,i)},rootname(e){Ce(e),e=this.toPosix(e);let t="";if(e.startsWith("/")?t="/":t=this.getProtocol(e),this.isUrl(e)){const s=e.indexOf("/",t.length);s!==-1?t=e.slice(0,s):t=e,t.endsWith("/")||(t+="/")}return t},basename(e,t){Ce(e),t&&Ce(t),e=Tn(this.toPosix(e));let s=0,i=-1,n=!0,r;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let o=t.length-1,a=-1;for(r=e.length-1;r>=0;--r){const l=e.charCodeAt(r);if(l===47){if(!n){s=r+1;break}}else a===-1&&(n=!1,a=r+1),o>=0&&(l===t.charCodeAt(o)?--o===-1&&(i=r):(o=-1,i=a))}return s===i?i=a:i===-1&&(i=e.length),e.slice(s,i)}for(r=e.length-1;r>=0;--r)if(e.charCodeAt(r)===47){if(!n){s=r+1;break}}else i===-1&&(n=!1,i=r+1);return i===-1?"":e.slice(s,i)},extname(e){Ce(e),e=Tn(this.toPosix(e));let t=-1,s=0,i=-1,n=!0,r=0;for(let o=e.length-1;o>=0;--o){const a=e.charCodeAt(o);if(a===47){if(!n){s=o+1;break}continue}i===-1&&(n=!1,i=o+1),a===46?t===-1?t=o:r!==1&&(r=1):t!==-1&&(r=-1)}return t===-1||i===-1||r===0||r===1&&t===i-1&&t===s+1?"":e.slice(t,i)},parse(e){Ce(e);const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;e=Tn(this.toPosix(e));let s=e.charCodeAt(0);const i=this.isAbsolute(e);let n;t.root=this.rootname(e),i||this.hasProtocol(e)?n=1:n=0;let r=-1,o=0,a=-1,l=!0,h=e.length-1,u=0;for(;h>=n;--h){if(s=e.charCodeAt(h),s===47){if(!l){o=h+1;break}continue}a===-1&&(l=!1,a=h+1),s===46?r===-1?r=h:u!==1&&(u=1):r!==-1&&(u=-1)}return r===-1||a===-1||u===0||u===1&&r===a-1&&r===o+1?a!==-1&&(o===0&&i?t.base=t.name=e.slice(1,a):t.base=t.name=e.slice(o,a)):(o===0&&i?(t.name=e.slice(1,r),t.base=e.slice(1,a)):(t.name=e.slice(o,r),t.base=e.slice(o,a)),t.ext=e.slice(r,a)),t.dir=this.dirname(e),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function yx(e,t,s,i,n){const r=t[s];for(let o=0;o<r.length;o++){const a=r[o];s<t.length-1?yx(e.replace(i[s],a),t,s+1,i,n):n.push(e.replace(i[s],a))}}function z2(e){const t=/\{(.*?)\}/g,s=e.match(t),i=[];if(s){const n=[];s.forEach(r=>{const o=r.substring(1,r.length-1).split(",");n.push(o)}),yx(e,n,0,s,i)}else i.push(e);return i}const dp=e=>!Array.isArray(e);class xx{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,s)=>`${t}${this._bundleIdConnector}${s}`,extractAssetIdFromBundle:(t,s)=>s.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(s=>{this._preferredOrder.push(s),s.priority||(s.priority=Object.keys(s.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const s=t;this._defaultSearchParams=Object.keys(s).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(s[i])}`).join("&")}}getAlias(t){const{alias:s,src:i}=t;return bi(s||i,r=>typeof r=="string"?r:Array.isArray(r)?r.map(o=>(o==null?void 0:o.src)??o):r!=null&&r.src?r.src:r,!0)}addManifest(t){this._manifest&&Wt("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(s=>{this.addBundle(s.name,s.assets)})}addBundle(t,s){const i=[];let n=s;Array.isArray(s)||(n=Object.entries(s).map(([r,o])=>typeof o=="string"||Array.isArray(o)?{alias:r,src:o}:{alias:r,...o})),n.forEach(r=>{const o=r.src,a=r.alias;let l;if(typeof a=="string"){const h=this._createBundleAssetId(t,a);i.push(h),l=[a,h]}else{const h=a.map(u=>this._createBundleAssetId(t,u));i.push(...h),l=[...a,...h]}this.add({...r,alias:l,src:o})}),this._bundles[t]=i}add(t){const s=[];Array.isArray(t)?s.push(...t):s.push(t);let i;i=r=>{this.hasKey(r)&&Wt(`[Resolver] already has key: ${r} overwriting`)},bi(s).forEach(r=>{const{src:o}=r;let{data:a,format:l,loadParser:h,parser:u}=r;const c=bi(o).map(m=>typeof m=="string"?z2(m):Array.isArray(m)?m:[m]),d=this.getAlias(r);Array.isArray(d)?d.forEach(i):i(d);const f=[],g=m=>{const x=this._parsers.find(p=>p.test(m));return{...x==null?void 0:x.parse(m),src:m}};c.forEach(m=>{m.forEach(x=>{let p={};if(typeof x!="object"?p=g(x):(a=x.data??a,l=x.format??l,(x.loadParser||x.parser)&&(h=x.loadParser??h,u=x.parser??u),p={...g(x.src),...x}),!d)throw new Error(`[Resolver] alias is undefined for this asset: ${p.src}`);p=this._buildResolvedAsset(p,{aliases:d,data:a,format:l,loadParser:h,parser:u,progressSize:r.progressSize}),f.push(p)})}),d.forEach(m=>{this._assetMap[m]=f})})}resolveBundle(t){const s=dp(t);t=bi(t);const i={};return t.forEach(n=>{const r=this._bundles[n];if(r){const o=this.resolve(r),a={};for(const l in o){const h=o[l];a[this._extractAssetIdFromBundle(n,l)]=h}i[n]=a}}),s?i[t[0]]:i}resolveUrl(t){const s=this.resolve(t);if(typeof t!="string"){const i={};for(const n in s)i[n]=s[n].src;return i}return s.src}resolve(t){const s=dp(t);t=bi(t);const i={};return t.forEach(n=>{if(!this._resolverHash[n])if(this._assetMap[n]){let r=this._assetMap[n];const o=this._getPreferredOrder(r);o==null||o.priority.forEach(a=>{o.params[a].forEach(l=>{const h=r.filter(u=>u[a]?u[a]===l:!1);h.length&&(r=h)})}),this._resolverHash[n]=r[0]}else this._resolverHash[n]=this._buildResolvedAsset({alias:[n],src:n},{});i[n]=this._resolverHash[n]}),s?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let s=0;s<t.length;s++){const i=t[s],n=this._preferredOrder.find(r=>r.params.format.includes(i.format));if(n)return n}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const s=/\?/.test(t)?"&":"?";return`${t}${s}${this._defaultSearchParams}`}_buildResolvedAsset(t,s){const{aliases:i,data:n,loadParser:r,parser:o,format:a,progressSize:l}=s;return(this._basePath||this._rootPath)&&(t.src=kr.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=i??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...n||{},...t.data},t.loadParser=r??t.loadParser,t.parser=o??t.parser,t.format=a??t.format??G2(t.src),l!==void 0&&(t.progressSize=l),t}}xx.RETINA_PREFIX=/@([0-9\.]+)x/;function G2(e){return e.split(".").pop().split("?").shift().split("#").shift()}const fp=(e,t)=>{const s=t.split("?")[1];return s&&(e+=`?${s}`),e},vx=class Vn{constructor(t,s){this.linkedSheets=[];let i=t;(t==null?void 0:t.source)instanceof Fe&&(i={texture:t,data:s});const{texture:n,data:r,cachePrefix:o=""}=i;this.cachePrefix=o,this._texture=n instanceof Q?n:null,this.textureSource=n.source,this.textures={},this.animations={},this.data=r;const a=parseFloat(r.meta.scale);a?(this.resolution=a,n.source.resolution=this.resolution):this.resolution=n.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=Vn.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let s=t;const i=Vn.BATCH_SIZE;for(;s-t<i&&s<this._frameKeys.length;){const n=this._frameKeys[s],r=this._frames[n],o=r.frame;if(o){let a=null,l=null;const h=r.trimmed!==!1&&r.sourceSize?r.sourceSize:r.frame,u=new vt(0,0,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution);r.rotated?a=new vt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new vt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),r.trimmed!==!1&&r.spriteSourceSize&&(l=new vt(Math.floor(r.spriteSourceSize.x)/this.resolution,Math.floor(r.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[n]=new Q({source:this.textureSource,frame:a,orig:u,trim:l,rotate:r.rotated?2:0,defaultAnchor:r.anchor,defaultBorders:r.borders,label:n.toString()})}s++}}_processAnimations(){const t=this.data.animations||{};for(const s in t){this.animations[s]=[];for(let i=0;i<t[s].length;i++){const n=t[s][i];this.animations[s].push(this.textures[n])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Vn.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Vn.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var s;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((s=this._texture)==null||s.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};vx.BATCH_SIZE=1e3;let pp=vx;const U2=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function wx(e,t,s){const i={};if(e.forEach(n=>{i[n]=t}),Object.keys(t.textures).forEach(n=>{i[`${t.cachePrefix}${n}`]=t.textures[n]}),!s){const n=kr.dirname(e[0]);t.linkedSheets.forEach((r,o)=>{const a=wx([`${n}/${t.data.meta.related_multi_packs[o]}`],r,!0);Object.assign(i,a)})}return i}const $2={extension:q.Asset,cache:{test:e=>e instanceof pp,getCacheableAssets:(e,t)=>wx(e,t,!1)},resolver:{extension:{type:q.ResolveParser,name:"resolveSpritesheet"},test:e=>{const s=e.split("?")[0].split("."),i=s.pop(),n=s.pop();return i==="json"&&U2.includes(n)},parse:e=>{var s;const t=e.split(".");return{resolution:parseFloat(((s=xx.RETINA_PREFIX.exec(e))==null?void 0:s[1])??"1"),format:t[t.length-2],src:e}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:q.LoadParser,priority:gx.Normal,name:"spritesheetLoader"},async testParse(e,t){return kr.extname(t.src).toLowerCase()===".json"&&!!e.frames},async parse(e,t,s){var c,d;const{texture:i,imageFilename:n,textureOptions:r,cachePrefix:o}=(t==null?void 0:t.data)??{};let a=kr.dirname(t.src);a&&a.lastIndexOf("/")!==a.length-1&&(a+="/");let l;if(i instanceof Q)l=i;else{const f=fp(a+(n??e.meta.image),t.src);l=(await s.load([{src:f,data:r}]))[f]}const h=new pp({texture:l.source,data:e,cachePrefix:o});await h.parse();const u=(c=e==null?void 0:e.meta)==null?void 0:c.related_multi_packs;if(Array.isArray(u)){const f=[];for(const m of u){if(typeof m!="string")continue;let x=a+m;(d=t.data)!=null&&d.ignoreMultiPack||(x=fp(x,t.src),f.push(s.load({src:x,data:{textureOptions:r,ignoreMultiPack:!0}})))}const g=await Promise.all(f);h.linkedSheets=g,g.forEach(m=>{m.linkedSheets=[h].concat(h.linkedSheets.filter(x=>x!==m))})}return h},async unload(e,t,s){await s.unload(e.textureSource._sourceOrigin),e.destroy(!1)}}};_e.add($2);const Wl=Object.create(null),mp=Object.create(null);function Oc(e,t){let s=mp[e];return s===void 0&&(Wl[t]===void 0&&(Wl[t]=1),mp[e]=s=Wl[t]++),s}let _i;function _x(){return(!_i||_i!=null&&_i.isContextLost())&&(_i=re.get().createCanvas().getContext("webgl",{})),_i}let _o;function W2(){if(!_o){_o="mediump";const e=_x();e&&e.getShaderPrecisionFormat&&(_o=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision?"highp":"mediump")}return _o}function H2(e,t,s){return t?e:s?(e=e.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${e}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${e}
        `}function Y2(e,t,s){const i=s?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(e.substring(0,9)!=="precision"){let n=s?t.requestedFragmentPrecision:t.requestedVertexPrecision;return n==="highp"&&i!=="highp"&&(n="mediump"),`precision ${n} float;
${e}`}else if(i!=="highp"&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}function X2(e,t){return t?`#version 300 es
${e}`:e}const K2={},q2={};function Q2(e,{name:t="pixi-program"},s=!0){t=t.replace(/\s+/g,"-"),t+=s?"-fragment":"-vertex";const i=s?K2:q2;return i[t]?(i[t]++,t+=`-${i[t]}`):i[t]=1,e.indexOf("#define SHADER_NAME")!==-1?e:`${`#define SHADER_NAME ${t}`}
${e}`}function Z2(e,t){return t?e.replace("#version 300 es",""):e}const Hl={stripVersion:Z2,ensurePrecision:Y2,addProgramDefines:H2,setProgramName:Q2,insertVersion:X2},Pn=Object.create(null),Sx=class mu{constructor(t){t={...mu.defaultOptions,...t};const s=t.fragment.indexOf("#version 300 es")!==-1,i={stripVersion:s,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:W2()},setProgramName:{name:t.name},addProgramDefines:s,insertVersion:s};let n=t.fragment,r=t.vertex;Object.keys(Hl).forEach(o=>{const a=i[o];n=Hl[o](n,a,!0),r=Hl[o](r,a,!1)}),this.fragment=n,this.vertex=r,this.transformFeedbackVaryings=t.transformFeedbackVaryings,this._key=Oc(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,Pn[this._cacheKey]=null}static from(t){const s=`${t.vertex}:${t.fragment}`;return Pn[s]||(Pn[s]=new mu(t),Pn[s]._cacheKey=s),Pn[s]}};Sx.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let bx=Sx;const gp={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function J2(e){return gp[e]??gp.float32}const tb={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function eb({source:e,entryPoint:t}){const s={},i=e.indexOf(`fn ${t}`);if(i!==-1){const n=e.indexOf("->",i);if(n!==-1){const r=e.substring(i,n),o=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let a;for(;(a=o.exec(r))!==null;){const l=tb[a[3]]??"float32";s[a[2]]={location:parseInt(a[1],10),format:l,stride:J2(l).stride,offset:0,instance:!1,start:0}}}}return s}function Yl(e){var c,d;const t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,s=/@group\((\d+)\)/,i=/@binding\((\d+)\)/,n=/var(<[^>]+>)? (\w+)/,r=/:\s*(\w+)/,o=/struct\s+(\w+)\s*{([^}]+)}/g,a=/(\w+)\s*:\s*([\w\<\>]+)/g,l=/struct\s+(\w+)/,h=(c=e.match(t))==null?void 0:c.map(f=>({group:parseInt(f.match(s)[1],10),binding:parseInt(f.match(i)[1],10),name:f.match(n)[2],isUniform:f.match(n)[1]==="<uniform>",type:f.match(r)[1]}));if(!h)return{groups:[],structs:[]};const u=((d=e.match(o))==null?void 0:d.map(f=>{const g=f.match(l)[1],m=f.match(a).reduce((x,p)=>{const[y,v]=p.split(":");return x[y.trim()]=v.trim(),x},{});return m?{name:g,members:m}:null}).filter(({name:f})=>h.some(g=>g.type===f)))??[];return{groups:h,structs:u}}var On=(e=>(e[e.VERTEX=1]="VERTEX",e[e.FRAGMENT=2]="FRAGMENT",e[e.COMPUTE=4]="COMPUTE",e))(On||{});function sb({groups:e}){const t=[];for(let s=0;s<e.length;s++){const i=e[s];t[i.group]||(t[i.group]=[]),i.isUniform?t[i.group].push({binding:i.binding,visibility:On.VERTEX|On.FRAGMENT,buffer:{type:"uniform"}}):i.type==="sampler"?t[i.group].push({binding:i.binding,visibility:On.FRAGMENT,sampler:{type:"filtering"}}):i.type==="texture_2d"&&t[i.group].push({binding:i.binding,visibility:On.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return t}function ib({groups:e}){const t=[];for(let s=0;s<e.length;s++){const i=e[s];t[i.group]||(t[i.group]={}),t[i.group][i.name]=i.binding}return t}function nb(e,t){const s=new Set,i=new Set,n=[...e.structs,...t.structs].filter(o=>s.has(o.name)?!1:(s.add(o.name),!0)),r=[...e.groups,...t.groups].filter(o=>{const a=`${o.name}-${o.binding}`;return i.has(a)?!1:(i.add(a),!0)});return{structs:n,groups:r}}const Mn=Object.create(null);class Qa{constructor(t){var a,l;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:s,vertex:i,layout:n,gpuLayout:r,name:o}=t;if(this.name=o,this.fragment=s,this.vertex=i,s.source===i.source){const h=Yl(s.source);this.structsAndGroups=h}else{const h=Yl(i.source),u=Yl(s.source);this.structsAndGroups=nb(h,u)}this.layout=n??ib(this.structsAndGroups),this.gpuLayout=r??sb(this.structsAndGroups),this.autoAssignGlobalUniforms=((a=this.layout[0])==null?void 0:a.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((l=this.layout[1])==null?void 0:l.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:s}=this,i=t.source+s.source+t.entryPoint+s.entryPoint;this._layoutKey=Oc(i,"program")}get attributeData(){return this._attributeData??(this._attributeData=eb(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,Mn[this._cacheKey]=null}static from(t){const s=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return Mn[s]||(Mn[s]=new Qa(t),Mn[s]._cacheKey=s),Mn[s]}}const Cx=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],rb=Cx.reduce((e,t)=>(e[t]=!0,e),{});function ob(e,t){switch(e){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const kx=class Tx{constructor(t,s){this._touched=0,this.uid=gt("uniform"),this._resourceType="uniformGroup",this._resourceId=gt("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,s={...Tx.defaultOptions,...s},this.uniformStructures=t;const i={};for(const n in t){const r=t[n];if(r.name=n,r.size=r.size??1,!rb[r.type]){const o=r.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(o){const[,a,l]=o;throw new Error(`Uniform type ${r.type} is not supported. Use type: '${a}', size: ${l} instead.`)}throw new Error(`Uniform type ${r.type} is not supported. Supported uniform types are: ${Cx.join(", ")}`)}r.value??(r.value=ob(r.type,r.size)),i[n]=r.value}this.uniforms=i,this._dirtyId=1,this.ubo=s.ubo,this.isStatic=s.isStatic,this._signature=Oc(Object.keys(i).map(n=>`${n}-${t[n].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};kx.defaultOptions={ubo:!1,isStatic:!1};let Px=kx;class Ho{constructor(t){this.resources=Object.create(null),this._dirty=!0;let s=0;for(const i in t){const n=t[i];this.setResource(n,s++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let s=0;for(const i in this.resources)t[s++]=this.resources[i]._resourceId;this._key=t.join("|")}setResource(t,s){var n,r;const i=this.resources[s];t!==i&&(i&&((n=t.off)==null||n.call(t,"change",this.onResourceChange,this)),(r=t.on)==null||r.call(t,"change",this.onResourceChange,this),this.resources[s]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){const s=this.resources;for(const i in s)s[i]._touched=t}destroy(){var s;const t=this.resources;for(const i in t){const n=t[i];(s=n==null?void 0:n.off)==null||s.call(n,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const s=this.resources;for(const i in s)s[i]===t&&(s[i]=null)}else this._updateKey()}}var gu=(e=>(e[e.WEBGL=1]="WEBGL",e[e.WEBGPU=2]="WEBGPU",e[e.BOTH=3]="BOTH",e))(gu||{});class zc extends qe{constructor(t){super(),this.uid=gt("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:s,glProgram:i,groups:n,resources:r,compatibleRenderers:o,groupMap:a}=t;this.gpuProgram=s,this.glProgram=i,o===void 0&&(o=0,s&&(o|=gu.WEBGPU),i&&(o|=gu.WEBGL)),this.compatibleRenderers=o;const l={};if(!r&&!n&&(r={}),r&&n)throw new Error("[Shader] Cannot have both resources and groups");if(!s&&n&&!a)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!s&&n&&a)for(const h in a)for(const u in a[h]){const c=a[h][u];l[c]={group:h,binding:u,name:c}}else if(s&&n&&!a){const h=s.structsAndGroups.groups;a={},h.forEach(u=>{a[u.group]=a[u.group]||{},a[u.group][u.binding]=u.name,l[u.name]=u})}else if(r){n={},a={},s&&s.structsAndGroups.groups.forEach(c=>{a[c.group]=a[c.group]||{},a[c.group][c.binding]=c.name,l[c.name]=c});let h=0;for(const u in r)l[u]||(n[99]||(n[99]=new Ho,this._ownedBindGroups.push(n[99])),l[u]={group:99,binding:h,name:u},a[99]=a[99]||{},a[99][h]=u,h++);for(const u in r){const c=u;let d=r[u];!d.source&&!d._resourceType&&(d=new Px(d));const f=l[c];f&&(n[f.group]||(n[f.group]=new Ho,this._ownedBindGroups.push(n[f.group])),n[f.group].setResource(d,f.binding))}}this.groups=n,this._uniformBindMap=a,this.resources=this._buildResourceAccessor(n,l)}addResource(t,s,i){var n,r;(n=this._uniformBindMap)[s]||(n[s]={}),(r=this._uniformBindMap[s])[i]||(r[i]=t),this.groups[s]||(this.groups[s]=new Ho,this._ownedBindGroups.push(this.groups[s]))}_buildResourceAccessor(t,s){const i={};for(const n in s){const r=s[n];Object.defineProperty(i,r.name,{get(){return t[r.group].getResource(r.binding)},set(o){t[r.group].setResource(o,r.binding)}})}return i}destroy(t=!1){var s,i;this._destroyed||(this._destroyed=!0,this.emit("destroy",this),t&&((s=this.gpuProgram)==null||s.destroy(),(i=this.glProgram)==null||i.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(n=>{n.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(t){const{gpu:s,gl:i,...n}=t;let r,o;return s&&(r=Qa.from(s)),i&&(o=bx.from(i)),new zc({gpuProgram:r,glProgram:o,...n})}}const yu=[];_e.handleByNamedList(q.Environment,yu);async function ab(e){if(!e)for(let t=0;t<yu.length;t++){const s=yu[t];if(s.value.test()){await s.value.load();return}}}let An;function lb(){if(typeof An=="boolean")return An;try{An=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{An=!1}return An}function yp(e,t,s=2){const i=t&&t.length,n=i?t[0]*s:e.length;let r=Mx(e,0,n,s,!0);const o=[];if(!r||r.next===r.prev)return o;let a,l,h;if(i&&(r=fb(e,t,r,s)),e.length>80*s){a=e[0],l=e[1];let u=a,c=l;for(let d=s;d<n;d+=s){const f=e[d],g=e[d+1];f<a&&(a=f),g<l&&(l=g),f>u&&(u=f),g>c&&(c=g)}h=Math.max(u-a,c-l),h=h!==0?32767/h:0}return Tr(r,o,s,a,l,h,0),o}function Mx(e,t,s,i,n){let r;if(n===Cb(e,t,s,i)>0)for(let o=t;o<s;o+=i)r=xp(o/i|0,e[o],e[o+1],r);else for(let o=s-i;o>=t;o-=i)r=xp(o/i|0,e[o],e[o+1],r);return r&&hn(r,r.next)&&(Mr(r),r=r.next),r}function gi(e,t){if(!e)return e;t||(t=e);let s=e,i;do if(i=!1,!s.steiner&&(hn(s,s.next)||lt(s.prev,s,s.next)===0)){if(Mr(s),s=t=s.prev,s===s.next)break;i=!0}else s=s.next;while(i||s!==t);return t}function Tr(e,t,s,i,n,r,o){if(!e)return;!o&&r&&xb(e,i,n,r);let a=e;for(;e.prev!==e.next;){const l=e.prev,h=e.next;if(r?ub(e,i,n,r):hb(e)){t.push(l.i,e.i,h.i),Mr(e),e=h.next,a=h.next;continue}if(e=h,e===a){o?o===1?(e=cb(gi(e),t),Tr(e,t,s,i,n,r,2)):o===2&&db(e,t,s,i,n,r):Tr(gi(e),t,s,i,n,r,1);break}}}function hb(e){const t=e.prev,s=e,i=e.next;if(lt(t,s,i)>=0)return!1;const n=t.x,r=s.x,o=i.x,a=t.y,l=s.y,h=i.y,u=Math.min(n,r,o),c=Math.min(a,l,h),d=Math.max(n,r,o),f=Math.max(a,l,h);let g=i.next;for(;g!==t;){if(g.x>=u&&g.x<=d&&g.y>=c&&g.y<=f&&zn(n,a,r,l,o,h,g.x,g.y)&&lt(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function ub(e,t,s,i){const n=e.prev,r=e,o=e.next;if(lt(n,r,o)>=0)return!1;const a=n.x,l=r.x,h=o.x,u=n.y,c=r.y,d=o.y,f=Math.min(a,l,h),g=Math.min(u,c,d),m=Math.max(a,l,h),x=Math.max(u,c,d),p=xu(f,g,t,s,i),y=xu(m,x,t,s,i);let v=e.prevZ,_=e.nextZ;for(;v&&v.z>=p&&_&&_.z<=y;){if(v.x>=f&&v.x<=m&&v.y>=g&&v.y<=x&&v!==n&&v!==o&&zn(a,u,l,c,h,d,v.x,v.y)&&lt(v.prev,v,v.next)>=0||(v=v.prevZ,_.x>=f&&_.x<=m&&_.y>=g&&_.y<=x&&_!==n&&_!==o&&zn(a,u,l,c,h,d,_.x,_.y)&&lt(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;v&&v.z>=p;){if(v.x>=f&&v.x<=m&&v.y>=g&&v.y<=x&&v!==n&&v!==o&&zn(a,u,l,c,h,d,v.x,v.y)&&lt(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;_&&_.z<=y;){if(_.x>=f&&_.x<=m&&_.y>=g&&_.y<=x&&_!==n&&_!==o&&zn(a,u,l,c,h,d,_.x,_.y)&&lt(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function cb(e,t){let s=e;do{const i=s.prev,n=s.next.next;!hn(i,n)&&Ex(i,s,s.next,n)&&Pr(i,n)&&Pr(n,i)&&(t.push(i.i,s.i,n.i),Mr(s),Mr(s.next),s=e=n),s=s.next}while(s!==e);return gi(s)}function db(e,t,s,i,n,r){let o=e;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&_b(o,a)){let l=Rx(o,a);o=gi(o,o.next),l=gi(l,l.next),Tr(o,t,s,i,n,r,0),Tr(l,t,s,i,n,r,0);return}a=a.next}o=o.next}while(o!==e)}function fb(e,t,s,i){const n=[];for(let r=0,o=t.length;r<o;r++){const a=t[r]*i,l=r<o-1?t[r+1]*i:e.length,h=Mx(e,a,l,i,!1);h===h.next&&(h.steiner=!0),n.push(wb(h))}n.sort(pb);for(let r=0;r<n.length;r++)s=mb(n[r],s);return s}function pb(e,t){let s=e.x-t.x;if(s===0&&(s=e.y-t.y,s===0)){const i=(e.next.y-e.y)/(e.next.x-e.x),n=(t.next.y-t.y)/(t.next.x-t.x);s=i-n}return s}function mb(e,t){const s=gb(e,t);if(!s)return t;const i=Rx(s,e);return gi(i,i.next),gi(s,s.next)}function gb(e,t){let s=t;const i=e.x,n=e.y;let r=-1/0,o;if(hn(e,s))return s;do{if(hn(e,s.next))return s.next;if(n<=s.y&&n>=s.next.y&&s.next.y!==s.y){const c=s.x+(n-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(c<=i&&c>r&&(r=c,o=s.x<s.next.x?s:s.next,c===i))return o}s=s.next}while(s!==t);if(!o)return null;const a=o,l=o.x,h=o.y;let u=1/0;s=o;do{if(i>=s.x&&s.x>=l&&i!==s.x&&Ax(n<h?i:r,n,l,h,n<h?r:i,n,s.x,s.y)){const c=Math.abs(n-s.y)/(i-s.x);Pr(s,e)&&(c<u||c===u&&(s.x>o.x||s.x===o.x&&yb(o,s)))&&(o=s,u=c)}s=s.next}while(s!==a);return o}function yb(e,t){return lt(e.prev,e,t.prev)<0&&lt(t.next,e,e.next)<0}function xb(e,t,s,i){let n=e;do n.z===0&&(n.z=xu(n.x,n.y,t,s,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,vb(n)}function vb(e){let t,s=1;do{let i=e,n;e=null;let r=null;for(t=0;i;){t++;let o=i,a=0;for(let h=0;h<s&&(a++,o=o.nextZ,!!o);h++);let l=s;for(;a>0||l>0&&o;)a!==0&&(l===0||!o||i.z<=o.z)?(n=i,i=i.nextZ,a--):(n=o,o=o.nextZ,l--),r?r.nextZ=n:e=n,n.prevZ=r,r=n;i=o}r.nextZ=null,s*=2}while(t>1);return e}function xu(e,t,s,i,n){return e=(e-s)*n|0,t=(t-i)*n|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function wb(e){let t=e,s=e;do(t.x<s.x||t.x===s.x&&t.y<s.y)&&(s=t),t=t.next;while(t!==e);return s}function Ax(e,t,s,i,n,r,o,a){return(n-o)*(t-a)>=(e-o)*(r-a)&&(e-o)*(i-a)>=(s-o)*(t-a)&&(s-o)*(r-a)>=(n-o)*(i-a)}function zn(e,t,s,i,n,r,o,a){return!(e===o&&t===a)&&Ax(e,t,s,i,n,r,o,a)}function _b(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Sb(e,t)&&(Pr(e,t)&&Pr(t,e)&&bb(e,t)&&(lt(e.prev,e,t.prev)||lt(e,t.prev,t))||hn(e,t)&&lt(e.prev,e,e.next)>0&&lt(t.prev,t,t.next)>0)}function lt(e,t,s){return(t.y-e.y)*(s.x-t.x)-(t.x-e.x)*(s.y-t.y)}function hn(e,t){return e.x===t.x&&e.y===t.y}function Ex(e,t,s,i){const n=bo(lt(e,t,s)),r=bo(lt(e,t,i)),o=bo(lt(s,i,e)),a=bo(lt(s,i,t));return!!(n!==r&&o!==a||n===0&&So(e,s,t)||r===0&&So(e,i,t)||o===0&&So(s,e,i)||a===0&&So(s,t,i))}function So(e,t,s){return t.x<=Math.max(e.x,s.x)&&t.x>=Math.min(e.x,s.x)&&t.y<=Math.max(e.y,s.y)&&t.y>=Math.min(e.y,s.y)}function bo(e){return e>0?1:e<0?-1:0}function Sb(e,t){let s=e;do{if(s.i!==e.i&&s.next.i!==e.i&&s.i!==t.i&&s.next.i!==t.i&&Ex(s,s.next,e,t))return!0;s=s.next}while(s!==e);return!1}function Pr(e,t){return lt(e.prev,e,e.next)<0?lt(e,t,e.next)>=0&&lt(e,e.prev,t)>=0:lt(e,t,e.prev)<0||lt(e,e.next,t)<0}function bb(e,t){let s=e,i=!1;const n=(e.x+t.x)/2,r=(e.y+t.y)/2;do s.y>r!=s.next.y>r&&s.next.y!==s.y&&n<(s.next.x-s.x)*(r-s.y)/(s.next.y-s.y)+s.x&&(i=!i),s=s.next;while(s!==e);return i}function Rx(e,t){const s=vu(e.i,e.x,e.y),i=vu(t.i,t.x,t.y),n=e.next,r=t.prev;return e.next=t,t.prev=e,s.next=n,n.prev=s,i.next=s,s.prev=i,r.next=i,i.prev=r,i}function xp(e,t,s,i){const n=vu(e,t,s);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function Mr(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function vu(e,t,s){return{i:e,x:t,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Cb(e,t,s,i){let n=0;for(let r=t,o=s-i;r<s;r+=i)n+=(e[o]-e[r])*(e[r+1]+e[o+1]),o=r;return n}const kb=yp.default||yp;var Nx=(e=>(e[e.NONE=0]="NONE",e[e.COLOR=16384]="COLOR",e[e.STENCIL=1024]="STENCIL",e[e.DEPTH=256]="DEPTH",e[e.COLOR_DEPTH=16640]="COLOR_DEPTH",e[e.COLOR_STENCIL=17408]="COLOR_STENCIL",e[e.DEPTH_STENCIL=1280]="DEPTH_STENCIL",e[e.ALL=17664]="ALL",e))(Nx||{});class Tb{constructor(t){this.items=[],this._name=t}emit(t,s,i,n,r,o,a,l){const{name:h,items:u}=this;for(let c=0,d=u.length;c<d;c++)u[c][h](t,s,i,n,r,o,a,l);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const s=this.items.indexOf(t);return s!==-1&&this.items.splice(s,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const Pb=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],Dx=class Ix extends qe{constructor(t){super(),this.uid=gt("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const s=[...Pb,...this.config.runners??[]];this._addRunners(...s),this._unsafeEvalCheck()}async init(t={}){const s=t.skipExtensionImports===!0?!0:t.manageImports===!1;await ab(s),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const i in this._systemsHash)t={...this._systemsHash[i].constructor.defaultOptions,...t};t={...Ix.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let i=0;i<this.runners.init.items.length;i++)await this.runners.init.items[i].init(t);this._initOptions=t}render(t,s){let i=t;if(i instanceof tt&&(i={container:i},s&&(X(mt,"passing a second argument is deprecated, please use render options instead"),i.target=s.renderTexture)),i.target||(i.target=this.view.renderTarget),i.target===this.view.renderTarget&&(this._lastObjectRendered=i.container,i.clearColor??(i.clearColor=this.background.colorRgba),i.clear??(i.clear=this.background.clearBeforeRender)),i.clearColor){const n=Array.isArray(i.clearColor)&&i.clearColor.length===4;i.clearColor=n?i.clearColor:kt.shared.setValue(i.clearColor).toArray()}i.transform||(i.container.updateLocalTransform(),i.transform=i.container.localTransform),i.container.visible&&(i.container.enableRenderGroup(),this.runners.prerender.emit(i),this.runners.renderStart.emit(i),this.runners.render.emit(i),this.runners.renderEnd.emit(i),this.runners.postrender.emit(i))}resize(t,s,i){const n=this.view.resolution;this.view.resize(t,s,i),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),i!==void 0&&i!==n&&this.runners.resolutionChange.emit(i)}clear(t={}){const s=this;t.target||(t.target=s.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=Nx.ALL);const{clear:i,clearColor:n,target:r}=t;kt.shared.setValue(n??this.background.colorRgba),s.renderTarget.clear(r,i,kt.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(s=>{this.runners[s]=new Tb(s)})}_addSystems(t){let s;for(s in t){const i=t[s];this._addSystem(i.value,i.name)}}_addSystem(t,s){const i=new t(this);if(this[s])throw new Error(`Whoops! The name "${s}" is already in use`);this[s]=i,this._systemsHash[s]=i;for(const n in this.runners)this.runners[n].add(i);return this}_addPipes(t,s){const i=s.reduce((n,r)=>(n[r.name]=r.value,n),{});t.forEach(n=>{const r=n.value,o=n.name,a=i[o];this.renderPipes[o]=new r(this,a?new a:null),this.runners.destroy.add(this.renderPipes[o])})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),(t===!0||typeof t=="object"&&t.releaseGlobalResources)&&Ur.release(),Object.values(this.runners).forEach(s=>{s.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!lb())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};Dx.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let Lx=Dx,Co;function Mb(e){return Co!==void 0||(Co=(()=>{var s;const t={stencil:!0,failIfMajorPerformanceCaveat:e??Lx.defaultOptions.failIfMajorPerformanceCaveat};try{if(!re.get().getWebGLRenderingContext())return!1;let n=re.get().createCanvas().getContext("webgl",t);const r=!!((s=n==null?void 0:n.getContextAttributes())!=null&&s.stencil);if(n){const o=n.getExtension("WEBGL_lose_context");o&&o.loseContext()}return n=null,r}catch{return!1}})()),Co}let ko;async function Ab(e={}){return ko!==void 0||(ko=await(async()=>{const t=re.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(e)).requestDevice(),!0}catch{return!1}})()),ko}const vp=["webgl","webgpu","canvas"];async function Eb(e){let t=[];e.preference?(t.push(e.preference),vp.forEach(r=>{r!==e.preference&&t.push(r)})):t=vp.slice();let s,i={};for(let r=0;r<t.length;r++){const o=t[r];if(o==="webgpu"&&await Ab()){const{WebGPURenderer:a}=await wa(async()=>{const{WebGPURenderer:l}=await import("./WebGPURenderer-BnV0dR0R.js");return{WebGPURenderer:l}},__vite__mapDeps([3,2,4]));s=a,i={...e,...e.webgpu};break}else if(o==="webgl"&&Mb(e.failIfMajorPerformanceCaveat??Lx.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:a}=await wa(async()=>{const{WebGLRenderer:l}=await import("./WebGLRenderer-D2PLHObe.js");return{WebGLRenderer:l}},__vite__mapDeps([5,2,4]));s=a,i={...e,...e.webgl};break}else if(o==="canvas")throw i={...e},new Error("CanvasRenderer is not yet implemented")}if(delete i.webgpu,delete i.webgl,!s)throw new Error("No available renderer for the current environment");const n=new s;return await n.init(i),n}const Fx="8.14.3";class jx{static init(){var t;(t=globalThis.__PIXI_APP_INIT__)==null||t.call(globalThis,this,Fx)}static destroy(){}}jx.extension=q.Application;class Rb{constructor(t){this._renderer=t}init(){var t;(t=globalThis.__PIXI_RENDERER_INIT__)==null||t.call(globalThis,this._renderer,Fx)}destroy(){this._renderer=null}}Rb.extension={type:[q.WebGLSystem,q.WebGPUSystem],name:"initHook",priority:-10};const Bx=class wu{constructor(...t){this.stage=new tt,t[0]!==void 0&&X(mt,"Application constructor options are deprecated, please use Application.init() instead.")}async init(t){t={...t},this.stage||(this.stage=new tt),this.renderer=await Eb(t),wu._plugins.forEach(s=>{s.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return X(mt,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,s=!1){const i=wu._plugins.slice(0);i.reverse(),i.forEach(n=>{n.destroy.call(this)}),this.stage.destroy(s),this.stage=null,this.renderer.destroy(t),this.renderer=null}};Bx._plugins=[];let Vx=Bx;_e.handleByList(q.Application,Vx._plugins);_e.add(jx);/**
 * tiny-lru
 *
 * @copyright 2025 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 11.4.5
 */class Nb{constructor(t=0,s=0,i=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=t,this.resetTtl=i,this.size=0,this.ttl=s}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(t){if(this.has(t)){const s=this.items[t];delete this.items[t],this.size--,s.prev!==null&&(s.prev.next=s.next),s.next!==null&&(s.next.prev=s.prev),this.first===s&&(this.first=s.next),this.last===s&&(this.last=s.prev)}return this}entries(t=this.keys()){return t.map(s=>[s,this.get(s)])}evict(t=!1){if(t||this.size>0){const s=this.first;delete this.items[s.key],--this.size===0?(this.first=null,this.last=null):(this.first=s.next,this.first.prev=null)}return this}expiresAt(t){let s;return this.has(t)&&(s=this.items[t].expiry),s}get(t){const s=this.items[t];if(s!==void 0){if(this.ttl>0&&s.expiry<=Date.now()){this.delete(t);return}return this.moveToEnd(s),s.value}}has(t){return t in this.items}moveToEnd(t){this.last!==t&&(t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),t.prev=this.last,t.next=null,this.last!==null&&(this.last.next=t),this.last=t,this.first===null&&(this.first=t))}keys(){const t=[];let s=this.first;for(;s!==null;)t.push(s.key),s=s.next;return t}setWithEvicted(t,s,i=this.resetTtl){let n=null;if(this.has(t))this.set(t,s,!0,i);else{this.max>0&&this.size===this.max&&(n={...this.first},this.evict(!0));let r=this.items[t]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:s};++this.size===1?this.first=r:this.last.next=r,this.last=r}return n}set(t,s,i=!1,n=this.resetTtl){let r=this.items[t];return i||r!==void 0?(r.value=s,i===!1&&n&&(r.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(r)):(this.max>0&&this.size===this.max&&this.evict(!0),r=this.items[t]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:s},++this.size===1?this.first=r:this.last.next=r,this.last=r),this}values(t=this.keys()){return t.map(s=>this.get(s))}}function Db(e=1e3,t=0,s=!1){if(isNaN(e)||e<0)throw new TypeError("Invalid max value");if(isNaN(t)||t<0)throw new TypeError("Invalid ttl value");if(typeof s!="boolean")throw new TypeError("Invalid resetTtl value");return new Nb(e,t,s)}const Ib=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function Ox(e){const t=typeof e.fontSize=="number"?`${e.fontSize}px`:e.fontSize;let s=e.fontFamily;Array.isArray(e.fontFamily)||(s=e.fontFamily.split(","));for(let i=s.length-1;i>=0;i--){let n=s[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&!Ib.includes(n)&&(n=`"${n}"`),s[i]=n}return`${e.fontStyle} ${e.fontVariant} ${e.fontWeight} ${t} ${s.join(",")}`}const Xl={willReadFrequently:!0},je=class F{static get experimentalLetterSpacingSupported(){let t=F._experimentalLetterSpacingSupported;if(t===void 0){const s=re.get().getCanvasRenderingContext2D().prototype;t=F._experimentalLetterSpacingSupported="letterSpacing"in s||"textLetterSpacing"in s}return t}constructor(t,s,i,n,r,o,a,l,h){this.text=t,this.style=s,this.width=i,this.height=n,this.lines=r,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=h}static measureText(t=" ",s,i=F._canvas,n=s.wordWrap){var y;const r=`${t}-${s.styleKey}-wordWrap-${n}`;if(F._measurementCache.has(r))return F._measurementCache.get(r);const o=Ox(s),a=F.measureFont(o);a.fontSize===0&&(a.fontSize=s.fontSize,a.ascent=s.fontSize);const l=F.__context;l.font=o;const u=(n?F._wordWrap(t,s,i):t).split(/(?:\r\n|\r|\n)/),c=new Array(u.length);let d=0;for(let v=0;v<u.length;v++){const _=F._measureText(u[v],s.letterSpacing,l);c[v]=_,d=Math.max(d,_)}const f=((y=s._stroke)==null?void 0:y.width)||0;let g=d+f;s.dropShadow&&(g+=s.dropShadow.distance);const m=s.lineHeight||a.fontSize;let x=Math.max(m,a.fontSize+f)+(u.length-1)*(m+s.leading);s.dropShadow&&(x+=s.dropShadow.distance);const p=new F(t,s,g,x,u,c,m+s.leading,d,a);return F._measurementCache.set(r,p),p}static _measureText(t,s,i){let n=!1;F.experimentalLetterSpacingSupported&&(F.experimentalLetterSpacing?(i.letterSpacing=`${s}px`,i.textLetterSpacing=`${s}px`,n=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));const r=i.measureText(t);let o=r.width;const a=-r.actualBoundingBoxLeft;let h=r.actualBoundingBoxRight-a;if(o>0)if(n)o-=s,h-=s;else{const u=(F.graphemeSegmenter(t).length-1)*s;o+=u,h+=u}return Math.max(o,h)}static _wordWrap(t,s,i=F._canvas){const n=i.getContext("2d",Xl);let r=0,o="",a="";const l=Object.create(null),{letterSpacing:h,whiteSpace:u}=s,c=F._collapseSpaces(u),d=F._collapseNewlines(u);let f=!c;const g=s.wordWrapWidth+h,m=F._tokenize(t);for(let x=0;x<m.length;x++){let p=m[x];if(F._isNewline(p)){if(!d){a+=F._addLine(o),f=!c,o="",r=0;continue}p=" "}if(c){const v=F.isBreakingSpace(p),_=F.isBreakingSpace(o[o.length-1]);if(v&&_)continue}const y=F._getFromCache(p,h,l,n);if(y>g)if(o!==""&&(a+=F._addLine(o),o="",r=0),F.canBreakWords(p,s.breakWords)){const v=F.wordWrapSplit(p);for(let _=0;_<v.length;_++){let S=v[_],b=S,C=1;for(;v[_+C];){const A=v[_+C];if(!F.canBreakChars(b,A,p,_,s.breakWords))S+=A;else break;b=A,C++}_+=C-1;const k=F._getFromCache(S,h,l,n);k+r>g&&(a+=F._addLine(o),f=!1,o="",r=0),o+=S,r+=k}}else{o.length>0&&(a+=F._addLine(o),o="",r=0);const v=x===m.length-1;a+=F._addLine(p,!v),f=!1,o="",r=0}else y+r>g&&(f=!1,a+=F._addLine(o),o="",r=0),(o.length>0||!F.isBreakingSpace(p)||f)&&(o+=p,r+=y)}return a+=F._addLine(o,!1),a}static _addLine(t,s=!0){return t=F._trimRight(t),t=s?`${t}
`:t,t}static _getFromCache(t,s,i,n){let r=i[t];return typeof r!="number"&&(r=F._measureText(t,s,n)+s,i[t]=r),r}static _collapseSpaces(t){return t==="normal"||t==="pre-line"}static _collapseNewlines(t){return t==="normal"}static _trimRight(t){if(typeof t!="string")return"";for(let s=t.length-1;s>=0;s--){const i=t[s];if(!F.isBreakingSpace(i))break;t=t.slice(0,-1)}return t}static _isNewline(t){return typeof t!="string"?!1:F._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,s){return typeof t!="string"?!1:F._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(t){const s=[];let i="";if(typeof t!="string")return s;for(let n=0;n<t.length;n++){const r=t[n],o=t[n+1];if(F.isBreakingSpace(r,o)||F._isNewline(r)){i!==""&&(s.push(i),i=""),r==="\r"&&o===`
`?(s.push(`\r
`),n++):s.push(r);continue}i+=r}return i!==""&&s.push(i),s}static canBreakWords(t,s){return s}static canBreakChars(t,s,i,n,r){return!0}static wordWrapSplit(t){return F.graphemeSegmenter(t)}static measureFont(t){if(F._fonts[t])return F._fonts[t];const s=F._context;s.font=t;const i=s.measureText(F.METRICS_STRING+F.BASELINE_SYMBOL),n={ascent:i.actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent,fontSize:i.actualBoundingBoxAscent+i.actualBoundingBoxDescent};return F._fonts[t]=n,n}static clearMetrics(t=""){t?delete F._fonts[t]:F._fonts={}}static get _canvas(){if(!F.__canvas){let t;try{const s=new OffscreenCanvas(0,0),i=s.getContext("2d",Xl);if(i!=null&&i.measureText)return F.__canvas=s,s;t=re.get().createCanvas()}catch{t=re.get().createCanvas()}t.width=t.height=10,F.__canvas=t}return F.__canvas}static get _context(){return F.__context||(F.__context=F._canvas.getContext("2d",Xl)),F.__context}};je.METRICS_STRING="|q";je.BASELINE_SYMBOL="M";je.BASELINE_MULTIPLIER=1.4;je.HEIGHT_MULTIPLIER=2;je.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const e=new Intl.Segmenter;return t=>{const s=e.segment(t),i=[];let n=0;for(const r of s)i[n++]=r.segment;return i}}return e=>[...e]})();je.experimentalLetterSpacing=!1;je._fonts={};je._newlines=[10,13];je._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];je._measurementCache=Db(1e3);let ki=je;const wp=[{offset:0,color:"white"},{offset:1,color:"black"}],Gc=class _u{constructor(...t){this.uid=gt("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let s=Lb(t);s={...s.type==="radial"?_u.defaultRadialOptions:_u.defaultLinearOptions,...$y(s)},this._textureSize=s.textureSize,this._wrapMode=s.wrapMode,s.type==="radial"?(this.center=s.center,this.outerCenter=s.outerCenter??this.center,this.innerRadius=s.innerRadius,this.outerRadius=s.outerRadius,this.scale=s.scale,this.rotation=s.rotation):(this.start=s.start,this.end=s.end),this.textureSpace=s.textureSpace,this.type=s.type,s.colorStops.forEach(n=>{this.addColorStop(n.offset,n.color)})}addColorStop(t,s){return this.colorStops.push({offset:t,color:kt.shared.setValue(s).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:t,y:s}=this.start,{x:i,y:n}=this.end,r=i-t,o=n-s;const a=r<0||o<0;if(this._wrapMode==="clamp-to-edge"){if(r<0){const x=t;t=i,i=x,r*=-1}if(o<0){const x=s;s=n,n=x,o*=-1}}const l=this.colorStops.length?this.colorStops:wp,h=this._textureSize,{canvas:u,context:c}=Sp(h,1),d=a?c.createLinearGradient(this._textureSize,0,0,0):c.createLinearGradient(0,0,this._textureSize,0);_p(d,l),c.fillStyle=d,c.fillRect(0,0,h,1),this.texture=new Q({source:new Sa({resource:u,addressMode:this._wrapMode})});const f=Math.sqrt(r*r+o*o),g=Math.atan2(o,r),m=new W;m.scale(f/h,1),m.rotate(g),m.translate(t,s),this.textureSpace==="local"&&m.scale(h,h),this.transform=m}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:wp,s=this._textureSize,{canvas:i,context:n}=Sp(s,s),{x:r,y:o}=this.center,{x:a,y:l}=this.outerCenter,h=this.innerRadius,u=this.outerRadius,c=a-u,d=l-u,f=s/(u*2),g=(r-c)*f,m=(o-d)*f,x=n.createRadialGradient(g,m,h*f,(a-c)*f,(l-d)*f,u*f);_p(x,t),n.fillStyle=t[t.length-1].color,n.fillRect(0,0,s,s),n.fillStyle=x,n.translate(g,m),n.rotate(this.rotation),n.scale(1,this.scale),n.translate(-g,-m),n.fillRect(0,0,s,s),this.texture=new Q({source:new Sa({resource:i,addressMode:this._wrapMode})});const p=new W;p.scale(1/f,1/f),p.translate(c,d),this.textureSpace==="local"&&p.scale(s,s),this.transform=p}destroy(){var t;(t=this.texture)==null||t.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};Gc.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};Gc.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let ds=Gc;function _p(e,t){for(let s=0;s<t.length;s++){const i=t[s];e.addColorStop(i.offset,i.color)}}function Sp(e,t){const s=re.get().createCanvas(e,t),i=s.getContext("2d");return{canvas:s,context:i}}function Lb(e){let t=e[0]??{};return(typeof t=="number"||e[1])&&(X("8.5.2","use options object instead"),t={type:"linear",start:{x:e[0],y:e[1]},end:{x:e[2],y:e[3]},textureSpace:e[4],textureSize:e[5]??ds.defaultLinearOptions.textureSize}),t}const bp={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class Za{constructor(t,s){this.uid=gt("fillPattern"),this._tick=0,this.transform=new W,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),s&&(t.source.style.addressModeU=bp[s].addressModeU,t.source.style.addressModeV=bp[s].addressModeV)}setTransform(t){const s=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/s.frame.width,1/s.frame.height),this._tick++}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture=t,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var Fb=Bb,Kl={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},jb=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function Bb(e){var t=[];return e.replace(jb,function(s,i,n){var r=i.toLowerCase();for(n=Ob(n),r=="m"&&n.length>2&&(t.push([i].concat(n.splice(0,2))),r="l",i=i=="m"?"l":"L");;){if(n.length==Kl[r])return n.unshift(i),t.push(n);if(n.length<Kl[r])throw new Error("malformed path data");t.push([i].concat(n.splice(0,Kl[r])))}}),t}var Vb=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function Ob(e){var t=e.match(Vb);return t?t.map(Number):[]}const zb=Na(Fb);function Gb(e,t){const s=zb(e),i=[];let n=null,r=0,o=0;for(let a=0;a<s.length;a++){const l=s[a],h=l[0],u=l;switch(h){case"M":r=u[1],o=u[2],t.moveTo(r,o);break;case"m":r+=u[1],o+=u[2],t.moveTo(r,o);break;case"H":r=u[1],t.lineTo(r,o);break;case"h":r+=u[1],t.lineTo(r,o);break;case"V":o=u[1],t.lineTo(r,o);break;case"v":o+=u[1],t.lineTo(r,o);break;case"L":r=u[1],o=u[2],t.lineTo(r,o);break;case"l":r+=u[1],o+=u[2],t.lineTo(r,o);break;case"C":r=u[5],o=u[6],t.bezierCurveTo(u[1],u[2],u[3],u[4],r,o);break;case"c":t.bezierCurveTo(r+u[1],o+u[2],r+u[3],o+u[4],r+u[5],o+u[6]),r+=u[5],o+=u[6];break;case"S":r=u[3],o=u[4],t.bezierCurveToShort(u[1],u[2],r,o);break;case"s":t.bezierCurveToShort(r+u[1],o+u[2],r+u[3],o+u[4]),r+=u[3],o+=u[4];break;case"Q":r=u[3],o=u[4],t.quadraticCurveTo(u[1],u[2],r,o);break;case"q":t.quadraticCurveTo(r+u[1],o+u[2],r+u[3],o+u[4]),r+=u[3],o+=u[4];break;case"T":r=u[1],o=u[2],t.quadraticCurveToShort(r,o);break;case"t":r+=u[1],o+=u[2],t.quadraticCurveToShort(r,o);break;case"A":r=u[6],o=u[7],t.arcToSvg(u[1],u[2],u[3],u[4],u[5],r,o);break;case"a":r+=u[6],o+=u[7],t.arcToSvg(u[1],u[2],u[3],u[4],u[5],r,o);break;case"Z":case"z":t.closePath(),i.length>0&&(n=i.pop(),n?(r=n.startX,o=n.startY):(r=0,o=0)),n=null;break;default:Wt(`Unknown SVG path command: ${h}`)}h!=="Z"&&h!=="z"&&n===null&&(n={startX:r,startY:o},i.push(n))}return t}class Uc{constructor(t=0,s=0,i=0){this.type="circle",this.x=t,this.y=s,this.radius=i}clone(){return new Uc(this.x,this.y,this.radius)}contains(t,s){if(this.radius<=0)return!1;const i=this.radius*this.radius;let n=this.x-t,r=this.y-s;return n*=n,r*=r,n+r<=i}strokeContains(t,s,i,n=.5){if(this.radius===0)return!1;const r=this.x-t,o=this.y-s,a=this.radius,l=(1-n)*i,h=Math.sqrt(r*r+o*o);return h<=a+l&&h>a-(i-l)}getBounds(t){return t||(t=new vt),t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class $c{constructor(t=0,s=0,i=0,n=0){this.type="ellipse",this.x=t,this.y=s,this.halfWidth=i,this.halfHeight=n}clone(){return new $c(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,s){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(t-this.x)/this.halfWidth,n=(s-this.y)/this.halfHeight;return i*=i,n*=n,i+n<=1}strokeContains(t,s,i,n=.5){const{halfWidth:r,halfHeight:o}=this;if(r<=0||o<=0)return!1;const a=i*(1-n),l=i-a,h=r-l,u=o-l,c=r+a,d=o+a,f=t-this.x,g=s-this.y,m=f*f/(h*h)+g*g/(u*u),x=f*f/(c*c)+g*g/(d*d);return m>1&&x<=1}getBounds(t){return t||(t=new vt),t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=this.halfWidth*2,t.height=this.halfHeight*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function Ub(e,t,s,i,n,r){const o=e-s,a=t-i,l=n-s,h=r-i,u=o*l+a*h,c=l*l+h*h;let d=-1;c!==0&&(d=u/c);let f,g;d<0?(f=s,g=i):d>1?(f=n,g=r):(f=s+d*l,g=i+d*h);const m=e-f,x=t-g;return m*m+x*x}let $b,Wb;class er{constructor(...t){this.type="polygon";let s=Array.isArray(t[0])?t[0]:t;if(typeof s[0]!="number"){const i=[];for(let n=0,r=s.length;n<r;n++)i.push(s[n].x,s[n].y);s=i}this.points=s,this.closePath=!0}isClockwise(){let t=0;const s=this.points,i=s.length;for(let n=0;n<i;n+=2){const r=s[n],o=s[n+1],a=s[(n+2)%i],l=s[(n+3)%i];t+=(a-r)*(l+o)}return t<0}containsPolygon(t){const s=this.getBounds($b),i=t.getBounds(Wb);if(!s.containsRect(i))return!1;const n=t.points;for(let r=0;r<n.length;r+=2){const o=n[r],a=n[r+1];if(!this.contains(o,a))return!1}return!0}clone(){const t=this.points.slice(),s=new er(t);return s.closePath=this.closePath,s}contains(t,s){let i=!1;const n=this.points.length/2;for(let r=0,o=n-1;r<n;o=r++){const a=this.points[r*2],l=this.points[r*2+1],h=this.points[o*2],u=this.points[o*2+1];l>s!=u>s&&t<(h-a)*((s-l)/(u-l))+a&&(i=!i)}return i}strokeContains(t,s,i,n=.5){const r=i*i,o=r*(1-n),a=r-o,{points:l}=this,h=l.length-(this.closePath?0:2);for(let u=0;u<h;u+=2){const c=l[u],d=l[u+1],f=l[(u+2)%l.length],g=l[(u+3)%l.length],m=Ub(t,s,c,d,f,g),x=Math.sign((f-c)*(s-d)-(g-d)*(t-c));if(m<=(x<0?a:o))return!0}return!1}getBounds(t){t||(t=new vt);const s=this.points;let i=1/0,n=-1/0,r=1/0,o=-1/0;for(let a=0,l=s.length;a<l;a+=2){const h=s[a],u=s[a+1];i=h<i?h:i,n=h>n?h:n,r=u<r?u:r,o=u>o?u:o}return t.x=i,t.width=n-i,t.y=r,t.height=o-r,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,s)=>`${t}, ${s}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return X("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return X("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const To=(e,t,s,i,n,r,o)=>{const a=e-s,l=t-i,h=Math.sqrt(a*a+l*l);return h>=n-r&&h<=n+o};class Wc{constructor(t=0,s=0,i=0,n=0,r=20){this.type="roundedRectangle",this.x=t,this.y=s,this.width=i,this.height=n,this.radius=r}getBounds(t){return t||(t=new vt),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new Wc(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,s){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&s>=this.y&&s<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(s>=this.y+i&&s<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let n=t-(this.x+i),r=s-(this.y+i);const o=i*i;if(n*n+r*r<=o||(n=t-(this.x+this.width-i),n*n+r*r<=o)||(r=s-(this.y+this.height-i),n*n+r*r<=o)||(n=t-(this.x+i),n*n+r*r<=o))return!0}return!1}strokeContains(t,s,i,n=.5){const{x:r,y:o,width:a,height:l,radius:h}=this,u=i*(1-n),c=i-u,d=r+h,f=o+h,g=a-h*2,m=l-h*2,x=r+a,p=o+l;return(t>=r-u&&t<=r+c||t>=x-c&&t<=x+u)&&s>=f&&s<=f+m||(s>=o-u&&s<=o+c||s>=p-c&&s<=p+u)&&t>=d&&t<=d+g?!0:t<d&&s<f&&To(t,s,d,f,h,c,u)||t>x-h&&s<f&&To(t,s,x-h,f,h,c,u)||t>x-h&&s>p-h&&To(t,s,x-h,p-h,h,c,u)||t<d&&s>p-h&&To(t,s,d,p-h,h,c,u)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const zx={};function Hb(e,t,s){let i=2166136261;for(let n=0;n<t;n++)i^=e[n].uid,i=Math.imul(i,16777619),i>>>=0;return zx[i]||Yb(e,t,i,s)}function Yb(e,t,s,i){const n={};let r=0;for(let a=0;a<i;a++){const l=a<t?e[a]:Q.EMPTY.source;n[r++]=l.source,n[r++]=l.style}const o=new Ho(n);return zx[s]=o,o}class Cp{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}function kp(e,t){const s=e.byteLength/8|0,i=new Float64Array(e,0,s);new Float64Array(t,0,s).set(i);const r=e.byteLength-s*8;if(r>0){const o=new Uint8Array(e,s*8,r);new Uint8Array(t,s*8,r).set(o)}}const Xb={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var Kb=(e=>(e[e.DISABLED=0]="DISABLED",e[e.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",e[e.MASK_ACTIVE=2]="MASK_ACTIVE",e[e.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",e[e.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",e[e.NONE=5]="NONE",e))(Kb||{});function Tp(e,t){return t.alphaMode==="no-premultiply-alpha"&&Xb[e]||e}const qb=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Qb(e){let t="";for(let s=0;s<e;++s)s>0&&(t+=`
else `),s<e-1&&(t+=`if(test == ${s}.0){}`);return t}function Zb(e,t){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const s=t.createShader(t.FRAGMENT_SHADER);try{for(;;){const i=qb.replace(/%forloop%/gi,Qb(e));if(t.shaderSource(s,i),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS))e=e/2|0;else break}}finally{t.deleteShader(s)}return e}let Si=null;function Jb(){var t;if(Si)return Si;const e=_x();return Si=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Si=Zb(Si,e),(t=e.getExtension("WEBGL_lose_context"))==null||t.loseContext(),Si}class tC{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const s=this.textures[t];this.textures[t]=null,this.ids[s.uid]=null}this.count=0}}class eC{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new tC,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const sr=[];let ba=0;Ur.register({clear:()=>{if(sr.length>0)for(const e of sr)e&&e.destroy();sr.length=0,ba=0}});function Pp(){return ba>0?sr[--ba]:new eC}function Mp(e){sr[ba++]=e}let En=0;const Gx=class Ux{constructor(t){this.uid=gt("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],t={...Ux.defaultOptions,...t},t.maxTextures||(X("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),t.maxTextures=Jb());const{maxTextures:s,attributesInitialSize:i,indicesInitialSize:n}=t;this.attributeBuffer=new Cp(i*4),this.indexBuffer=new Uint16Array(n),this.maxTextures=s}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)Mp(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,s){const i=t._batch.textures.ids[s._source.uid];return!i&&i!==0?!1:(t._textureId=i,t.texture=s,!0)}updateElement(t){this.dirty=!0;const s=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,s.float32View,s.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,s.float32View,s.uint32View,t._attributeStart,t._textureId)}break(t){const s=this._elements;if(!s[this.elementStart])return;let i=Pp(),n=i.textures;n.clear();const r=s[this.elementStart];let o=Tp(r.blendMode,r.texture._source),a=r.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const l=this.attributeBuffer.float32View,h=this.attributeBuffer.uint32View,u=this.indexBuffer;let c=this._batchIndexSize,d=this._batchIndexStart,f="startBatch";const g=this.maxTextures;for(let m=this.elementStart;m<this.elementSize;++m){const x=s[m];s[m]=null;const y=x.texture._source,v=Tp(x.blendMode,y),_=o!==v||a!==x.topology;if(y._batchTick===En&&!_){x._textureId=y._textureBindLocation,c+=x.indexSize,x.packAsQuad?(this.packQuadAttributes(x,l,h,x._attributeStart,x._textureId),this.packQuadIndex(u,x._indexStart,x._attributeStart/this.vertexSize)):(this.packAttributes(x,l,h,x._attributeStart,x._textureId),this.packIndex(x,u,x._indexStart,x._attributeStart/this.vertexSize)),x._batch=i;continue}y._batchTick=En,(n.count>=g||_)&&(this._finishBatch(i,d,c-d,n,o,a,t,f),f="renderBatch",d=c,o=v,a=x.topology,i=Pp(),n=i.textures,n.clear(),++En),x._textureId=y._textureBindLocation=n.count,n.ids[y.uid]=n.count,n.textures[n.count++]=y,x._batch=i,c+=x.indexSize,x.packAsQuad?(this.packQuadAttributes(x,l,h,x._attributeStart,x._textureId),this.packQuadIndex(u,x._indexStart,x._attributeStart/this.vertexSize)):(this.packAttributes(x,l,h,x._attributeStart,x._textureId),this.packIndex(x,u,x._indexStart,x._attributeStart/this.vertexSize))}n.count>0&&(this._finishBatch(i,d,c-d,n,o,a,t,f),d=c,++En),this.elementStart=this.elementSize,this._batchIndexStart=d,this._batchIndexSize=c}_finishBatch(t,s,i,n,r,o,a,l){t.gpuBindGroup=null,t.bindGroup=null,t.action=l,t.batcher=this,t.textures=n,t.blendMode=r,t.topology=o,t.start=s,t.size=i,++En,this.batches[this.batchIndex++]=t,a.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const s=Math.max(t,this.attributeBuffer.size*2),i=new Cp(s);kp(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(t){const s=this.indexBuffer;let i=Math.max(t,s.length*1.5);i+=i%2;const n=i>65535?new Uint32Array(i):new Uint16Array(i);if(n.BYTES_PER_ELEMENT!==s.BYTES_PER_ELEMENT)for(let r=0;r<s.length;r++)n[r]=s[r];else kp(s.buffer,n.buffer);this.indexBuffer=n}packQuadIndex(t,s,i){t[s]=i+0,t[s+1]=i+1,t[s+2]=i+2,t[s+3]=i+0,t[s+4]=i+2,t[s+5]=i+3}packIndex(t,s,i,n){const r=t.indices,o=t.indexSize,a=t.indexOffset,l=t.attributeOffset;for(let h=0;h<o;h++)s[i++]=n+r[h+a]-l}destroy(t={}){var s;if(this.batches!==null){for(let i=0;i<this.batches.length;i++)Mp(this.batches[i]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,t.shader&&((s=this.shader)==null||s.destroy(),this.shader=null);for(let i=0;i<this._elements.length;i++)this._elements[i]&&(this._elements[i]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};Gx.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let sC=Gx;var Kt=(e=>(e[e.MAP_READ=1]="MAP_READ",e[e.MAP_WRITE=2]="MAP_WRITE",e[e.COPY_SRC=4]="COPY_SRC",e[e.COPY_DST=8]="COPY_DST",e[e.INDEX=16]="INDEX",e[e.VERTEX=32]="VERTEX",e[e.UNIFORM=64]="UNIFORM",e[e.STORAGE=128]="STORAGE",e[e.INDIRECT=256]="INDIRECT",e[e.QUERY_RESOLVE=512]="QUERY_RESOLVE",e[e.STATIC=1024]="STATIC",e))(Kt||{});class Ar extends qe{constructor(t){let{data:s,size:i}=t;const{usage:n,label:r,shrinkToFit:o}=t;super(),this.uid=gt("buffer"),this._resourceType="buffer",this._resourceId=gt("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,s instanceof Array&&(s=new Float32Array(s)),this._data=s,i??(i=s==null?void 0:s.byteLength);const a=!!s;this.descriptor={size:i,usage:n,mappedAtCreation:a,label:r},this.shrinkToFit=o??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&Kt.STATIC)}set static(t){t?this.descriptor.usage|=Kt.STATIC:this.descriptor.usage&=~Kt.STATIC}setDataWithSize(t,s,i){if(this._updateID++,this._updateSize=s*t.BYTES_PER_ELEMENT,this._data===t){i&&this.emit("update",this);return}const n=this._data;if(this._data=t,this._dataInt32=null,!n||n.length!==t.length){!this.shrinkToFit&&n&&t.byteLength<n.byteLength?i&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=gt("resource"),this.emit("change",this));return}i&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function $x(e,t){if(!(e instanceof Ar)){let s=t?Kt.INDEX:Kt.VERTEX;e instanceof Array&&(t?(e=new Uint32Array(e),s=Kt.INDEX|Kt.COPY_DST):(e=new Float32Array(e),s=Kt.VERTEX|Kt.COPY_DST)),e=new Ar({data:e,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:s})}return e}function iC(e,t,s){const i=e.getAttribute(t);if(!i)return s.minX=0,s.minY=0,s.maxX=0,s.maxY=0,s;const n=i.buffer.data;let r=1/0,o=1/0,a=-1/0,l=-1/0;const h=n.BYTES_PER_ELEMENT,u=(i.offset||0)/h,c=(i.stride||2*4)/h;for(let d=u;d<n.length;d+=c){const f=n[d],g=n[d+1];f>a&&(a=f),g>l&&(l=g),f<r&&(r=f),g<o&&(o=g)}return s.minX=r,s.minY=o,s.maxX=a,s.maxY=l,s}function nC(e){return(e instanceof Ar||Array.isArray(e)||e.BYTES_PER_ELEMENT)&&(e={buffer:e}),e.buffer=$x(e.buffer,!1),e}class rC extends qe{constructor(t={}){super(),this.uid=gt("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Ie,this._boundsDirty=!0;const{attributes:s,indexBuffer:i,topology:n}=t;if(this.buffers=[],this.attributes={},s)for(const r in s)this.addAttribute(r,s[r]);this.instanceCount=t.instanceCount??1,i&&this.addIndex(i),this.topology=n||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const s=this.attributes[t];return s.buffer.data.length/(s.stride/4||s.size)}return 0}addAttribute(t,s){const i=nC(s);this.buffers.indexOf(i.buffer)===-1&&(this.buffers.push(i.buffer),i.buffer.on("update",this.onBufferUpdate,this),i.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=i}addIndex(t){this.indexBuffer=$x(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,iC(this,"aPosition",this._bounds)):this._bounds}destroy(t=!1){var s;this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(i=>i.destroy()),(s=this.indexBuffer)==null||s.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const oC=new Float32Array(1),aC=new Uint32Array(1);class lC extends rC{constructor(){const s=new Ar({data:oC,label:"attribute-batch-buffer",usage:Kt.VERTEX|Kt.COPY_DST,shrinkToFit:!1}),i=new Ar({data:aC,label:"index-batch-buffer",usage:Kt.INDEX|Kt.COPY_DST,shrinkToFit:!1}),n=6*4;super({attributes:{aPosition:{buffer:s,format:"float32x2",stride:n,offset:0},aUV:{buffer:s,format:"float32x2",stride:n,offset:2*4},aColor:{buffer:s,format:"unorm8x4",stride:n,offset:4*4},aTextureIdAndRound:{buffer:s,format:"uint16x2",stride:n,offset:5*4}},indexBuffer:i})}}function Ap(e,t,s){if(e)for(const i in e){const n=i.toLocaleLowerCase(),r=t[n];if(r){let o=e[i];i==="header"&&(o=o.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),s&&r.push(`//----${s}----//`),r.push(o)}else Wt(`${i} placement hook does not exist in shader`)}}const hC=/\{\{(.*?)\}\}/g;function Ep(e){var i;const t={};return(((i=e.match(hC))==null?void 0:i.map(n=>n.replace(/[{()}]/g,"")))??[]).forEach(n=>{t[n]=[]}),t}function Rp(e,t){let s;const i=/@in\s+([^;]+);/g;for(;(s=i.exec(e))!==null;)t.push(s[1])}function Np(e,t,s=!1){const i=[];Rp(t,i),e.forEach(a=>{a.header&&Rp(a.header,i)});const n=i;s&&n.sort();const r=n.map((a,l)=>`       @location(${l}) ${a},`).join(`
`);let o=t.replace(/@in\s+[^;]+;\s*/g,"");return o=o.replace("{{in}}",`
${r}
`),o}function Dp(e,t){let s;const i=/@out\s+([^;]+);/g;for(;(s=i.exec(e))!==null;)t.push(s[1])}function uC(e){const s=/\b(\w+)\s*:/g.exec(e);return s?s[1]:""}function cC(e){const t=/@.*?\s+/g;return e.replace(t,"")}function dC(e,t){const s=[];Dp(t,s),e.forEach(l=>{l.header&&Dp(l.header,s)});let i=0;const n=s.sort().map(l=>l.indexOf("builtin")>-1?l:`@location(${i++}) ${l}`).join(`,
`),r=s.sort().map(l=>`       var ${cC(l)};`).join(`
`),o=`return VSOutput(
            ${s.sort().map(l=>` ${uC(l)}`).join(`,
`)});`;let a=t.replace(/@out\s+[^;]+;\s*/g,"");return a=a.replace("{{struct}}",`
${n}
`),a=a.replace("{{start}}",`
${r}
`),a=a.replace("{{return}}",`
${o}
`),a}function Ip(e,t){let s=e;for(const i in t){const n=t[i];n.join(`
`).length?s=s.replace(`{{${i}}}`,`//-----${i} START-----//
${n.join(`
`)}
//----${i} FINISH----//`):s=s.replace(`{{${i}}}`,"")}return s}const Cs=Object.create(null),ql=new Map;let fC=0;function pC({template:e,bits:t}){const s=Wx(e,t);if(Cs[s])return Cs[s];const{vertex:i,fragment:n}=gC(e,t);return Cs[s]=Hx(i,n,t),Cs[s]}function mC({template:e,bits:t}){const s=Wx(e,t);return Cs[s]||(Cs[s]=Hx(e.vertex,e.fragment,t)),Cs[s]}function gC(e,t){const s=t.map(o=>o.vertex).filter(o=>!!o),i=t.map(o=>o.fragment).filter(o=>!!o);let n=Np(s,e.vertex,!0);n=dC(s,n);const r=Np(i,e.fragment,!0);return{vertex:n,fragment:r}}function Wx(e,t){return t.map(s=>(ql.has(s)||ql.set(s,fC++),ql.get(s))).sort((s,i)=>s-i).join("-")+e.vertex+e.fragment}function Hx(e,t,s){const i=Ep(e),n=Ep(t);return s.forEach(r=>{Ap(r.vertex,i,r.name),Ap(r.fragment,n,r.name)}),{vertex:Ip(e,i),fragment:Ip(t,n)}}const yC=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,xC=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,vC=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,wC=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,_C={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},SC={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function bC({bits:e,name:t}){const s=pC({template:{fragment:xC,vertex:yC},bits:[_C,...e]});return Qa.from({name:t,vertex:{source:s.vertex,entryPoint:"main"},fragment:{source:s.fragment,entryPoint:"main"}})}function CC({bits:e,name:t}){return new bx({name:t,...mC({template:{vertex:vC,fragment:wC},bits:[SC,...e]})})}const kC={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},TC={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},Ql={};function PC(e){const t=[];if(e===1)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let s=0;for(let i=0;i<e;i++)t.push(`@group(1) @binding(${s++}) var textureSource${i+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${s++}) var textureSampler${i+1}: sampler;`)}return t.join(`
`)}function MC(e){const t=[];if(e===1)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let s=0;s<e;s++)s===e-1?t.push("  default:{"):t.push(`  case ${s}:{`),t.push(`      outColor = textureSampleGrad(textureSource${s+1}, textureSampler${s+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join(`
`)}function AC(e){return Ql[e]||(Ql[e]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${PC(e)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${MC(e)}
            `}}),Ql[e]}const Zl={};function EC(e){const t=[];for(let s=0;s<e;s++)s>0&&t.push("else"),s<e-1&&t.push(`if(vTextureId < ${s}.5)`),t.push("{"),t.push(`	outColor = texture(uTextures[${s}], vUV);`),t.push("}");return t.join(`
`)}function RC(e){return Zl[e]||(Zl[e]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${e}];

            `,main:`

                ${EC(e)}
            `}}),Zl[e]}const NC={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},DC={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},Lp={};function IC(e){let t=Lp[e];if(t)return t;const s=new Int32Array(e);for(let i=0;i<e;i++)s[i]=i;return t=Lp[e]=new Px({uTextures:{value:s,type:"i32",size:e}},{isStatic:!0}),t}class Fp extends zc{constructor(t){const s=CC({name:"batch",bits:[TC,RC(t),DC]}),i=bC({name:"batch",bits:[kC,AC(t),NC]});super({glProgram:s,gpuProgram:i,resources:{batchSamplers:IC(t)}}),this.maxTextures=t}}let Rn=null;const Yx=class Xx extends sC{constructor(t){super(t),this.geometry=new lC,this.name=Xx.extension.name,this.vertexSize=6,Rn??(Rn=new Fp(t.maxTextures)),this.shader=Rn}packAttributes(t,s,i,n,r){const o=r<<16|t.roundPixels&65535,a=t.transform,l=a.a,h=a.b,u=a.c,c=a.d,d=a.tx,f=a.ty,{positions:g,uvs:m}=t,x=t.color,p=t.attributeOffset,y=p+t.attributeSize;for(let v=p;v<y;v++){const _=v*2,S=g[_],b=g[_+1];s[n++]=l*S+u*b+d,s[n++]=c*b+h*S+f,s[n++]=m[_],s[n++]=m[_+1],i[n++]=x,i[n++]=o}}packQuadAttributes(t,s,i,n,r){const o=t.texture,a=t.transform,l=a.a,h=a.b,u=a.c,c=a.d,d=a.tx,f=a.ty,g=t.bounds,m=g.maxX,x=g.minX,p=g.maxY,y=g.minY,v=o.uvs,_=t.color,S=r<<16|t.roundPixels&65535;s[n+0]=l*x+u*y+d,s[n+1]=c*y+h*x+f,s[n+2]=v.x0,s[n+3]=v.y0,i[n+4]=_,i[n+5]=S,s[n+6]=l*m+u*y+d,s[n+7]=c*y+h*m+f,s[n+8]=v.x1,s[n+9]=v.y1,i[n+10]=_,i[n+11]=S,s[n+12]=l*m+u*p+d,s[n+13]=c*p+h*m+f,s[n+14]=v.x2,s[n+15]=v.y2,i[n+16]=_,i[n+17]=S,s[n+18]=l*x+u*p+d,s[n+19]=c*p+h*x+f,s[n+20]=v.x3,s[n+21]=v.y3,i[n+22]=_,i[n+23]=S}_updateMaxTextures(t){this.shader.maxTextures!==t&&(Rn=new Fp(t),this.shader=Rn)}destroy(){this.shader=null,super.destroy()}};Yx.extension={type:[q.Batcher],name:"default"};let LC=Yx;function FC(e,t,s,i,n,r,o,a=null){let l=0;s*=t,n*=r;const h=a.a,u=a.b,c=a.c,d=a.d,f=a.tx,g=a.ty;for(;l<o;){const m=e[s],x=e[s+1];i[n]=h*m+c*x+f,i[n+1]=u*m+d*x+g,n+=r,s+=t,l++}}function jC(e,t,s,i){let n=0;for(t*=s;n<i;)e[t]=0,e[t+1]=0,t+=s,n++}function Kx(e,t,s,i,n){const r=t.a,o=t.b,a=t.c,l=t.d,h=t.tx,u=t.ty;s||(s=0),i||(i=2),n||(n=e.length/i-s);let c=s*i;for(let d=0;d<n;d++){const f=e[c],g=e[c+1];e[c]=r*f+a*g+h,e[c+1]=o*f+l*g+u,c+=i}}const BC=new W;class qx{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,s=t>>16|t&65280|(t&255)<<16,i=this.renderable;return i?tx(s,i.groupColor)+(this.alpha*i.groupAlpha*255<<24):s+(this.alpha*255<<24)}get transform(){var t;return((t=this.renderable)==null?void 0:t.groupTransform)||BC}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const Er={extension:{type:q.ShapeBuilder,name:"circle"},build(e,t){let s,i,n,r,o,a;if(e.type==="circle"){const _=e;if(o=a=_.radius,o<=0)return!1;s=_.x,i=_.y,n=r=0}else if(e.type==="ellipse"){const _=e;if(o=_.halfWidth,a=_.halfHeight,o<=0||a<=0)return!1;s=_.x,i=_.y,n=r=0}else{const _=e,S=_.width/2,b=_.height/2;s=_.x+S,i=_.y+b,o=a=Math.max(0,Math.min(_.radius,Math.min(S,b))),n=S-o,r=b-a}if(n<0||r<0)return!1;const l=Math.ceil(2.3*Math.sqrt(o+a)),h=l*8+(n?4:0)+(r?4:0);if(h===0)return!1;if(l===0)return t[0]=t[6]=s+n,t[1]=t[3]=i+r,t[2]=t[4]=s-n,t[5]=t[7]=i-r,!0;let u=0,c=l*4+(n?2:0)+2,d=c,f=h,g=n+o,m=r,x=s+g,p=s-g,y=i+m;if(t[u++]=x,t[u++]=y,t[--c]=y,t[--c]=p,r){const _=i-m;t[d++]=p,t[d++]=_,t[--f]=_,t[--f]=x}for(let _=1;_<l;_++){const S=Math.PI/2*(_/l),b=n+Math.cos(S)*o,C=r+Math.sin(S)*a,k=s+b,A=s-b,T=i+C,R=i-C;t[u++]=k,t[u++]=T,t[--c]=T,t[--c]=A,t[d++]=A,t[d++]=R,t[--f]=R,t[--f]=k}g=n,m=r+a,x=s+g,p=s-g,y=i+m;const v=i-m;return t[u++]=x,t[u++]=y,t[--f]=v,t[--f]=x,n&&(t[u++]=p,t[u++]=y,t[--f]=v,t[--f]=p),!0},triangulate(e,t,s,i,n,r){if(e.length===0)return;let o=0,a=0;for(let u=0;u<e.length;u+=2)o+=e[u],a+=e[u+1];o/=e.length/2,a/=e.length/2;let l=i;t[l*s]=o,t[l*s+1]=a;const h=l++;for(let u=0;u<e.length;u+=2)t[l*s]=e[u],t[l*s+1]=e[u+1],u>0&&(n[r++]=l,n[r++]=h,n[r++]=l-1),l++;n[r++]=h+1,n[r++]=h,n[r++]=l-1}},VC={...Er,extension:{...Er.extension,name:"ellipse"}},OC={...Er,extension:{...Er.extension,name:"roundedRectangle"}},Qx=1e-4,jp=1e-4;function zC(e){const t=e.length;if(t<6)return 1;let s=0;for(let i=0,n=e[t-2],r=e[t-1];i<t;i+=2){const o=e[i],a=e[i+1];s+=(o-n)*(a+r),n=o,r=a}return s<0?-1:1}function Bp(e,t,s,i,n,r,o,a){const l=e-s*n,h=t-i*n,u=e+s*r,c=t+i*r;let d,f;o?(d=i,f=-s):(d=-i,f=s);const g=l+d,m=h+f,x=u+d,p=c+f;return a.push(g,m),a.push(x,p),2}function Hs(e,t,s,i,n,r,o,a){const l=s-e,h=i-t;let u=Math.atan2(l,h),c=Math.atan2(n-e,r-t);a&&u<c?u+=Math.PI*2:!a&&u>c&&(c+=Math.PI*2);let d=u;const f=c-u,g=Math.abs(f),m=Math.sqrt(l*l+h*h),x=(15*g*Math.sqrt(m)/Math.PI>>0)+1,p=f/x;if(d+=p,a){o.push(e,t),o.push(s,i);for(let y=1,v=d;y<x;y++,v+=p)o.push(e,t),o.push(e+Math.sin(v)*m,t+Math.cos(v)*m);o.push(e,t),o.push(n,r)}else{o.push(s,i),o.push(e,t);for(let y=1,v=d;y<x;y++,v+=p)o.push(e+Math.sin(v)*m,t+Math.cos(v)*m),o.push(e,t);o.push(n,r),o.push(e,t)}return x*2}function GC(e,t,s,i,n,r){const o=Qx;if(e.length===0)return;const a=t;let l=a.alignment;if(t.alignment!==.5){let N=zC(e);l=(l-.5)*N+.5}const h=new Vt(e[0],e[1]),u=new Vt(e[e.length-2],e[e.length-1]),c=i,d=Math.abs(h.x-u.x)<o&&Math.abs(h.y-u.y)<o;if(c){e=e.slice(),d&&(e.pop(),e.pop(),u.set(e[e.length-2],e[e.length-1]));const N=(h.x+u.x)*.5,j=(u.y+h.y)*.5;e.unshift(N,j),e.push(N,j)}const f=n,g=e.length/2;let m=e.length;const x=f.length/2,p=a.width/2,y=p*p,v=a.miterLimit*a.miterLimit;let _=e[0],S=e[1],b=e[2],C=e[3],k=0,A=0,T=-(S-C),R=_-b,$=0,V=0,Y=Math.sqrt(T*T+R*R);T/=Y,R/=Y,T*=p,R*=p;const Se=l,I=(1-Se)*2,D=Se*2;c||(a.cap==="round"?m+=Hs(_-T*(I-D)*.5,S-R*(I-D)*.5,_-T*I,S-R*I,_+T*D,S+R*D,f,!0)+2:a.cap==="square"&&(m+=Bp(_,S,T,R,I,D,!0,f))),f.push(_-T*I,S-R*I),f.push(_+T*D,S+R*D);for(let N=1;N<g-1;++N){_=e[(N-1)*2],S=e[(N-1)*2+1],b=e[N*2],C=e[N*2+1],k=e[(N+1)*2],A=e[(N+1)*2+1],T=-(S-C),R=_-b,Y=Math.sqrt(T*T+R*R),T/=Y,R/=Y,T*=p,R*=p,$=-(C-A),V=b-k,Y=Math.sqrt($*$+V*V),$/=Y,V/=Y,$*=p,V*=p;const j=b-_,Z=S-C,rt=b-k,Be=A-C,Ve=j*rt+Z*Be,ms=Z*rt-Be*j,te=ms<0;if(Math.abs(ms)<.001*Math.abs(Ve)){f.push(b-T*I,C-R*I),f.push(b+T*D,C+R*D),Ve>=0&&(a.join==="round"?m+=Hs(b,C,b-T*I,C-R*I,b-$*I,C-V*I,f,!1)+4:m+=2,f.push(b-$*D,C-V*D),f.push(b+$*I,C+V*I));continue}const zs=(-T+_)*(-R+C)-(-T+b)*(-R+S),Rd=(-$+k)*(-V+C)-(-$+b)*(-V+A),Xr=(j*Rd-rt*zs)/ms,Kr=(Be*zs-Z*Rd)/ms,ol=(Xr-b)*(Xr-b)+(Kr-C)*(Kr-C),Gs=b+(Xr-b)*I,Us=C+(Kr-C)*I,$s=b-(Xr-b)*D,Ws=C-(Kr-C)*D,I1=Math.min(j*j+Z*Z,rt*rt+Be*Be),Nd=te?I:D,L1=I1+Nd*Nd*y;ol<=L1?a.join==="bevel"||ol/y>v?(te?(f.push(Gs,Us),f.push(b+T*D,C+R*D),f.push(Gs,Us),f.push(b+$*D,C+V*D)):(f.push(b-T*I,C-R*I),f.push($s,Ws),f.push(b-$*I,C-V*I),f.push($s,Ws)),m+=2):a.join==="round"?te?(f.push(Gs,Us),f.push(b+T*D,C+R*D),m+=Hs(b,C,b+T*D,C+R*D,b+$*D,C+V*D,f,!0)+4,f.push(Gs,Us),f.push(b+$*D,C+V*D)):(f.push(b-T*I,C-R*I),f.push($s,Ws),m+=Hs(b,C,b-T*I,C-R*I,b-$*I,C-V*I,f,!1)+4,f.push(b-$*I,C-V*I),f.push($s,Ws)):(f.push(Gs,Us),f.push($s,Ws)):(f.push(b-T*I,C-R*I),f.push(b+T*D,C+R*D),a.join==="round"?te?m+=Hs(b,C,b+T*D,C+R*D,b+$*D,C+V*D,f,!0)+2:m+=Hs(b,C,b-T*I,C-R*I,b-$*I,C-V*I,f,!1)+2:a.join==="miter"&&ol/y<=v&&(te?(f.push($s,Ws),f.push($s,Ws)):(f.push(Gs,Us),f.push(Gs,Us)),m+=2),f.push(b-$*I,C-V*I),f.push(b+$*D,C+V*D),m+=2)}_=e[(g-2)*2],S=e[(g-2)*2+1],b=e[(g-1)*2],C=e[(g-1)*2+1],T=-(S-C),R=_-b,Y=Math.sqrt(T*T+R*R),T/=Y,R/=Y,T*=p,R*=p,f.push(b-T*I,C-R*I),f.push(b+T*D,C+R*D),c||(a.cap==="round"?m+=Hs(b-T*(I-D)*.5,C-R*(I-D)*.5,b-T*I,C-R*I,b+T*D,C+R*D,f,!1)+2:a.cap==="square"&&(m+=Bp(b,C,T,R,I,D,!1,f)));const E=jp*jp;for(let N=x;N<m+x-2;++N)_=f[N*2],S=f[N*2+1],b=f[(N+1)*2],C=f[(N+1)*2+1],k=f[(N+2)*2],A=f[(N+2)*2+1],!(Math.abs(_*(C-A)+b*(A-S)+k*(S-C))<E)&&r.push(N,N+1,N+2)}function UC(e,t,s,i){const n=Qx;if(e.length===0)return;const r=e[0],o=e[1],a=e[e.length-2],l=e[e.length-1],h=t||Math.abs(r-a)<n&&Math.abs(o-l)<n,u=s,c=e.length/2,d=u.length/2;for(let f=0;f<c;f++)u.push(e[f*2]),u.push(e[f*2+1]);for(let f=0;f<c-1;f++)i.push(d+f,d+f+1);h&&i.push(d+c-1,d)}function Zx(e,t,s,i,n,r,o){const a=kb(e,t,2);if(!a)return;for(let h=0;h<a.length;h+=3)r[o++]=a[h]+n,r[o++]=a[h+1]+n,r[o++]=a[h+2]+n;let l=n*i;for(let h=0;h<e.length;h+=2)s[l]=e[h],s[l+1]=e[h+1],l+=i}const $C=[],WC={extension:{type:q.ShapeBuilder,name:"polygon"},build(e,t){for(let s=0;s<e.points.length;s++)t[s]=e.points[s];return!0},triangulate(e,t,s,i,n,r){Zx(e,$C,t,s,i,n,r)}},HC={extension:{type:q.ShapeBuilder,name:"rectangle"},build(e,t){const s=e,i=s.x,n=s.y,r=s.width,o=s.height;return r>0&&o>0?(t[0]=i,t[1]=n,t[2]=i+r,t[3]=n,t[4]=i+r,t[5]=n+o,t[6]=i,t[7]=n+o,!0):!1},triangulate(e,t,s,i,n,r){let o=0;i*=s,t[i+o]=e[0],t[i+o+1]=e[1],o+=s,t[i+o]=e[2],t[i+o+1]=e[3],o+=s,t[i+o]=e[6],t[i+o+1]=e[7],o+=s,t[i+o]=e[4],t[i+o+1]=e[5],o+=s;const a=i/s;n[r++]=a,n[r++]=a+1,n[r++]=a+2,n[r++]=a+1,n[r++]=a+3,n[r++]=a+2}},YC={extension:{type:q.ShapeBuilder,name:"triangle"},build(e,t){return t[0]=e.x,t[1]=e.y,t[2]=e.x2,t[3]=e.y2,t[4]=e.x3,t[5]=e.y3,!0},triangulate(e,t,s,i,n,r){let o=0;i*=s,t[i+o]=e[0],t[i+o+1]=e[1],o+=s,t[i+o]=e[2],t[i+o+1]=e[3],o+=s,t[i+o]=e[4],t[i+o+1]=e[5];const a=i/s;n[r++]=a,n[r++]=a+1,n[r++]=a+2}},XC=new W,KC=new vt;function qC(e,t,s,i){const n=t.matrix?e.copyFrom(t.matrix).invert():e.identity();if(t.textureSpace==="local"){const o=s.getBounds(KC);t.width&&o.pad(t.width);const{x:a,y:l}=o,h=1/o.width,u=1/o.height,c=-a*h,d=-l*u,f=n.a,g=n.b,m=n.c,x=n.d;n.a*=h,n.b*=h,n.c*=u,n.d*=u,n.tx=c*f+d*m+n.tx,n.ty=c*g+d*x+n.ty}else n.translate(t.texture.frame.x,t.texture.frame.y),n.scale(1/t.texture.source.width,1/t.texture.source.height);const r=t.texture.source.style;return!(t.fill instanceof ds)&&r.addressMode==="clamp-to-edge"&&(r.addressMode="repeat",r.update()),i&&n.append(XC.copyFrom(i).invert()),n}const Ja={};_e.handleByMap(q.ShapeBuilder,Ja);_e.add(HC,WC,YC,Er,VC,OC);const QC=new vt,ZC=new W;function JC(e,t){const{geometryData:s,batches:i}=t;i.length=0,s.indices.length=0,s.vertices.length=0,s.uvs.length=0;for(let n=0;n<e.instructions.length;n++){const r=e.instructions[n];if(r.action==="texture")tk(r.data,i,s);else if(r.action==="fill"||r.action==="stroke"){const o=r.action==="stroke",a=r.data.path.shapePath,l=r.data.style,h=r.data.hole;o&&h&&Vp(h.shapePath,l,!0,i,s),h&&(a.shapePrimitives[a.shapePrimitives.length-1].holes=h.shapePath.shapePrimitives),Vp(a,l,o,i,s)}}}function tk(e,t,s){const i=[],n=Ja.rectangle,r=QC;r.x=e.dx,r.y=e.dy,r.width=e.dw,r.height=e.dh;const o=e.transform;if(!n.build(r,i))return;const{vertices:a,uvs:l,indices:h}=s,u=h.length,c=a.length/2;o&&Kx(i,o),n.triangulate(i,a,2,c,h,u);const d=e.image,f=d.uvs;l.push(f.x0,f.y0,f.x1,f.y1,f.x3,f.y3,f.x2,f.y2);const g=xe.get(qx);g.indexOffset=u,g.indexSize=h.length-u,g.attributeOffset=c,g.attributeSize=a.length/2-c,g.baseColor=e.style,g.alpha=e.alpha,g.texture=d,g.geometryData=s,t.push(g)}function Vp(e,t,s,i,n){const{vertices:r,uvs:o,indices:a}=n;e.shapePrimitives.forEach(({shape:l,transform:h,holes:u})=>{const c=[],d=Ja[l.type];if(!d.build(l,c))return;const f=a.length,g=r.length/2;let m="triangle-list";if(h&&Kx(c,h),s){const v=l.closePath??!0,_=t;_.pixelLine?(UC(c,v,r,a),m="line-list"):GC(c,_,!1,v,r,a)}else if(u){const v=[],_=c.slice();ek(u).forEach(b=>{v.push(_.length/2),_.push(...b)}),Zx(_,v,r,2,g,a,f)}else d.triangulate(c,r,2,g,a,f);const x=o.length/2,p=t.texture;if(p!==Q.WHITE){const v=qC(ZC,t,l,h);FC(r,2,g,o,x,2,r.length/2-g,v)}else jC(o,x,2,r.length/2-g);const y=xe.get(qx);y.indexOffset=f,y.indexSize=a.length-f,y.attributeOffset=g,y.attributeSize=r.length/2-g,y.baseColor=t.color,y.alpha=t.alpha,y.texture=p,y.geometryData=n,y.topology=m,i.push(y)})}function ek(e){const t=[];for(let s=0;s<e.length;s++){const i=e[s].shape,n=[];Ja[i.type].build(i,n)&&t.push(n)}return t}class sk{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class ik{constructor(){this.instructions=new nx}init(t){const s=t.maxTextures;this.batcher?this.batcher._updateMaxTextures(s):this.batcher=new LC({maxTextures:s}),this.instructions.reset()}get geometry(){return X(XS,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const Hc=class Su{constructor(t){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=t,t.renderableGC.addManagedHash(this,"_gpuContextHash"),t.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(t){Su.defaultOptions.bezierSmoothness=(t==null?void 0:t.bezierSmoothness)??Su.defaultOptions.bezierSmoothness}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let s=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){s?this._cleanGraphicsContextData(t):s=this._initContext(t),JC(t,s);const i=t.batchMode;t.customShader||i==="no-batch"?s.isBatchable=!1:i==="auto"?s.isBatchable=s.geometryData.vertices.length<400:s.isBatchable=!0,t.dirty=!1}return s}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_initContextRenderData(t){const s=xe.get(ik,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:i,geometryData:n}=this._gpuContextHash[t.uid],r=n.vertices.length,o=n.indices.length;for(let u=0;u<i.length;u++)i[u].applyTransform=!1;const a=s.batcher;a.ensureAttributeBuffer(r),a.ensureIndexBuffer(o),a.begin();for(let u=0;u<i.length;u++){const c=i[u];a.add(c)}a.finish(s.instructions);const l=a.geometry;l.indexBuffer.setDataWithSize(a.indexBuffer,a.indexSize,!0),l.buffers[0].setDataWithSize(a.attributeBuffer.float32View,a.attributeSize,!0);const h=a.batches;for(let u=0;u<h.length;u++){const c=h[u];c.bindGroup=Hb(c.textures.textures,c.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[t.uid]=s,s}_initContext(t){const s=new sk;return s.context=t,this._gpuContextHash[t.uid]=s,t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){const s=this._gpuContextHash[t.uid];s.isBatchable||this._graphicsDataContextHash[t.uid]&&(xe.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),s.batches&&s.batches.forEach(i=>{xe.return(i)})}destroy(){for(const t in this._gpuContextHash)this._gpuContextHash[t]&&this.onGraphicsContextDestroy(this._gpuContextHash[t].context);this._gpuContextHash={},this._graphicsDataContextHash={},this._renderer=null}};Hc.extension={type:[q.WebGLSystem,q.WebGPUSystem,q.CanvasSystem],name:"graphicsContext"};Hc.defaultOptions={bezierSmoothness:.5};let Jx=Hc;const nk=8,Po=11920929e-14,rk=1;function tv(e,t,s,i,n,r,o,a,l,h){const c=Math.min(.99,Math.max(0,h??Jx.defaultOptions.bezierSmoothness));let d=(rk-c)/1;return d*=d,ok(t,s,i,n,r,o,a,l,e,d),e}function ok(e,t,s,i,n,r,o,a,l,h){bu(e,t,s,i,n,r,o,a,l,h,0),l.push(o,a)}function bu(e,t,s,i,n,r,o,a,l,h,u){if(u>nk)return;const c=(e+s)/2,d=(t+i)/2,f=(s+n)/2,g=(i+r)/2,m=(n+o)/2,x=(r+a)/2,p=(c+f)/2,y=(d+g)/2,v=(f+m)/2,_=(g+x)/2,S=(p+v)/2,b=(y+_)/2;if(u>0){let C=o-e,k=a-t;const A=Math.abs((s-o)*k-(i-a)*C),T=Math.abs((n-o)*k-(r-a)*C);if(A>Po&&T>Po){if((A+T)*(A+T)<=h*(C*C+k*k)){l.push(S,b);return}}else if(A>Po){if(A*A<=h*(C*C+k*k)){l.push(S,b);return}}else if(T>Po){if(T*T<=h*(C*C+k*k)){l.push(S,b);return}}else if(C=S-(e+o)/2,k=b-(t+a)/2,C*C+k*k<=h){l.push(S,b);return}}bu(e,t,c,d,p,y,S,b,l,h,u+1),bu(S,b,v,_,m,x,o,a,l,h,u+1)}const ak=8,lk=11920929e-14,hk=1;function uk(e,t,s,i,n,r,o,a){const h=Math.min(.99,Math.max(0,a??Jx.defaultOptions.bezierSmoothness));let u=(hk-h)/1;return u*=u,ck(t,s,i,n,r,o,e,u),e}function ck(e,t,s,i,n,r,o,a){Cu(o,e,t,s,i,n,r,a,0),o.push(n,r)}function Cu(e,t,s,i,n,r,o,a,l){if(l>ak)return;const h=(t+i)/2,u=(s+n)/2,c=(i+r)/2,d=(n+o)/2,f=(h+c)/2,g=(u+d)/2;let m=r-t,x=o-s;const p=Math.abs((i-r)*x-(n-o)*m);if(p>lk){if(p*p<=a*(m*m+x*x)){e.push(f,g);return}}else if(m=f-(t+r)/2,x=g-(s+o)/2,m*m+x*x<=a){e.push(f,g);return}Cu(e,t,s,h,u,f,g,a,l+1),Cu(e,f,g,c,d,r,o,a,l+1)}function ev(e,t,s,i,n,r,o,a){let l=Math.abs(n-r);(!o&&n>r||o&&r>n)&&(l=2*Math.PI-l),a||(a=Math.max(6,Math.floor(6*Math.pow(i,1/3)*(l/Math.PI)))),a=Math.max(a,3);let h=l/a,u=n;h*=o?-1:1;for(let c=0;c<a+1;c++){const d=Math.cos(u),f=Math.sin(u),g=t+d*i,m=s+f*i;e.push(g,m),u+=h}}function dk(e,t,s,i,n,r){const o=e[e.length-2],l=e[e.length-1]-s,h=o-t,u=n-s,c=i-t,d=Math.abs(l*c-h*u);if(d<1e-8||r===0){(e[e.length-2]!==t||e[e.length-1]!==s)&&e.push(t,s);return}const f=l*l+h*h,g=u*u+c*c,m=l*u+h*c,x=r*Math.sqrt(f)/d,p=r*Math.sqrt(g)/d,y=x*m/f,v=p*m/g,_=x*c+p*h,S=x*u+p*l,b=h*(p+y),C=l*(p+y),k=c*(x+v),A=u*(x+v),T=Math.atan2(C-S,b-_),R=Math.atan2(A-S,k-_);ev(e,_+t,S+s,r,T,R,h*u>c*l)}const ir=Math.PI*2,Jl={centerX:0,centerY:0,ang1:0,ang2:0},th=({x:e,y:t},s,i,n,r,o,a,l)=>{e*=s,t*=i;const h=n*e-r*t,u=r*e+n*t;return l.x=h+o,l.y=u+a,l};function fk(e,t){const s=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),i=t===1.5707963267948966?.551915024494:s,n=Math.cos(e),r=Math.sin(e),o=Math.cos(e+t),a=Math.sin(e+t);return[{x:n-r*i,y:r+n*i},{x:o+a*i,y:a-o*i},{x:o,y:a}]}const Op=(e,t,s,i)=>{const n=e*i-t*s<0?-1:1;let r=e*s+t*i;return r>1&&(r=1),r<-1&&(r=-1),n*Math.acos(r)},pk=(e,t,s,i,n,r,o,a,l,h,u,c,d)=>{const f=Math.pow(n,2),g=Math.pow(r,2),m=Math.pow(u,2),x=Math.pow(c,2);let p=f*g-f*x-g*m;p<0&&(p=0),p/=f*x+g*m,p=Math.sqrt(p)*(o===a?-1:1);const y=p*n/r*c,v=p*-r/n*u,_=h*y-l*v+(e+s)/2,S=l*y+h*v+(t+i)/2,b=(u-y)/n,C=(c-v)/r,k=(-u-y)/n,A=(-c-v)/r,T=Op(1,0,b,C);let R=Op(b,C,k,A);a===0&&R>0&&(R-=ir),a===1&&R<0&&(R+=ir),d.centerX=_,d.centerY=S,d.ang1=T,d.ang2=R};function mk(e,t,s,i,n,r,o,a=0,l=0,h=0){if(r===0||o===0)return;const u=Math.sin(a*ir/360),c=Math.cos(a*ir/360),d=c*(t-i)/2+u*(s-n)/2,f=-u*(t-i)/2+c*(s-n)/2;if(d===0&&f===0)return;r=Math.abs(r),o=Math.abs(o);const g=Math.pow(d,2)/Math.pow(r,2)+Math.pow(f,2)/Math.pow(o,2);g>1&&(r*=Math.sqrt(g),o*=Math.sqrt(g)),pk(t,s,i,n,r,o,l,h,u,c,d,f,Jl);let{ang1:m,ang2:x}=Jl;const{centerX:p,centerY:y}=Jl;let v=Math.abs(x)/(ir/4);Math.abs(1-v)<1e-7&&(v=1);const _=Math.max(Math.ceil(v),1);x/=_;let S=e[e.length-2],b=e[e.length-1];const C={x:0,y:0};for(let k=0;k<_;k++){const A=fk(m,x),{x:T,y:R}=th(A[0],r,o,c,u,p,y,C),{x:$,y:V}=th(A[1],r,o,c,u,p,y,C),{x:Y,y:Se}=th(A[2],r,o,c,u,p,y,C);tv(e,S,b,T,R,$,V,Y,Se),S=Y,b=Se,m+=x}}function gk(e,t,s){const i=(o,a)=>{const l=a.x-o.x,h=a.y-o.y,u=Math.sqrt(l*l+h*h),c=l/u,d=h/u;return{len:u,nx:c,ny:d}},n=(o,a)=>{o===0?e.moveTo(a.x,a.y):e.lineTo(a.x,a.y)};let r=t[t.length-1];for(let o=0;o<t.length;o++){const a=t[o%t.length],l=a.radius??s;if(l<=0){n(o,a),r=a;continue}const h=t[(o+1)%t.length],u=i(a,r),c=i(a,h);if(u.len<1e-4||c.len<1e-4){n(o,a),r=a;continue}let d=Math.asin(u.nx*c.ny-u.ny*c.nx),f=1,g=!1;u.nx*c.nx-u.ny*-c.ny<0?d<0?d=Math.PI+d:(d=Math.PI-d,f=-1,g=!0):d>0&&(f=-1,g=!0);const m=d/2;let x,p=Math.abs(Math.cos(m)*l/Math.sin(m));p>Math.min(u.len/2,c.len/2)?(p=Math.min(u.len/2,c.len/2),x=Math.abs(p*Math.sin(m)/Math.cos(m))):x=l;const y=a.x+c.nx*p+-c.ny*x*f,v=a.y+c.ny*p+c.nx*x*f,_=Math.atan2(u.ny,u.nx)+Math.PI/2*f,S=Math.atan2(c.ny,c.nx)-Math.PI/2*f;o===0&&e.moveTo(y+Math.cos(_)*x,v+Math.sin(_)*x),e.arc(y,v,x,_,S,g),r=a}}function yk(e,t,s,i){const n=(a,l)=>Math.sqrt((a.x-l.x)**2+(a.y-l.y)**2),r=(a,l,h)=>({x:a.x+(l.x-a.x)*h,y:a.y+(l.y-a.y)*h}),o=t.length;for(let a=0;a<o;a++){const l=t[(a+1)%o],h=l.radius??s;if(h<=0){a===0?e.moveTo(l.x,l.y):e.lineTo(l.x,l.y);continue}const u=t[a],c=t[(a+2)%o],d=n(u,l);let f;if(d<1e-4)f=l;else{const x=Math.min(d/2,h);f=r(l,u,x/d)}const g=n(c,l);let m;if(g<1e-4)m=l;else{const x=Math.min(g/2,h);m=r(l,c,x/g)}a===0?e.moveTo(f.x,f.y):e.lineTo(f.x,f.y),e.quadraticCurveTo(l.x,l.y,m.x,m.y,i)}}const xk=new vt;class vk{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Ie,this._graphicsPath2D=t,this.signed=t.checkForHoles}moveTo(t,s){return this.startPoly(t,s),this}lineTo(t,s){this._ensurePoly();const i=this._currentPoly.points,n=i[i.length-2],r=i[i.length-1];return(n!==t||r!==s)&&i.push(t,s),this}arc(t,s,i,n,r,o){this._ensurePoly(!1);const a=this._currentPoly.points;return ev(a,t,s,i,n,r,o),this}arcTo(t,s,i,n,r){this._ensurePoly();const o=this._currentPoly.points;return dk(o,t,s,i,n,r),this}arcToSvg(t,s,i,n,r,o,a){const l=this._currentPoly.points;return mk(l,this._currentPoly.lastX,this._currentPoly.lastY,o,a,t,s,i,n,r),this}bezierCurveTo(t,s,i,n,r,o,a){this._ensurePoly();const l=this._currentPoly;return tv(this._currentPoly.points,l.lastX,l.lastY,t,s,i,n,r,o,a),this}quadraticCurveTo(t,s,i,n,r){this._ensurePoly();const o=this._currentPoly;return uk(this._currentPoly.points,o.lastX,o.lastY,t,s,i,n,r),this}closePath(){return this.endPoly(!0),this}addPath(t,s){this.endPoly(),s&&!s.isIdentity()&&(t=t.clone(!0),t.transform(s));const i=this.shapePrimitives,n=i.length;for(let r=0;r<t.instructions.length;r++){const o=t.instructions[r];this[o.action](...o.data)}if(t.checkForHoles&&i.length-n>1){let r=null;for(let o=n;o<i.length;o++){const a=i[o];if(a.shape.type==="polygon"){const l=a.shape,h=r==null?void 0:r.shape;h&&h.containsPolygon(l)?(r.holes||(r.holes=[]),r.holes.push(a),i.copyWithin(o,o+1),i.length--,o--):r=a}}}return this}finish(t=!1){this.endPoly(t)}rect(t,s,i,n,r){return this.drawShape(new vt(t,s,i,n),r),this}circle(t,s,i,n){return this.drawShape(new Uc(t,s,i),n),this}poly(t,s,i){const n=new er(t);return n.closePath=s,this.drawShape(n,i),this}regularPoly(t,s,i,n,r=0,o){n=Math.max(n|0,3);const a=-1*Math.PI/2+r,l=Math.PI*2/n,h=[];for(let u=0;u<n;u++){const c=a-u*l;h.push(t+i*Math.cos(c),s+i*Math.sin(c))}return this.poly(h,!0,o),this}roundPoly(t,s,i,n,r,o=0,a){if(n=Math.max(n|0,3),r<=0)return this.regularPoly(t,s,i,n,o);const l=i*Math.sin(Math.PI/n)-.001;r=Math.min(r,l);const h=-1*Math.PI/2+o,u=Math.PI*2/n,c=(n-2)*Math.PI/n/2;for(let d=0;d<n;d++){const f=d*u+h,g=t+i*Math.cos(f),m=s+i*Math.sin(f),x=f+Math.PI+c,p=f-Math.PI-c,y=g+r*Math.cos(x),v=m+r*Math.sin(x),_=g+r*Math.cos(p),S=m+r*Math.sin(p);d===0?this.moveTo(y,v):this.lineTo(y,v),this.quadraticCurveTo(g,m,_,S,a)}return this.closePath()}roundShape(t,s,i=!1,n){return t.length<3?this:(i?yk(this,t,s,n):gk(this,t,s),this.closePath())}filletRect(t,s,i,n,r){if(r===0)return this.rect(t,s,i,n);const o=Math.min(i,n)/2,a=Math.min(o,Math.max(-o,r)),l=t+i,h=s+n,u=a<0?-a:0,c=Math.abs(a);return this.moveTo(t,s+c).arcTo(t+u,s+u,t+c,s,c).lineTo(l-c,s).arcTo(l-u,s+u,l,s+c,c).lineTo(l,h-c).arcTo(l-u,h-u,t+i-c,h,c).lineTo(t+c,h).arcTo(t+u,h-u,t,h-c,c).closePath()}chamferRect(t,s,i,n,r,o){if(r<=0)return this.rect(t,s,i,n);const a=Math.min(r,Math.min(i,n)/2),l=t+i,h=s+n,u=[t+a,s,l-a,s,l,s+a,l,h-a,l-a,h,t+a,h,t,h-a,t,s+a];for(let c=u.length-1;c>=2;c-=2)u[c]===u[c-2]&&u[c-1]===u[c-3]&&u.splice(c-1,2);return this.poly(u,!0,o)}ellipse(t,s,i,n,r){return this.drawShape(new $c(t,s,i,n),r),this}roundRect(t,s,i,n,r,o){return this.drawShape(new Wc(t,s,i,n,r),o),this}drawShape(t,s){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:s}),this}startPoly(t,s){let i=this._currentPoly;return i&&this.endPoly(),i=new er,i.points.push(t,s),this._currentPoly=i,this}endPoly(t=!1){const s=this._currentPoly;return s&&s.points.length>2&&(s.closePath=t,this.shapePrimitives.push({shape:s})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new er,t)){const s=this.shapePrimitives[this.shapePrimitives.length-1];if(s){let i=s.shape.x,n=s.shape.y;if(s.transform&&!s.transform.isIdentity()){const r=s.transform,o=i;i=r.a*i+r.c*n+r.tx,n=r.b*o+r.d*n+r.ty}this._currentPoly.points.push(i,n)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let s=0;s<t.instructions.length;s++){const i=t.instructions[s];this[i.action](...i.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const s=this.shapePrimitives;for(let i=0;i<s.length;i++){const n=s[i],r=n.shape.getBounds(xk);n.transform?t.addRect(r,n.transform):t.addRect(r)}return t}}class rs{constructor(t,s=!1){this.instructions=[],this.uid=gt("graphicsPath"),this._dirty=!0,this.checkForHoles=s,typeof t=="string"?Gb(t,this):this.instructions=(t==null?void 0:t.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new vk(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,s){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,s]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,s,i,n,r){const o=this.instructions[this.instructions.length-1],a=this.getLastPoint(Vt.shared);let l=0,h=0;if(!o||o.action!=="bezierCurveTo")l=a.x,h=a.y;else{l=o.data[2],h=o.data[3];const u=a.x,c=a.y;l=u+(u-l),h=c+(c-h)}return this.instructions.push({action:"bezierCurveTo",data:[l,h,t,s,i,n,r]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,s,i){const n=this.instructions[this.instructions.length-1],r=this.getLastPoint(Vt.shared);let o=0,a=0;if(!n||n.action!=="quadraticCurveTo")o=r.x,a=r.y;else{o=n.data[0],a=n.data[1];const l=r.x,h=r.y;o=l+(l-o),a=h+(h-a)}return this.instructions.push({action:"quadraticCurveTo",data:[o,a,t,s,i]}),this._dirty=!0,this}rect(t,s,i,n,r){return this.instructions.push({action:"rect",data:[t,s,i,n,r]}),this._dirty=!0,this}circle(t,s,i,n){return this.instructions.push({action:"circle",data:[t,s,i,n]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,s,i,n,r,o,a){r||(r=n/2);const l=-1*Math.PI/2+o,h=i*2,u=Math.PI*2/h,c=[];for(let d=0;d<h;d++){const f=d%2?r:n,g=d*u+l;c.push(t+f*Math.cos(g),s+f*Math.sin(g))}return this.poly(c,!0,a),this}clone(t=!1){const s=new rs;if(s.checkForHoles=this.checkForHoles,!t)s.instructions=this.instructions.slice();else for(let i=0;i<this.instructions.length;i++){const n=this.instructions[i];s.instructions.push({action:n.action,data:n.data.slice()})}return s}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const s=t.a,i=t.b,n=t.c,r=t.d,o=t.tx,a=t.ty;let l=0,h=0,u=0,c=0,d=0,f=0,g=0,m=0;for(let x=0;x<this.instructions.length;x++){const p=this.instructions[x],y=p.data;switch(p.action){case"moveTo":case"lineTo":l=y[0],h=y[1],y[0]=s*l+n*h+o,y[1]=i*l+r*h+a;break;case"bezierCurveTo":u=y[0],c=y[1],d=y[2],f=y[3],l=y[4],h=y[5],y[0]=s*u+n*c+o,y[1]=i*u+r*c+a,y[2]=s*d+n*f+o,y[3]=i*d+r*f+a,y[4]=s*l+n*h+o,y[5]=i*l+r*h+a;break;case"quadraticCurveTo":u=y[0],c=y[1],l=y[2],h=y[3],y[0]=s*u+n*c+o,y[1]=i*u+r*c+a,y[2]=s*l+n*h+o,y[3]=i*l+r*h+a;break;case"arcToSvg":l=y[5],h=y[6],g=y[0],m=y[1],y[0]=s*g+n*m,y[1]=i*g+r*m,y[5]=s*l+n*h+o,y[6]=i*l+r*h+a;break;case"circle":y[4]=Nn(y[3],t);break;case"rect":y[4]=Nn(y[4],t);break;case"ellipse":y[8]=Nn(y[8],t);break;case"roundRect":y[5]=Nn(y[5],t);break;case"addPath":y[0].transform(t);break;case"poly":y[2]=Nn(y[2],t);break;default:Wt("unknown transform action",p.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let s=this.instructions.length-1,i=this.instructions[s];if(!i)return t.x=0,t.y=0,t;for(;i.action==="closePath";){if(s--,s<0)return t.x=0,t.y=0,t;i=this.instructions[s]}switch(i.action){case"moveTo":case"lineTo":t.x=i.data[0],t.y=i.data[1];break;case"quadraticCurveTo":t.x=i.data[2],t.y=i.data[3];break;case"bezierCurveTo":t.x=i.data[4],t.y=i.data[5];break;case"arc":case"arcToSvg":t.x=i.data[5],t.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(t);break}return t}}function Nn(e,t){return e?e.prepend(t):t.clone()}function dt(e,t,s){const i=e.getAttribute(t);return i?Number(i):s}function wk(e,t){const s=e.querySelectorAll("defs");for(let i=0;i<s.length;i++){const n=s[i];for(let r=0;r<n.children.length;r++){const o=n.children[r];switch(o.nodeName.toLowerCase()){case"lineargradient":t.defs[o.id]=_k(o);break;case"radialgradient":t.defs[o.id]=Sk();break}}}}function _k(e){const t=dt(e,"x1",0),s=dt(e,"y1",0),i=dt(e,"x2",1),n=dt(e,"y2",0),r=e.getAttribute("gradientUnits")||"objectBoundingBox",o=new ds(t,s,i,n,r==="objectBoundingBox"?"local":"global");for(let a=0;a<e.children.length;a++){const l=e.children[a],h=dt(l,"offset",0),u=kt.shared.setValue(l.getAttribute("stop-color")).toNumber();o.addColorStop(h,u)}return o}function Sk(e){return Wt("[SVG Parser] Radial gradients are not yet supported"),new ds(0,0,1,0)}function zp(e){const t=e.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return t?t[1]:""}const Gp={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function sv(e,t){const s=e.getAttribute("style"),i={},n={},r={strokeStyle:i,fillStyle:n,useFill:!1,useStroke:!1};for(const o in Gp){const a=e.getAttribute(o);a&&Up(t,r,o,a.trim())}if(s){const o=s.split(";");for(let a=0;a<o.length;a++){const l=o[a].trim(),[h,u]=l.split(":");Gp[h]&&Up(t,r,h,u.trim())}}return{strokeStyle:r.useStroke?i:null,fillStyle:r.useFill?n:null,useFill:r.useFill,useStroke:r.useStroke}}function Up(e,t,s,i){switch(s){case"stroke":if(i!=="none"){if(i.startsWith("url(")){const n=zp(i);t.strokeStyle.fill=e.defs[n]}else t.strokeStyle.color=kt.shared.setValue(i).toNumber();t.useStroke=!0}break;case"stroke-width":t.strokeStyle.width=Number(i);break;case"fill":if(i!=="none"){if(i.startsWith("url(")){const n=zp(i);t.fillStyle.fill=e.defs[n]}else t.fillStyle.color=kt.shared.setValue(i).toNumber();t.useFill=!0}break;case"fill-opacity":t.fillStyle.alpha=Number(i);break;case"stroke-opacity":t.strokeStyle.alpha=Number(i);break;case"opacity":t.fillStyle.alpha=Number(i),t.strokeStyle.alpha=Number(i);break}}function bk(e){if(e.length<=2)return!0;const t=e.map(a=>a.area).sort((a,l)=>l-a),[s,i]=t,n=t[t.length-1],r=s/i,o=i/n;return!(r>3&&o<2)}function Ck(e){return e.split(/(?=[Mm])/).filter(i=>i.trim().length>0)}function kk(e){const t=e.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!t||t.length<4)return 0;const s=t.map(Number),i=[],n=[];for(let u=0;u<s.length;u+=2)u+1<s.length&&(i.push(s[u]),n.push(s[u+1]));if(i.length===0||n.length===0)return 0;const r=Math.min(...i),o=Math.max(...i),a=Math.min(...n),l=Math.max(...n);return(o-r)*(l-a)}function $p(e,t){const s=new rs(e,!1);for(const i of s.instructions)t.instructions.push(i)}function Tk(e,t){if(typeof e=="string"){const o=document.createElement("div");o.innerHTML=e.trim(),e=o.querySelector("svg")}const s={context:t,defs:{},path:new rs};wk(e,s);const i=e.children,{fillStyle:n,strokeStyle:r}=sv(e,s);for(let o=0;o<i.length;o++){const a=i[o];a.nodeName.toLowerCase()!=="defs"&&iv(a,s,n,r)}return t}function iv(e,t,s,i){const n=e.children,{fillStyle:r,strokeStyle:o}=sv(e,t);r&&s?s={...s,...r}:r&&(s=r),o&&i?i={...i,...o}:o&&(i=o);const a=!s&&!i;a&&(s={color:0});let l,h,u,c,d,f,g,m,x,p,y,v,_,S,b,C,k;switch(e.nodeName.toLowerCase()){case"path":{S=e.getAttribute("d");const A=e.getAttribute("fill-rule"),T=Ck(S),R=A==="evenodd",$=T.length>1;if(R&&$){const Y=T.map(I=>({path:I,area:kk(I)}));if(Y.sort((I,D)=>D.area-I.area),T.length>3||!bk(Y))for(let I=0;I<Y.length;I++){const D=Y[I],E=I===0;t.context.beginPath();const N=new rs(void 0,!0);$p(D.path,N),t.context.path(N),E?(s&&t.context.fill(s),i&&t.context.stroke(i)):t.context.cut()}else for(let I=0;I<Y.length;I++){const D=Y[I],E=I%2===1;t.context.beginPath();const N=new rs(void 0,!0);$p(D.path,N),t.context.path(N),E?t.context.cut():(s&&t.context.fill(s),i&&t.context.stroke(i))}}else{const Y=A?A==="evenodd":!0;b=new rs(S,Y),t.context.path(b),s&&t.context.fill(s),i&&t.context.stroke(i)}break}case"circle":g=dt(e,"cx",0),m=dt(e,"cy",0),x=dt(e,"r",0),t.context.ellipse(g,m,x,x),s&&t.context.fill(s),i&&t.context.stroke(i);break;case"rect":l=dt(e,"x",0),h=dt(e,"y",0),C=dt(e,"width",0),k=dt(e,"height",0),p=dt(e,"rx",0),y=dt(e,"ry",0),p||y?t.context.roundRect(l,h,C,k,p||y):t.context.rect(l,h,C,k),s&&t.context.fill(s),i&&t.context.stroke(i);break;case"ellipse":g=dt(e,"cx",0),m=dt(e,"cy",0),p=dt(e,"rx",0),y=dt(e,"ry",0),t.context.beginPath(),t.context.ellipse(g,m,p,y),s&&t.context.fill(s),i&&t.context.stroke(i);break;case"line":u=dt(e,"x1",0),c=dt(e,"y1",0),d=dt(e,"x2",0),f=dt(e,"y2",0),t.context.beginPath(),t.context.moveTo(u,c),t.context.lineTo(d,f),i&&t.context.stroke(i);break;case"polygon":_=e.getAttribute("points"),v=_.match(/\d+/g).map(A=>parseInt(A,10)),t.context.poly(v,!0),s&&t.context.fill(s),i&&t.context.stroke(i);break;case"polyline":_=e.getAttribute("points"),v=_.match(/\d+/g).map(A=>parseInt(A,10)),t.context.poly(v,!1),i&&t.context.stroke(i);break;case"g":case"svg":break;default:{Wt(`[SVG parser] <${e.nodeName}> elements unsupported`);break}}a&&(s=null);for(let A=0;A<n.length;A++)iv(n[A],t,s,i)}function Pk(e){return kt.isColorLike(e)}function Wp(e){return e instanceof Za}function Hp(e){return e instanceof ds}function Mk(e){return e instanceof Q}function Ak(e,t,s){const i=kt.shared.setValue(t??0);return e.color=i.toNumber(),e.alpha=i.alpha===1?s.alpha:i.alpha,e.texture=Q.WHITE,{...s,...e}}function Ek(e,t,s){return e.texture=t,{...s,...e}}function Yp(e,t,s){return e.fill=t,e.color=16777215,e.texture=t.texture,e.matrix=t.transform,{...s,...e}}function Xp(e,t,s){return t.buildGradient(),e.fill=t,e.color=16777215,e.texture=t.texture,e.matrix=t.transform,e.textureSpace=t.textureSpace,{...s,...e}}function Rk(e,t){const s={...t,...e},i=kt.shared.setValue(s.color);return s.alpha*=i.alpha,s.color=i.toNumber(),s}function oi(e,t){if(e==null)return null;const s={},i=e;return Pk(e)?Ak(s,e,t):Mk(e)?Ek(s,e,t):Wp(e)?Yp(s,e,t):Hp(e)?Xp(s,e,t):i.fill&&Wp(i.fill)?Yp(i,i.fill,t):i.fill&&Hp(i.fill)?Xp(i,i.fill,t):Rk(i,t)}function Ca(e,t){const{width:s,alignment:i,miterLimit:n,cap:r,join:o,pixelLine:a,...l}=t,h=oi(e,l);return h?{width:s,alignment:i,miterLimit:n,cap:r,join:o,pixelLine:a,...h}:null}const Nk=new Vt,Kp=new W,Yc=class Ge extends qe{constructor(){super(...arguments),this.uid=gt("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new rs,this._transform=new W,this._fillStyle={...Ge.defaultFillStyle},this._strokeStyle={...Ge.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Ie,this._boundsDirty=!0}clone(){const t=new Ge;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=oi(t,Ge.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=Ca(t,Ge.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=oi(t,Ge.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=oi(t,Ge.defaultStrokeStyle),this}texture(t,s,i,n,r,o){return this.instructions.push({action:"texture",data:{image:t,dx:i||0,dy:n||0,dw:r||t.frame.width,dh:o||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:s?kt.shared.setValue(s).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new rs,this}fill(t,s){let i;const n=this.instructions[this.instructions.length-1];return this._tick===0&&(n==null?void 0:n.action)==="stroke"?i=n.data.path:i=this._activePath.clone(),i?(t!=null&&(s!==void 0&&typeof t=="number"&&(X(mt,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:s}),this._fillStyle=oi(t,Ge.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:s}=this._activePath.getLastPoint(Vt.shared);this._activePath.clear(),this._activePath.moveTo(t,s)}stroke(t){let s;const i=this.instructions[this.instructions.length-1];return this._tick===0&&(i==null?void 0:i.action)==="fill"?s=i.data.path:s=this._activePath.clone(),s?(t!=null&&(this._strokeStyle=Ca(t,Ge.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const s=this.instructions[this.instructions.length-1-t],i=this._activePath.clone();if(s&&(s.action==="stroke"||s.action==="fill"))if(s.data.hole)s.data.hole.addPath(i);else{s.data.hole=i;break}}return this._initNextPathLocation(),this}arc(t,s,i,n,r,o){this._tick++;const a=this._transform;return this._activePath.arc(a.a*t+a.c*s+a.tx,a.b*t+a.d*s+a.ty,i,n,r,o),this}arcTo(t,s,i,n,r){this._tick++;const o=this._transform;return this._activePath.arcTo(o.a*t+o.c*s+o.tx,o.b*t+o.d*s+o.ty,o.a*i+o.c*n+o.tx,o.b*i+o.d*n+o.ty,r),this}arcToSvg(t,s,i,n,r,o,a){this._tick++;const l=this._transform;return this._activePath.arcToSvg(t,s,i,n,r,l.a*o+l.c*a+l.tx,l.b*o+l.d*a+l.ty),this}bezierCurveTo(t,s,i,n,r,o,a){this._tick++;const l=this._transform;return this._activePath.bezierCurveTo(l.a*t+l.c*s+l.tx,l.b*t+l.d*s+l.ty,l.a*i+l.c*n+l.tx,l.b*i+l.d*n+l.ty,l.a*r+l.c*o+l.tx,l.b*r+l.d*o+l.ty,a),this}closePath(){var t;return this._tick++,(t=this._activePath)==null||t.closePath(),this}ellipse(t,s,i,n){return this._tick++,this._activePath.ellipse(t,s,i,n,this._transform.clone()),this}circle(t,s,i){return this._tick++,this._activePath.circle(t,s,i,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,s){this._tick++;const i=this._transform;return this._activePath.lineTo(i.a*t+i.c*s+i.tx,i.b*t+i.d*s+i.ty),this}moveTo(t,s){this._tick++;const i=this._transform,n=this._activePath.instructions,r=i.a*t+i.c*s+i.tx,o=i.b*t+i.d*s+i.ty;return n.length===1&&n[0].action==="moveTo"?(n[0].data[0]=r,n[0].data[1]=o,this):(this._activePath.moveTo(r,o),this)}quadraticCurveTo(t,s,i,n,r){this._tick++;const o=this._transform;return this._activePath.quadraticCurveTo(o.a*t+o.c*s+o.tx,o.b*t+o.d*s+o.ty,o.a*i+o.c*n+o.tx,o.b*i+o.d*n+o.ty,r),this}rect(t,s,i,n){return this._tick++,this._activePath.rect(t,s,i,n,this._transform.clone()),this}roundRect(t,s,i,n,r){return this._tick++,this._activePath.roundRect(t,s,i,n,r,this._transform.clone()),this}poly(t,s){return this._tick++,this._activePath.poly(t,s,this._transform.clone()),this}regularPoly(t,s,i,n,r=0,o){return this._tick++,this._activePath.regularPoly(t,s,i,n,r,o),this}roundPoly(t,s,i,n,r,o){return this._tick++,this._activePath.roundPoly(t,s,i,n,r,o),this}roundShape(t,s,i,n){return this._tick++,this._activePath.roundShape(t,s,i,n),this}filletRect(t,s,i,n,r){return this._tick++,this._activePath.filletRect(t,s,i,n,r),this}chamferRect(t,s,i,n,r,o){return this._tick++,this._activePath.chamferRect(t,s,i,n,r,o),this}star(t,s,i,n,r=0,o=0){return this._tick++,this._activePath.star(t,s,i,n,r,o,this._transform.clone()),this}svg(t){return this._tick++,Tk(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,s=t){return this._transform.scale(t,s),this}setTransform(t,s,i,n,r,o){return t instanceof W?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,s,i,n,r,o),this)}transform(t,s,i,n,r,o){return t instanceof W?(this._transform.append(t),this):(Kp.set(t,s,i,n,r,o),this._transform.append(Kp),this)}translate(t,s=t){return this._transform.translate(t,s),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const t=this._bounds;t.clear();for(let s=0;s<this.instructions.length;s++){const i=this.instructions[s],n=i.action;if(n==="fill"){const r=i.data;t.addBounds(r.path.bounds)}else if(n==="texture"){const r=i.data;t.addFrame(r.dx,r.dy,r.dx+r.dw,r.dy+r.dh,r.transform)}if(n==="stroke"){const r=i.data,o=r.style.alignment,a=r.style.width*(1-o),l=r.path.bounds;t.addFrame(l.minX-a,l.minY-a,l.maxX+a,l.maxY+a)}}return t}containsPoint(t){var n;if(!this.bounds.containsPoint(t.x,t.y))return!1;const s=this.instructions;let i=!1;for(let r=0;r<s.length;r++){const o=s[r],a=o.data,l=a.path;if(!o.action||!l)continue;const h=a.style,u=l.shapePath.shapePrimitives;for(let c=0;c<u.length;c++){const d=u[c].shape;if(!h||!d)continue;const f=u[c].transform,g=f?f.applyInverse(t,Nk):t;if(o.action==="fill")i=d.contains(g.x,g.y);else{const x=h;i=d.strokeContains(g.x,g.y,x.width,x.alignment)}const m=a.hole;if(m){const x=(n=m.shapePath)==null?void 0:n.shapePrimitives;if(x)for(let p=0;p<x.length;p++)x[p].shape.contains(g.x,g.y)&&(i=!1)}if(i)return!0}}return i}destroy(t=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(i)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(i))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};Yc.defaultFillStyle={color:16777215,alpha:1,texture:Q.WHITE,matrix:null,fill:null,textureSpace:"local"};Yc.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Q.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let Ae=Yc;const Xc=class Ti extends qe{constructor(t={}){super(),this.uid=gt("textStyle"),this._tick=0,Dk(t);const s={...Ti.defaultTextStyle,...t};for(const i in s){const n=i;this[n]=s[i]}this.update(),this._tick=0}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.update())}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(t!==null&&typeof t=="object"?this._dropShadow=this._createProxy({...Ti.defaultDropShadow,...t}):this._dropShadow=t?this._createProxy({...Ti.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily!==t&&(this._fontFamily=t,this.update())}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(typeof t=="string"?this._fontSize=parseInt(t,10):this._fontSize=t,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.update())}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.update())}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.update())}get filters(){return this._filters}set filters(t){this._filters!==t&&(this._filters=Object.freeze(t),this.update())}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.update())}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...Ae.defaultFillStyle,...t},()=>{this._fill=oi({...this._originalFill},Ae.defaultFillStyle)})),this._fill=oi(t===0?"black":t,Ae.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...Ae.defaultStrokeStyle,...t},()=>{this._stroke=Ca({...this._originalStroke},Ae.defaultStrokeStyle)})),this._stroke=Ca(t,Ae.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const t=Ti.defaultTextStyle;for(const s in t)this[s]=t[s]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new Ti({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let t=0;if(this._filters)for(let s=0;s<this._filters.length;s++)t+=this._filters[s].padding;return Math.max(this._padding,t)}destroy(t=!1){var i,n,r,o;if(this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const a=typeof t=="boolean"?t:t==null?void 0:t.textureSource;(i=this._fill)!=null&&i.texture&&this._fill.texture.destroy(a),(n=this._originalFill)!=null&&n.texture&&this._originalFill.texture.destroy(a),(r=this._stroke)!=null&&r.texture&&this._stroke.texture.destroy(a),(o=this._originalStroke)!=null&&o.texture&&this._originalStroke.texture.destroy(a)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,s){return new Proxy(t,{set:(i,n,r)=>(i[n]===r||(i[n]=r,s==null||s(n,r),this.update()),!0)})}_isFillStyle(t){return(t??null)!==null&&!(kt.isColorLike(t)||t instanceof ds||t instanceof Za)}};Xc.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};Xc.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Rr=Xc;function Dk(e){const t=e;if(typeof t.dropShadow=="boolean"&&t.dropShadow){const s=Rr.defaultDropShadow;e.dropShadow={alpha:t.dropShadowAlpha??s.alpha,angle:t.dropShadowAngle??s.angle,blur:t.dropShadowBlur??s.blur,color:t.dropShadowColor??s.color,distance:t.dropShadowDistance??s.distance}}if(t.strokeThickness!==void 0){X(mt,"strokeThickness is now a part of stroke");const s=t.stroke;let i={};if(kt.isColorLike(s))i.color=s;else if(s instanceof ds||s instanceof Za)i.fill=s;else if(Object.hasOwnProperty.call(s,"color")||Object.hasOwnProperty.call(s,"fill"))i=s;else throw new Error("Invalid stroke value.");e.stroke={...i,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){if(X(mt,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(t.fill)||t.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");t.fill.length!==t.fillGradientStops.length&&Wt("The number of fill colors must match the number of fill gradient stops.");const s=new ds({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),i=t.fillGradientStops.slice(),n=t.fill.map(r=>kt.shared.setValue(r).toNumber());i.forEach((r,o)=>{s.addColorStop(r,n[o])}),e.fill={fill:s}}}class Ik{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,s){const i=re.get().createCanvas();i.width=t,i.height=s;const n=i.getContext("2d");return{canvas:i,context:n}}getOptimalCanvasAndContext(t,s,i=1){t=Math.ceil(t*i-1e-6),s=Math.ceil(s*i-1e-6),t=an(t),s=an(s);const n=(t<<17)+(s<<1);this._canvasPool[n]||(this._canvasPool[n]=[]);let r=this._canvasPool[n].pop();return r||(r=this._createCanvasAndContext(t,s)),r}returnCanvasAndContext(t){const s=t.canvas,{width:i,height:n}=s,r=(i<<17)+(n<<1);t.context.resetTransform(),t.context.clearRect(0,0,i,n),this._canvasPool[r].push(t)}clear(){this._canvasPool={}}}const ku=new Ik;Ur.register(ku);const qp=1e5;function Qp(e,t,s,i=0){if(e.texture===Q.WHITE&&!e.fill)return kt.shared.setValue(e.color).setAlpha(e.alpha??1).toHexa();if(e.fill){if(e.fill instanceof Za){const n=e.fill,r=t.createPattern(n.texture.source.resource,"repeat"),o=n.transform.copyTo(W.shared);return o.scale(n.texture.frame.width,n.texture.frame.height),r.setTransform(o),r}else if(e.fill instanceof ds){const n=e.fill,r=n.type==="linear",o=n.textureSpace==="local";let a=1,l=1;o&&s&&(a=s.width+i,l=s.height+i);let h,u=!1;if(r){const{start:c,end:d}=n;h=t.createLinearGradient(c.x*a,c.y*l,d.x*a,d.y*l),u=Math.abs(d.x-c.x)<Math.abs((d.y-c.y)*.1)}else{const{center:c,innerRadius:d,outerCenter:f,outerRadius:g}=n;h=t.createRadialGradient(c.x*a,c.y*l,d*a,f.x*a,f.y*l,g*a)}if(u&&o&&s){const c=s.lineHeight/l;for(let d=0;d<s.lines.length;d++){const f=(d*s.lineHeight+i/2)/l;n.colorStops.forEach(g=>{const m=f+g.offset*c;h.addColorStop(Math.floor(m*qp)/qp,kt.shared.setValue(g.color).toHex())})}}else n.colorStops.forEach(c=>{h.addColorStop(c.offset,kt.shared.setValue(c.color).toHex())});return h}}else{const n=t.createPattern(e.texture.source.resource,"repeat"),r=e.matrix.copyTo(W.shared);return r.scale(e.texture.frame.width,e.texture.frame.height),n.setTransform(r),n}return Wt("FillStyle not recognised",e),"red"}class Mt extends Vc{constructor(t){t instanceof Ae&&(t={context:t});const{context:s,roundPixels:i,...n}=t||{};super({label:"Graphics",...n}),this.renderPipeId="graphics",s?this._context=s:this._context=this._ownedContext=new Ae,this._context.on("update",this.onViewUpdate,this),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=i??!1}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(t){return this._context.containsPoint(t)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(t===!0||(t==null?void 0:t.context)===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,s){return this.context[t](...s),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new Mt(this._context.clone()):(this._ownedContext=null,new Mt(this._context))}lineStyle(t,s,i){X(mt,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const n={};return t&&(n.width=t),s&&(n.color=s),i&&(n.alpha=i),this.context.strokeStyle=n,this}beginFill(t,s){X(mt,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const i={};return t!==void 0&&(i.color=t),s!==void 0&&(i.alpha=s),this.context.fillStyle=i,this}endFill(){X(mt,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return(t.width!==Ae.defaultStrokeStyle.width||t.color!==Ae.defaultStrokeStyle.color||t.alpha!==Ae.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return X(mt,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return X(mt,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return X(mt,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return X(mt,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return X(mt,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return X(mt,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}class Lk extends Vc{constructor(t,s){const{text:i,resolution:n,style:r,anchor:o,width:a,height:l,roundPixels:h,...u}=t;super({...u}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=s,this.text=i??"",this.style=r,this.resolution=n??null,this.allowChildren=!1,this._anchor=new Nt({_onUpdate:()=>{this.onViewUpdate()}}),o&&(this.anchor=o),this.roundPixels=h??!1,a!==void 0&&(this.width=a),l!==void 0&&(this.height=l)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}set text(t){t=t.toString(),this._text!==t&&(this._text=t,this.onViewUpdate())}get text(){return this._text}set resolution(t){this._autoResolution=t===null,this._resolution=t,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(t){var s;t||(t={}),(s=this._style)==null||s.off("update",this.onViewUpdate,this),t instanceof this._styleClass?this._style=t:this._style=new this._styleClass(t),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(t){this._setWidth(t,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(t){this._setHeight(t,this.bounds.height)}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this.bounds.width,t.height=Math.abs(this.scale.y)*this.bounds.height,t}setSize(t,s){typeof t=="object"?(s=t.height??t.width,t=t.width):s??(s=t),t!==void 0&&this._setWidth(t,this.bounds.width),s!==void 0&&this._setHeight(s,this.bounds.height)}containsPoint(t){const s=this.bounds.width,i=this.bounds.height,n=-s*this.anchor.x;let r=0;return t.x>=n&&t.x<=n+s&&(r=-i*this.anchor.y,t.y>=r&&t.y<=r+i)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(t=!1){super.destroy(t),this.owner=null,this._bounds=null,this._anchor=null,(typeof t=="boolean"?t:t!=null&&t.style)&&this._style.destroy(t),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}}function Fk(e,t){let s=e[0]??{};return(typeof s=="string"||e[1])&&(X(mt,`use new ${t}({ text: "hi!", style }) instead`),s={text:s,style:e[1]}),s}let Ys=null,ts=null;function jk(e,t){Ys||(Ys=re.get().createCanvas(256,128),ts=Ys.getContext("2d",{willReadFrequently:!0}),ts.globalCompositeOperation="copy",ts.globalAlpha=1),(Ys.width<e||Ys.height<t)&&(Ys.width=an(e),Ys.height=an(t))}function Zp(e,t,s){for(let i=0,n=4*s*t;i<t;++i,n+=4)if(e[n+3]!==0)return!1;return!0}function Jp(e,t,s,i,n){const r=4*t;for(let o=i,a=i*r+4*s;o<=n;++o,a+=r)if(e[a+3]!==0)return!1;return!0}function Bk(...e){let t=e[0];t.canvas||(t={canvas:e[0],resolution:e[1]});const{canvas:s}=t,i=Math.min(t.resolution??1,1),n=t.width??s.width,r=t.height??s.height;let o=t.output;if(jk(n,r),!ts)throw new TypeError("Failed to get canvas 2D context");ts.drawImage(s,0,0,n,r,0,0,n*i,r*i);const l=ts.getImageData(0,0,n,r).data;let h=0,u=0,c=n-1,d=r-1;for(;u<r&&Zp(l,n,u);)++u;if(u===r)return vt.EMPTY;for(;Zp(l,n,d);)--d;for(;Jp(l,n,h,u,d);)++h;for(;Jp(l,n,c,u,d);)--c;return++c,++d,ts.globalCompositeOperation="source-over",ts.strokeRect(h,u,c-h,d-u),ts.globalCompositeOperation="copy",o??(o=new vt),o.set(h/i,u/i,(c-h)/i,(d-u)/i),o}const tm=new vt;class Vk{getCanvasAndContext(t){const{text:s,style:i,resolution:n=1}=t,r=i._getFinalPadding(),o=ki.measureText(s||" ",i),a=Math.ceil(Math.ceil(Math.max(1,o.width)+r*2)*n),l=Math.ceil(Math.ceil(Math.max(1,o.height)+r*2)*n),h=ku.getOptimalCanvasAndContext(a,l);this._renderTextToCanvas(s,i,r,n,h);const u=i.trim?Bk({canvas:h.canvas,width:a,height:l,resolution:1,output:tm}):tm.set(0,0,a,l);return{canvasAndContext:h,frame:u}}returnCanvasAndContext(t){ku.returnCanvasAndContext(t)}_renderTextToCanvas(t,s,i,n,r){var v,_,S,b;const{canvas:o,context:a}=r,l=Ox(s),h=ki.measureText(t||" ",s),u=h.lines,c=h.lineHeight,d=h.lineWidths,f=h.maxLineWidth,g=h.fontProperties,m=o.height;if(a.resetTransform(),a.scale(n,n),a.textBaseline=s.textBaseline,(v=s._stroke)!=null&&v.width){const C=s._stroke;a.lineWidth=C.width,a.miterLimit=C.miterLimit,a.lineJoin=C.join,a.lineCap=C.cap}a.font=l;let x,p;const y=s.dropShadow?2:1;for(let C=0;C<y;++C){const k=s.dropShadow&&C===0,A=k?Math.ceil(Math.max(1,m)+i*2):0,T=A*n;if(k){a.fillStyle="black",a.strokeStyle="black";const V=s.dropShadow,Y=V.color,Se=V.alpha;a.shadowColor=kt.shared.setValue(Y).setAlpha(Se).toRgbaString();const I=V.blur*n,D=V.distance*n;a.shadowBlur=I,a.shadowOffsetX=Math.cos(V.angle)*D,a.shadowOffsetY=Math.sin(V.angle)*D+T}else{if(a.fillStyle=s._fill?Qp(s._fill,a,h,i*2):null,(_=s._stroke)!=null&&_.width){const V=s._stroke.width*.5+i*2;a.strokeStyle=Qp(s._stroke,a,h,V)}a.shadowColor="black"}let R=(c-g.fontSize)/2;c-g.fontSize<0&&(R=0);const $=((S=s._stroke)==null?void 0:S.width)??0;for(let V=0;V<u.length;V++)x=$/2,p=$/2+V*c+g.ascent+R,s.align==="right"?x+=f-d[V]:s.align==="center"&&(x+=(f-d[V])/2),(b=s._stroke)!=null&&b.width&&this._drawLetterSpacing(u[V],s,r,x+i,p+i-A,!0),s._fill!==void 0&&this._drawLetterSpacing(u[V],s,r,x+i,p+i-A)}}_drawLetterSpacing(t,s,i,n,r,o=!1){const{context:a}=i,l=s.letterSpacing;let h=!1;if(ki.experimentalLetterSpacingSupported&&(ki.experimentalLetterSpacing?(a.letterSpacing=`${l}px`,a.textLetterSpacing=`${l}px`,h=!0):(a.letterSpacing="0px",a.textLetterSpacing="0px")),l===0||h){o?a.strokeText(t,n,r):a.fillText(t,n,r);return}let u=n;const c=ki.graphemeSegmenter(t);let d=a.measureText(t).width,f=0;for(let g=0;g<c.length;++g){const m=c[g];o?a.strokeText(m,u,r):a.fillText(m,u,r);let x="";for(let p=g+1;p<c.length;++p)x+=c[p];f=a.measureText(x).width,u+=d-f+l,d=f}}}const em=new Vk;class Nr extends Lk{constructor(...t){const s=Fk(t,"Text");super(s,Rr),this.renderPipeId="text",s.textureStyle&&(this.textureStyle=s.textureStyle instanceof _a?s.textureStyle:new _a(s.textureStyle))}updateBounds(){const t=this._bounds,s=this._anchor;let i=0,n=0;if(this._style.trim){const{frame:r,canvasAndContext:o}=em.getCanvasAndContext({text:this.text,style:this._style,resolution:1});em.returnCanvasAndContext(o),i=r.width,n=r.height}else{const r=ki.measureText(this._text,this._style);i=r.width,n=r.height}t.minX=-s._x*i,t.maxX=t.minX+i,t.minY=-s._y*n,t.maxY=t.minY+n}}_e.add(VS,OS);class sm{constructor(t,s,i){this.game=t,this.type=s,this.id=i,this.level=1,this.maxLevel=5,this.trackPos=0,this.x=0,this.y=0,this.angle=0,this.turretAngle=0,this.cooldown=0,this.maxCooldown=60,this.stats={damage:1,fireRate:1,range:1,turnRate:.1},this.initStats(),this.container=new tt,this.updateVisuals(),this.game.layers.ground.addChild(this.container)}initStats(){this.type==="sniper"&&(this.stats.range=1.5,this.stats.damage=2,this.stats.turnRate=.02,this.stats.fireRate=.5),this.type==="flame"&&(this.stats.range=.6,this.stats.fireRate=5,this.stats.turnRate=.15),this.type==="mortar"&&(this.stats.range=1.2,this.stats.damage=1.5,this.stats.turnRate=.05,this.stats.fireRate=.3),this.type==="tesla"&&(this.stats.range=.8,this.stats.fireRate=1.2),this.type==="cryo"&&(this.stats.range=.8,this.stats.fireRate=2),this.type==="stasis"&&(this.stats.range=1),this.type==="railgun"&&(this.stats.range=2,this.stats.damage=3,this.stats.turnRate=.02,this.stats.fireRate=.2),this.type==="acid"&&(this.stats.range=.8,this.stats.fireRate=3,this.stats.turnRate=.1),this.type==="gravity"&&(this.stats.range=1.5,this.stats.damage=.5,this.stats.turnRate=.05,this.stats.fireRate=.2),this.type==="thumper"&&(this.stats.range=1,this.stats.damage=1,this.stats.fireRate=.3),this.type==="missile"&&(this.stats.range=1.8,this.stats.damage=2.5,this.stats.fireRate=.4,this.stats.turnRate=.1),this.type==="cluster"&&(this.stats.range=2.2,this.stats.damage=4,this.stats.fireRate=.15,this.stats.turnRate=.05)}upgrade(){this.level>=this.maxLevel||(this.level++,this.stats.damage*=1.2,this.stats.fireRate*=1.1,this.type==="sniper"&&(this.stats.turnRate+=.02,this.stats.damage*=1.1),this.type==="flame"&&(this.stats.range*=1.1,this.stats.fireRate*=1.2),this.type==="gunner"&&(this.stats.fireRate*=1.15),this.type==="mortar"&&(this.stats.range*=1.15),this.type==="tesla"&&(this.stats.range*=1.1),this.type==="cryo"&&(this.stats.range*=1.1),this.type==="fabricator"&&(this.stats.damage+=.1),this.type==="medic"&&(this.stats.fireRate*=1.2),this.type==="stasis"&&(this.stats.range*=1.15),this.type==="railgun"&&(this.stats.damage*=1.15),this.type==="acid"&&(this.stats.range*=1.1),this.type==="gravity"&&(this.stats.range*=1.1),this.type==="thumper"&&(this.stats.damage*=1.2),this.type==="missile"&&(this.stats.damage*=1.15,this.stats.range*=1.1),this.type==="cluster"&&(this.stats.damage*=1.2),G.play("build"),this.updateVisuals())}update(t,s){const i=t.player,n=i.totalDist-45*(s+1);let r=i.trackPos;for(let l=i.history.length-1;l>=0;l--){const h=i.history[l];if(h.dist<=n){if(l<i.history.length-1){const u=i.history[l+1],c=u.dist-h.dist,d=n-h.dist,f=c===0?0:d/c;r=h.t+(u.t-h.t)*f}else r=h.t;break}}this.trackPos=r;const o=St(this.trackPos,t.trackNodes),a=St(this.trackPos+.05,t.trackNodes);if(this.x=o.x,this.y=o.y,this.angle=Math.atan2(a.y-o.y,a.x-o.x),this.container.x=this.x,this.container.y=this.y,this.container.rotation=this.angle,this.type==="miner"&&t.frameCount%Math.max(60,180-this.level*20)===0&&t.spawnScrap(this.x,this.y,5*this.level),this.type==="medic"&&t.frameCount%Math.max(30,120/this.stats.fireRate)===0&&t.healPlayer(1*this.level),this.type==="stasis"){const l=225*this.stats.range;t.enemies.forEach(h=>{Math.hypot(h.x-this.x,h.y-this.y)<l&&(h.speedMult=.5-this.level*.05)})}if(this.cooldown>0)this.cooldown--;else{let l=1;const h=t.player.wagons[s-1],u=t.player.wagons[s+1];h&&h.type==="fabricator"&&(l+=.2+h.level*.1),u&&u.type==="fabricator"&&(l+=.2+u.level*.1),this.type==="gunner"?this.fireStandard(t,l):this.type==="sniper"?this.fireSniper(t,l):this.type==="flame"?this.fireFlame(t,l):this.type==="tesla"?this.fireTesla(t,l):this.type==="mortar"?this.fireMortar(t,l):this.type==="cryo"?this.fireCryo(t,l):this.type==="drone"?this.spawnDrone(t):this.type==="railgun"?this.fireRailgun(t,l):this.type==="acid"?this.fireAcid(t,l):this.type==="gravity"?this.fireGravity(t,l):this.type==="thumper"?this.fireThumper(t,l):this.type==="missile"?this.fireMissile(t,l):this.type==="cluster"&&this.fireCluster(t,l)}this.turretSprite&&(this.turretSprite.rotation=this.turretAngle-this.angle),this.updateCooldownBar()}updateCooldownBar(){if(this.cooldownBar||(this.cooldownBar=new Mt,this.container.addChild(this.cooldownBar)),this.cooldownBar.clear(),!["shield","miner","spike","drone","fabricator","stasis","medic","thumper"].includes(this.type)){const t=1-this.cooldown/this.maxCooldown;t<1&&(this.cooldownBar.rect(-12,-22,24,4),this.cooldownBar.fill(0),this.cooldownBar.rect(-12,-22,24*t,4),this.cooldownBar.fill(4906624))}}aim(t){if(!t)return!1;const s=t.x-this.x,i=t.y-this.y,n=Math.atan2(i,s);let r=n-this.turretAngle;for(;r>Math.PI;)r-=Math.PI*2;for(;r<-Math.PI;)r+=Math.PI*2;return Math.abs(r)<this.stats.turnRate?(this.turretAngle=n,!0):(this.turretAngle+=Math.sign(r)*this.stats.turnRate,!1)}fireStandard(t,s){const i=375*this.stats.range,n=t.getNearestEnemy(this.x,this.y,i);this.aim(n)&&(this.maxCooldown=35/this.stats.fireRate,this.cooldown=this.maxCooldown,t.fireProjectile(this.x,this.y,n,8,"#60a5fa",t.player.autoDmg*this.stats.damage*s,!1,!1,2),G.play("shoot",(this.x-t.canvas.width/2)/(t.canvas.width/2)))}fireSniper(t,s){const i=750*this.stats.range,n=t.getStrongestEnemy(this.x,this.y,i);this.aim(n)&&(this.maxCooldown=90/this.stats.fireRate,this.cooldown=this.maxCooldown,t.fireProjectile(this.x,this.y,n,20,"#facc15",t.player.autoDmg*5*this.stats.damage*s,!1,!1,10),G.play("sniper",(this.x-t.canvas.width/2)/(t.canvas.width/2)))}fireFlame(t,s){const i=270*this.stats.range,n=t.getNearestEnemy(this.x,this.y,i);this.aim(n)&&(this.maxCooldown=5/this.stats.fireRate,this.cooldown=this.maxCooldown,t.fireProjectile(this.x,this.y,n,6,"#f97316",t.player.autoDmg*.4*this.stats.damage*s),t.frameCount%5===0&&G.play("flame",(this.x-t.canvas.width/2)/(t.canvas.width/2)))}fireTesla(t,s){const i=225*this.stats.range,n=t.getClusteredEnemy(this.x,this.y,i);n&&(this.maxCooldown=45/this.stats.fireRate,this.cooldown=this.maxCooldown,n.hp-=t.player.autoDmg*1.5*this.stats.damage*s,t.createLightning(this.x,this.y,n.x+16,n.y+16),G.play("tesla",(this.x-t.canvas.width/2)/(t.canvas.width/2)),t.spawnFloater(n.x,n.y-10,Math.floor(t.player.autoDmg*1.5*this.stats.damage*s),"#a78bfa",10))}fireMortar(t,s){const i=450*this.stats.range,n=t.getClusteredEnemy(this.x,this.y,i);this.aim(n)&&(this.maxCooldown=120/this.stats.fireRate,this.cooldown=this.maxCooldown,t.fireProjectile(this.x,this.y,n,5,"#ef4444",t.player.autoDmg*4*this.stats.damage*s,!0),G.play("mortar",(this.x-t.canvas.width/2)/(t.canvas.width/2)))}fireCryo(t,s){const i=375*this.stats.range,n=t.getNearestEnemy(this.x,this.y,i);this.aim(n)&&(this.maxCooldown=25/this.stats.fireRate,this.cooldown=this.maxCooldown,t.fireProjectile(this.x,this.y,n,7,"#06b6d4",t.player.autoDmg*.5*this.stats.damage*s,!1,!0),G.play("cryo",(this.x-t.canvas.width/2)/(t.canvas.width/2)))}spawnDrone(t){t.drones.length<3+this.level&&(this.maxCooldown=300/this.stats.fireRate,this.cooldown=this.maxCooldown,t.spawnDrone(this))}fireRailgun(t,s){const i=900*this.stats.range,n=t.getStrongestEnemy(this.x,this.y,i);this.aim(n)&&(this.maxCooldown=120/this.stats.fireRate,this.cooldown=this.maxCooldown,t.fireProjectile(this.x,this.y,n,25,"#fff",t.player.autoDmg*4*this.stats.damage*s,!1,!1,25),G.play("railgun",(this.x-t.canvas.width/2)/(t.canvas.width/2)))}fireAcid(t,s){const i=300*this.stats.range,n=t.getNearestEnemy(this.x,this.y,i);this.aim(n)&&(this.maxCooldown=10/this.stats.fireRate,this.cooldown=this.maxCooldown,t.fireProjectile(this.x,this.y,n,7,"#84cc16",t.player.autoDmg*.2*this.stats.damage*s,!1,!1,0,!0),G.play("acid",(this.x-t.canvas.width/2)/(t.canvas.width/2)))}fireGravity(t,s){const i=450*this.stats.range,n=t.getClusteredEnemy(this.x,this.y,i);this.aim(n)&&(this.maxCooldown=120/this.stats.fireRate,this.cooldown=this.maxCooldown,t.fireProjectile(this.x,this.y,n,10,"#7c3aed",t.player.autoDmg*1*this.stats.damage*s,!1,!1,0,!1,!0),G.play("gravity",(this.x-t.canvas.width/2)/(t.canvas.width/2)))}fireThumper(t,s){this.maxCooldown=180/this.stats.fireRate,this.cooldown=this.maxCooldown,t.createShockwave(this.x,this.y,225*this.stats.range,15),G.play("thumper",(this.x-t.canvas.width/2)/(t.canvas.width/2))}fireMissile(t,s){const i=600*this.stats.range,n=t.getNearestEnemy(this.x,this.y,i);this.aim(n)&&(this.maxCooldown=60/this.stats.fireRate,this.cooldown=this.maxCooldown,t.fireProjectile(this.x,this.y,n,12,"missile",t.player.autoDmg*2.5*this.stats.damage*s,!0,!1,5,!1,!1,!0),G.play("shoot",(this.x-t.canvas.width/2)/(t.canvas.width/2)))}fireCluster(t,s){const i=800*this.stats.range,n=t.getStrongestEnemy(this.x,this.y,i);this.aim(n)&&(this.maxCooldown=180/this.stats.fireRate,this.cooldown=this.maxCooldown,t.fireProjectile(this.x,this.y,n,10,"cluster",t.player.autoDmg*4*this.stats.damage*s,!0,!1,10,!1,!1,!0,!0),G.play("mortar",(this.x-t.canvas.width/2)/(t.canvas.width/2)))}updateVisuals(){this.chassisSprite&&this.chassisSprite.destroy(),this.turretSprite&&this.turretSprite.destroy();const t=this.game.textureGen.generateWagonChassisTexture(this.type,this.level,"#334155");if(this.chassisSprite=new Le(t),this.chassisSprite.anchor.set(.5),this.container.addChildAt(this.chassisSprite,0),["gunner","sniper","flame","mortar","cryo","railgun","acid","gravity","shield","tesla","drone","spike","fabricator","stasis","medic","thumper","missile","cluster"].includes(this.type)){const i=this.game.textureGen.generateWagonTurretTexture(this.type,"#ffffff");this.turretSprite=new Le(i),this.turretSprite.anchor.set(.5),this.container.addChildAt(this.turretSprite,1)}}destroy(){this.container&&this.container.destroy({children:!0})}}class $e{constructor(t,s,i,n,r,o,a=!1){this.game=t,this.x=s,this.y=i,this.type=n,this.isElite=r,this.isRare=a;const l=o*.08,h=r?2.5:1,u=a?1.5:1;if(this.scale=r?1.5:a?1.2:1,this.speedMod=1,this.wave=o,this.passive=null,this.isRare){const d=["REGEN","SPEED"];this.passive=d[Math.floor(Math.random()*d.length)]}n==="crusher"?(this.hp=2e3*(1+l),this.speed=.6,this.color="#7f1d1d",this.size=40,this.score=500,this.xp=200,this.isBoss=!0):n==="queen"?(this.hp=1500*(1+l),this.speed=.375,this.color="#be185d",this.size=35,this.score=500,this.xp=200,this.isBoss=!0):n==="sniper_boss"?(this.hp=1200*(1+l),this.speed=.45,this.color="#facc15",this.size=30,this.score=500,this.xp=200,this.isBoss=!0):n==="tesla_boss"?(this.hp=1800*(1+l),this.speed=.75,this.color="#4c1d95",this.size=35,this.score=500,this.xp=200,this.isBoss=!0):n==="fortress"?(this.hp=3e3*(1+l),this.speed=.15,this.color="#3f3f46",this.size=45,this.score=500,this.xp=200,this.isBoss=!0):n==="phantom"?(this.hp=1e3*(1+l),this.speed=1.125,this.color="#0f172a",this.size=30,this.score=500,this.xp=200,this.isBoss=!0):n==="tank"?(this.hp=120*(1+l)*h*u,this.speed=.26,this.color="#166534",this.size=18*this.scale,this.score=30,this.xp=30*h*u):n==="swarmer"?(this.hp=10*(1+l)*h*u,this.speed=2.1,this.color="#ef4444",this.size=8*this.scale,this.score=5,this.xp=5*h*u):n==="dasher"?(this.hp=25*(1+l)*h*u,this.speed=2.6,this.color="#f97316",this.size=12*this.scale,this.score=12,this.xp=15*h*u):n==="boomer"?(this.hp=50*(1+l)*h*u,this.speed=.75,this.color="#facc15",this.size=16*this.scale,this.score=20,this.xp=20*h*u):n==="miner"?(this.hp=60*(1+l)*h*u,this.speed=1.125,this.color="#71717a",this.size=15*this.scale,this.score=25,this.xp=25*h*u):n==="screamer"?(this.hp=30*(1+l)*h*u,this.speed=1.8,this.color="#ec4899",this.size=12*this.scale,this.score=25,this.xp=25*h*u):n==="healer"?(this.hp=150*(1+l)*h*u,this.speed=.4,this.color="#22c55e",this.size=20*this.scale,this.score=40,this.xp=40*h*u):n==="shielder"?(this.hp=100*(1+l)*h*u,this.speed=.6,this.color="#3b82f6",this.size=18*this.scale,this.score=35,this.xp=35*h*u):(this.hp=40*(1+l)*h*u,this.speed=.9,this.color="#a855f7",this.size=14*this.scale,this.score=10,this.xp=10*h*u),this.maxHp=this.hp,this.shield=0,this.vx=0,this.vy=0,this.knockbackX=0,this.knockbackY=0,this.frozenTimer=0,this.acidTimer=0,this.skillTimer=0,this.swarmerAngle=Math.random()*Math.PI*2,this.dashState="IDLE",this.dashTimer=0,this.dashDir=0,this.stutterTimer=0,this.age=Math.random()*100,this.supportTimer=0,this.container=new tt,this.container.x=s,this.container.y=i,this.appendages=new Mt,this.container.addChild(this.appendages);const c=this.game.textureGen.generateEnemyTexture(n,this.color,this.size);if(this.sprite=new Le(c),this.sprite.anchor.set(.5),this.container.addChild(this.sprite),this.isElite||this.isBoss||this.isRare){const d=new Mt;d.stroke({width:3,color:this.isRare?16436245:this.color}),d.circle(0,0,this.size+6),this.container.addChild(d)}this.isBoss&&(this.hpBar=new Mt,this.container.addChild(this.hpBar)),this.game.layers.ground.addChild(this.container)}update(t){const s=t.player;this.age+=.1;let i=s.x,n=s.y;(this.type==="dasher"||this.type==="screamer")&&(i+=Math.cos(s.angle)*s.speed*30,n+=Math.sin(s.angle)*s.speed*30);let r=Math.atan2(n-this.y,i-this.x),o=this.speed;const a=t.enemyGrid.query(this.x,this.y,this.size*2);let l=0,h=0,u=0;if(a.forEach(m=>{if(m!==this){const x=Math.hypot(this.x-m.x,this.y-m.y);if(x<this.size+m.size){const p=(this.size+m.size-x)*.05,y=Math.atan2(this.y-m.y,this.x-m.x);l+=Math.cos(y)*p,h+=Math.sin(y)*p,u++}}}),u>0&&(this.vx+=l,this.vy+=h),Math.random()<.005&&(this.stutterTimer=Math.random()*20+10),this.stutterTimer>0?(this.stutterTimer--,o*=.1,this.sprite.x=(Math.random()-.5)*2):this.sprite.x=0,this.type==="swarmer"){this.swarmerAngle+=.02;const m=120,x=s.x+Math.cos(this.swarmerAngle)*m,p=s.y+Math.sin(this.swarmerAngle)*m;r=Math.atan2(p-this.y,x-this.x)}else if(this.type==="shooter"){const m=Math.hypot(s.x-this.x,s.y-this.y);m<250?r=Math.atan2(this.y-s.y,this.x-s.x):m>400?r=Math.atan2(s.y-this.y,s.x-this.x):r+=Math.PI/2}else if(this.type==="dasher"){const m=Math.hypot(s.x-this.x,s.y-this.y);this.dashState==="IDLE"?m<300&&(this.dashState="WINDUP",this.dashTimer=45):this.dashState==="WINDUP"?(o=0,this.dashTimer--,this.x+=(Math.random()-.5)*2,this.y+=(Math.random()-.5)*2,this.dashTimer<=0&&(this.dashState="DASHING",this.dashTimer=30,this.dashDir=Math.atan2(s.y-this.y,s.x-this.x),t.createExplosion(this.x,this.y,"#f97316",5))):this.dashState==="DASHING"?(r=this.dashDir,o=this.speed*4,this.dashTimer--,this.dashTimer<=0&&(this.dashState="COOLDOWN",this.dashTimer=60)):this.dashState==="COOLDOWN"&&(o=this.speed*.2,this.dashTimer--,this.dashTimer<=0&&(this.dashState="IDLE"))}if(this.supportTimer++,this.supportTimer%60===0){const x=t.enemyGrid.query(this.x,this.y,150);this.type==="screamer"?x.forEach(p=>{p!==this&&(p.buffTimer=120,t.spawnFloater(p.x,p.y,"SPD","#ec4899",8))}):this.type==="healer"?x.forEach(p=>{p!==this&&p.hp<p.maxHp&&(p.hp=Math.min(p.maxHp,p.hp+10),t.spawnFloater(p.x,p.y,"+10","#22c55e",8))}):this.type==="shielder"&&x.forEach(p=>{p!==this&&p.shield<20&&(p.shield=20,t.spawnFloater(p.x,p.y,"SHIELD","#3b82f6",8))})}if(this.acidTimer>0&&(this.acidTimer--,this.acidTimer%60===0&&(this.hp-=5,t.spawnFloater(this.x,this.y,"5","#84cc16",10))),this.isRare&&t.frameCount%60===0){t.enemies.forEach(p=>{p!==this&&Math.hypot(p.x-this.x,p.y-this.y)<200&&(this.passive==="REGEN"&&(p.hp+=2,t.spawnFloater(p.x,p.y,"+2","#22c55e",10)),this.passive==="SPEED"&&(p.speedMod=1.5,p.buffTimer=60))});const x=new Mt;x.stroke({width:2,color:16436245,alpha:.5}),x.circle(0,0,200),this.container.addChild(x),setTimeout(()=>x.destroy(),200)}if(this.buffTimer>0&&(this.speedMod=1.5,this.buffTimer--),this.type==="miner"){let m=null,x=9999;t.trackNodes.forEach(p=>{const y=Math.hypot(p.x-this.x,p.y-this.y);y<x&&(x=y,m=p)}),m&&(r=Math.atan2(m.y-this.y,m.x-this.x),Math.hypot(s.x-this.x,s.y-this.y)<200&&(r=Math.atan2(this.y-s.y,this.x-s.x))),this.skillTimer++,this.skillTimer%180===0&&t.spawnMine(this.x,this.y)}this.knockbackX*=.8,this.knockbackY*=.8,this.frozenTimer>0?(this.speedMod=.5,this.frozenTimer--):this.speedMod=1;const c=o*this.speedMod;if(this.vx=Math.cos(r)*c+this.knockbackX,this.vy=Math.sin(r)*c+this.knockbackY,this.x+=this.vx,this.y+=this.vy,this.container.x=this.x,this.container.y=this.y,this.container.rotation=r,this.isBoss){if(this.skillTimer++,this.type==="queen"&&this.skillTimer%120===0)for(let m=0;m<3;m++)t.enemies.push(new $e(t,this.x+(Math.random()*40-20),this.y+(Math.random()*40-20),"swarmer",!1,this.wave));if(this.type==="sniper_boss"&&this.skillTimer%180===0&&t.fireProjectile(this.x,this.y,s,15,"#ef4444",30,!0),this.type==="tesla_boss"&&this.skillTimer%90===0&&Math.hypot(s.x-this.x,s.y-this.y)<200&&(t.createLightning(this.x,this.y,s.x,s.y),t.damagePlayer(10)),this.type==="phantom"&&this.skillTimer%200===0&&(this.x=s.x+(Math.random()>.5?300:-300),this.y=s.y+(Math.random()>.5?300:-300),t.createExplosion(this.x,this.y,"#fff",20)),this.type==="crusher"){const m=this.skillTimer%240;if(m<180)this.speedMod=1;else if(m<210)this.speedMod=0,this.x+=(Math.random()-.5)*2,this.y+=(Math.random()-.5)*2;else if(m===210){const x=Math.atan2(s.y-this.y,s.x-this.x);this.vx=Math.cos(x)*15,this.vy=Math.sin(x)*15,t.createExplosion(this.x,this.y,"#7f1d1d",10),G.play("spawn")}else this.x+=this.vx,this.y+=this.vy,this.vx*=.9,this.vy*=.9,this.speedMod=0,Math.hypot(s.x-this.x,s.y-this.y)<this.size+20&&t.damagePlayer(2)}if(this.type==="fortress"&&this.skillTimer%300===0){const m=new $e(t,this.x,this.y,"tank",!0,this.wave);m.speed=0,m.color="#52525b",t.enemies.push(m),t.createExplosion(this.x,this.y,"#52525b",10)}if(this.hpBar){this.hpBar.clear(),this.hpBar.fill(0),this.hpBar.rect(-20,-this.size-15,40,6),this.hpBar.fill(15680580);const m=(this.type==="crusher"?2e3:1500)*(1+this.wave*.08),x=Math.max(0,this.hp/m);this.hpBar.rect(-20,-this.size-15,40*x,6)}}let f=(m=>Math.hypot(m.x-this.x,m.y-this.y)<24+this.size)(s);if(f&&s.wagons.some(m=>m.type==="spike")&&(this.hp-=2),f){const m=Math.atan2(this.y-s.y,this.x-s.x);this.knockbackX=Math.cos(m)*10,this.knockbackY=Math.sin(m)*10;let x=(this.isBoss?20:this.type==="tank"?8:1)*(this.isElite?2:1);x*=1-s.ramReduction,x*=.8,t.damagePlayer(x),this.hp-=5+s.ramDamage,t.shake(5),t.createExplosion(this.x,this.y,"#ef4444",5),G.play("explode"),this.type==="boomer"&&(t.createExplosion(this.x,this.y,"#facc15",40),t.damagePlayer(20),this.hp=0)}this.sprite.tint=this.frozenTimer>0?6809849:16777215;const g=1+Math.sin(this.age*.1)*.05;this.sprite.scale.set(g),this.frameCount%2;{const m=this.appendages;m.clear();const x=this.type==="swarmer"?6:this.type==="tank"?4:8,p=this.size*.8;m.stroke({width:2,color:this.color});for(let y=0;y<x;y++){const v=y/x*Math.PI*2+this.age*.05,_=Math.sin(this.age*.5+y)*.3,S=Math.cos(v+_)*p,b=Math.sin(v+_)*p;m.moveTo(0,0),m.lineTo(S,b)}this.shield>0&&(m.stroke({width:2,color:3900150,alpha:.6}),m.circle(0,0,this.size+8))}}destroy(){this.container&&this.container.destroy({children:!0})}}class Ok{constructor(t,s){this.game=t,this.parent=s,this.angle=Math.random()*Math.PI*2,this.dist=40,this.x=0,this.y=0,this.cooldown=0,this.container=new tt,this.graphics=new Mt,this.container.addChild(this.graphics),this.graphics.circle(0,0,3),this.graphics.fill(4906624),this.graphics.circle(0,0,6),this.graphics.fill({color:4906624,alpha:.3}),this.game.layers.air.addChild(this.container)}update(t){if(this.angle+=.05,this.x=this.parent.x+Math.cos(this.angle)*this.dist,this.y=this.parent.y+Math.sin(this.angle)*this.dist,this.container.x=this.x,this.container.y=this.y,this.cooldown>0)this.cooldown--;else{const s=t.getNearestEnemy(this.x,this.y,150);s&&(this.cooldown=30,t.fireProjectile(this.x,this.y,s,10,"#4ade80",5))}}destroy(){this.container&&this.container.destroy({children:!0})}}const Qi=[{id:"gunner",type:"wagon",title:"GUNNER CAR",desc:"Standard auto-turret.",rarity:"common",maxLevel:5,weight:10},{id:"sniper",type:"wagon",title:"SNIPER CAR",desc:"Long range, high damage.",rarity:"rare",maxLevel:5,weight:5},{id:"flame",type:"wagon",title:"FLAMER CAR",desc:"Short range rapid fire.",rarity:"rare",maxLevel:5,weight:10},{id:"shield",type:"wagon",title:"SHIELD CAR",desc:"Protects nearby cars.",rarity:"common",maxLevel:5,weight:20},{id:"miner",type:"wagon",title:"SCRAPPER",desc:"Generates scrap over time.",rarity:"common",maxLevel:5,weight:15},{id:"tesla",type:"wagon",title:"TESLA COIL",desc:"Zaps nearby enemies instantly.",rarity:"rare",maxLevel:5,weight:10},{id:"mortar",type:"wagon",title:"HEAVY MORTAR",desc:"Lobs explosive shells.",rarity:"rare",maxLevel:5,weight:20},{id:"cryo",type:"wagon",title:"CRYO BEAM",desc:"Slows enemies down.",rarity:"common",maxLevel:5,weight:10},{id:"drone",type:"wagon",title:"DRONE BAY",desc:"Deploys attack drones.",rarity:"legendary",maxLevel:5,weight:5},{id:"spike",type:"wagon",title:"SPIKE ARMOR",desc:"Deals damage on contact.",rarity:"common",maxLevel:5,weight:15},{id:"fabricator",type:"wagon",title:"FABRICATOR",desc:"Buffs adjacent wagons damage.",rarity:"rare",maxLevel:5,weight:10},{id:"stasis",type:"wagon",title:"STASIS FIELD",desc:"Slows nearby enemies.",rarity:"common",maxLevel:5,weight:10},{id:"medic",type:"wagon",title:"MEDIC BAY",desc:"Repairs hull over time.",rarity:"rare",maxLevel:5,weight:10},{id:"railgun",type:"wagon",title:"RAILGUN",desc:"High velocity slug, massive knockback.",rarity:"rare",maxLevel:5,weight:15},{id:"acid",type:"wagon",title:"ACID TANK",desc:"Corrosive spray, melts enemies over time.",rarity:"common",maxLevel:5,weight:10},{id:"gravity",type:"wagon",title:"GRAVITY WELL",desc:"Pulls enemies in.",rarity:"rare",maxLevel:5,weight:15},{id:"thumper",type:"wagon",title:"THUMPER",desc:"Shockwave pushes enemies back.",rarity:"common",maxLevel:5,weight:20},{id:"missile",type:"wagon",title:"MISSILE CAR",desc:"Fires homing rockets.",rarity:"rare",maxLevel:5,weight:10},{id:"cluster",type:"wagon",title:"CLUSTER LAUNCHER",desc:"Rocket splits on impact.",rarity:"legendary",maxLevel:5,weight:5},{id:"repair",type:"stat",title:"FULL REPAIR",desc:"Restore 100% Hull.",rarity:"common"},{id:"dmg",type:"stat",title:"TURRET MK2",desc:"+50% Locomotive Damage.",rarity:"rare"},{id:"speed",type:"stat",title:"TURBO PISTON",desc:"+25% Max Speed.",rarity:"rare"},{id:"omni",type:"wagon",title:"OMNI-BATTERY",desc:"Legendary rapid fire array.",rarity:"legendary",weight:10},{id:"ram",type:"stat",title:"RAM PLATING",desc:"Ram damage up, self dmg down.",rarity:"legendary"},{id:"magnet",type:"stat",title:"MAG-CRANE",desc:"+100% Collection Range.",rarity:"rare"}],im=40,nm=[{id:"gearbox",title:"GEARBOX",desc:"+1 Max Speed Gear",color:"#facc15"},{id:"extender",title:"EXTENDER",desc:"+3 Max Wagons",color:"#3b82f6"},{id:"recycler",title:"RECYCLER",desc:"Scrap last wagon for 200 Scrap",color:"#ef4444"},{id:"repair",title:"REPAIR STATION",desc:"Full Heal + 50 Max HP",color:"#22c55e"},{id:"armory",title:"ARMORY",desc:"+20% Global Damage",color:"#a855f7"},{id:"reactor",title:"REACTOR",desc:"+15% Fire Rate",color:"#f97316"},{id:"shield",title:"SHIELD GEN",desc:"Permanent 50 HP Shield",color:"#06b6d4"},{id:"magnet",title:"MAGNET TOWER",desc:"+200% Magnet Range",color:"#ec4899"},{id:"drill",title:"DRILL STATION",desc:"+50 Ram Damage",color:"#94a3b8"},{id:"lab",title:"LABORATORY",desc:"Get a random Rare Wagon",color:"#14b8a6"}],Mo=["crusher","queen","sniper_boss","tesla_boss","fortress","phantom"],zk=[{id:"pioneer",name:"THE PIONEER",desc:"Balanced and reliable. Good for beginners.",stats:{hp:100,speed:5,ram:0,magnet:120},track:"circle",color:"#3b82f6"},{id:"juggernaut",name:"THE JUGGERNAUT",desc:"Heavy armor and crushing ram damage. Slow but tough.",stats:{hp:200,speed:4,ram:50,magnet:100},track:"oval",color:"#ef4444"},{id:"interceptor",name:"THE INTERCEPTOR",desc:"High speed and agility. Weak hull.",stats:{hp:60,speed:7,ram:-20,magnet:150},track:"figure8",color:"#facc15"},{id:"scavenger",name:"THE SCAVENGER",desc:"Optimized for loot collection. Starts with extra scrap.",stats:{hp:80,speed:5.5,ram:0,magnet:200,scrap:50},track:"wide",color:"#a855f7"},{id:"bastion",name:"THE BASTION",desc:"Defensive powerhouse. Starts with a Shield.",stats:{hp:150,speed:4.5,ram:20,magnet:120,shield:50},track:"compact",color:"#10b981"}];class Gk{constructor(t,s,i,n=0){this.game=t,this.x=s,this.y=i,this.rotation=n,this.type=nm[Math.floor(Math.random()*nm.length)],this.radius=40,this.width=120,this.height=60,this.lastLapVisited=-1,this.cooldown=0;const r=Math.cos(n),o=Math.sin(n),a=this.width/2;this.entrance={x:s-r*a,y:i-o*a},this.exit={x:s+r*a,y:i+o*a},this.container=new tt,this.container.x=s,this.container.y=i,this.container.rotation=n,this.graphics=new Mt,this.container.addChild(this.graphics),this.roofContainer=new tt,this.roofContainer.x=s,this.roofContainer.y=i,this.roofContainer.rotation=n,this.roofGraphics=new Mt,this.roofContainer.addChild(this.roofGraphics);const l=new Rr({fontFamily:"monospace",fontSize:10,fontWeight:"bold",fill:"#ffffff",align:"center"});this.titleText=new Nr({text:this.type.title,style:l}),this.titleText.anchor.set(.5,1),this.titleText.y=-20,this.titleText.rotation=-n,this.roofContainer.addChild(this.titleText);const h=new Rr({fontFamily:"monospace",fontSize:8,fill:"#cbd5e1",align:"center"});this.descText=new Nr({text:"PER LAP",style:h}),this.descText.anchor.set(.5,0),this.descText.y=20,this.roofContainer.addChild(this.descText),this.game.layers.ground.addChild(this.container),this.game.layers.air.addChild(this.roofContainer),this.updateVisuals()}update(){this.cooldown>0&&this.cooldown--,this.checkConnection(),this.updateVisuals()}checkConnection(){const t=this.game.trackNodes.find(i=>Math.hypot(i.x-this.entrance.x,i.y-this.entrance.y)<5),s=this.game.trackNodes.find(i=>Math.hypot(i.x-this.exit.x,i.y-this.exit.y)<5);this.connected=!!(t&&s)}checkPassage(t,s){return this.connected&&Math.hypot(t.x-this.x,t.y-this.y)<this.radius&&s>this.lastLapVisited?(this.activate(),this.lastLapVisited=s,!0):!1}activate(){this.cooldown=60;const t=this.type.id,s=O.getState();t==="gearbox"&&(this.game.player.maxSpeed+=.1,this.game.spawnFloater(this.x,this.y,"+SPEED","#facc15")),t==="extender"&&(s.setStats({maxWagonCount:s.maxWagonCount+1}),this.game.spawnFloater(this.x,this.y,"+CAPACITY","#38bdf8")),t==="recycler"&&(s.setStats({scrap:s.scrap+50}),this.game.spawnFloater(this.x,this.y,"+50 SCRAP","#ef4444")),t==="repair"&&(this.game.healPlayer(20),this.game.spawnFloater(this.x,this.y,"REPAIR","#22c55e")),t==="armory"&&(this.game.player.autoDmg*=1.05,this.game.spawnFloater(this.x,this.y,"+DMG","#a855f7")),t==="reactor"&&(this.game.player.wagons.forEach(i=>i.stats.fireRate*=1.02),this.game.spawnFloater(this.x,this.y,"+FIRE RATE","#f97316")),t==="shield"&&(this.game.player.maxHp+=10,this.game.healPlayer(10),this.game.spawnFloater(this.x,this.y,"+MAX HP","#06b6d4")),t==="magnet"&&(this.game.player.magnetRange+=20,this.game.spawnFloater(this.x,this.y,"+MAGNET","#ec4899")),t==="drill"&&(this.game.player.ramDamage+=20,this.game.spawnFloater(this.x,this.y,"+RAM","#94a3b8")),t==="lab"&&(s.setStats({xp:s.xp+50}),this.game.spawnFloater(this.x,this.y,"+50 XP","#14b8a6")),G.play("collect")}updateVisuals(){this.graphics.clear(),this.graphics.rect(-this.width/2,-this.height/2,this.width,this.height),this.graphics.fill({color:988970,alpha:this.connected?.8:.3}),this.graphics.stroke({width:2,color:this.connected?3359061:1976635}),this.graphics.circle(-this.width/2,0,5),this.graphics.fill(2278750),this.graphics.circle(this.width/2,0,5),this.graphics.fill(15680580),this.roofGraphics.clear();let s=this.game.currentLap>this.lastLapVisited?2278750:15680580;this.connected||(s=6583435),this.roofGraphics.roundRect(-this.width/2,-this.height/2-10,this.width,this.height+20,10),this.roofGraphics.stroke({width:4,color:this.connected?this.type.color:4674921}),this.roofGraphics.fill({color:1976635,alpha:this.connected?.5:.2}),this.roofGraphics.rect(-this.width/2,-5,this.width,10),this.roofGraphics.fill({color:s,alpha:.5}),this.titleText.alpha=this.connected?1:.3,this.descText.alpha=this.connected?1:.3}destroy(){this.container&&this.container.destroy({children:!0}),this.roofContainer&&this.roofContainer.destroy({children:!0})}}class rm{constructor(t,s,i,n,r,o,a,l,h,u,c,d,f,g){this.game=t,this.x=s,this.y=i,this.color=o,this.damage=a,this.life=80,this.isExplosive=l,this.isCryo=h,this.knockback=u,this.isAcid=c,this.isGravity=d,this.isMissile=f,this.isCluster=g,this.speed=r,this.target=n;let m=0;if(n){const y=Math.hypot(n.x-s,n.y-i)/r,v=n.x+n.vx*y,_=n.y+n.vy*y;m=Math.atan2(_-i,v-s),this.vx=Math.cos(m)*r,this.vy=Math.sin(m)*r}else this.vx=r,this.vy=0,m=Math.atan2(this.vy,this.vx);this.container=new tt,this.container.x=s,this.container.y=i;const x=this.game.textureGen.generateProjectileTexture(o,4);this.sprite=new Le(x),this.sprite.anchor.set(.5),this.container.addChild(this.sprite),this.isMissile&&(this.sprite.rotation=m+Math.PI/2),this.game.layers.projectiles.addChild(this.container)}update(){if(this.isMissile&&this.target&&this.target.hp>0){const t=this.target.x-this.x,s=this.target.y-this.y,i=Math.atan2(s,t),n=Math.atan2(this.vy,this.vx);let r=i-n;for(;r>Math.PI;)r-=Math.PI*2;for(;r<-Math.PI;)r+=Math.PI*2;const a=n+Math.sign(r)*Math.min(Math.abs(r),.15);this.vx=Math.cos(a)*this.speed,this.vy=Math.sin(a)*this.speed,this.sprite.rotation=a+Math.PI/2}this.x+=this.vx,this.y+=this.vy,this.life--,this.container.x=this.x,this.container.y=this.y}destroy(){this.container&&this.container.destroy({children:!0})}}class eh{constructor(t,s,i,n,r,o,a,l=3,h=!1,u,c){if(this.game=t,this.x=s,this.y=i,this.vx=r,this.vy=o,this.life=a,this.maxLife=a,this.color=n,this.size=l,this.isLightning=h,this.x2=u,this.y2=c,this.container=new tt,h)this.graphics=new Mt,this.container.addChild(this.graphics),this.game.layers.projectiles.addChild(this.container);else{const d=this.game.textureGen.generateParticleTexture(n,l);this.sprite=new Le(d),this.sprite.anchor.set(.5),this.container.addChild(this.sprite),this.game.layers.projectiles.addChild(this.container)}this.updateVisuals()}update(){this.isLightning?(this.life--,this.graphics.alpha=Math.random(),this.updateVisuals()):(this.x+=this.vx,this.y+=this.vy,this.container.x=this.x,this.container.y=this.y,this.life--,this.sprite.alpha=this.life/this.maxLife)}updateVisuals(){this.isLightning&&(this.graphics.clear(),this.graphics.moveTo(this.x,this.y),this.graphics.lineTo(this.x2,this.y2),this.graphics.stroke({width:2,color:16777215}),this.graphics.stroke({width:6,color:10980346,alpha:.5}))}destroy(){this.container&&this.container.destroy({children:!0})}}class Uk{constructor(t,s,i,n,r,o=12){this.game=t,this.x=s,this.y=i,this.life=60,this.maxLife=60,this.container=new tt,this.container.x=s,this.container.y=i;const a=new Rr({fontFamily:"monospace",fontSize:o,fontWeight:"bold",fill:r,stroke:"#000000",strokeThickness:2,align:"center"});this.text=new Nr({text:n,style:a}),this.text.anchor.set(.5),this.container.addChild(this.text),this.game.layers.ui.addChild(this.container)}update(){this.y-=.5,this.life--,this.container.y=this.y,this.container.alpha=this.life/this.maxLife}destroy(){this.container&&this.container.destroy({children:!0})}}class om{constructor(t,s,i,n,r){this.game=t,this.x=s,this.y=i,this.val=n,this.isXp=r,this.life=1800,this.maxLife=1800,this.container=new tt,this.container.x=s,this.container.y=i,this.graphics=new Mt,this.container.addChild(this.graphics),this.game.layers.ground.addChild(this.container),this.updateVisuals()}update(){this.life--,this.container.x=this.x,this.container.y=this.y,this.life<300&&this.life%20===0?this.container.visible=!this.container.visible:this.container.visible=!0}updateVisuals(){this.graphics.clear(),this.isXp?(this.graphics.poly([0,-4,4,0,0,4,-4,0]),this.graphics.fill(11032055),this.graphics.stroke({width:1,color:14202110})):(this.graphics.rect(-3,-3,6,6),this.graphics.fill(16498468),this.graphics.stroke({width:1,color:16096779}))}destroy(){this.container&&this.container.destroy({children:!0})}}class $k{constructor(t,s,i){this.game=t,this.x=s,this.y=i,this.life=600,this.container=new tt,this.container.x=s,this.container.y=i,this.graphics=new Mt,this.container.addChild(this.graphics),this.game.layers.ground.addChild(this.container),this.updateVisuals()}update(){this.life--,this.life%30===0&&(this.graphics.tint=this.graphics.tint===16777215?16711680:16777215)}updateVisuals(){this.graphics.clear(),this.graphics.circle(0,0,6),this.graphics.fill(15680580),this.graphics.stroke({width:2,color:0});for(let t=0;t<4;t++){const s=t/4*Math.PI*2;this.graphics.moveTo(Math.cos(s)*6,Math.sin(s)*6),this.graphics.lineTo(Math.cos(s)*10,Math.sin(s)*10),this.graphics.stroke({width:2,color:15680580})}}destroy(){this.container&&this.container.destroy({children:!0})}}class Wk{constructor(t,s,i){this.width=t,this.height=s,this.cellSize=i,this.cells=new Map}_getKey(t,s){const i=Math.floor(t/this.cellSize),n=Math.floor(s/this.cellSize);return`${i},${n}`}clear(){this.cells.clear()}add(t){const s=this._getKey(t.x,t.y);this.cells.has(s)||this.cells.set(s,[]),this.cells.get(s).push(t)}query(t,s,i){const n=[],r=Math.ceil(i/this.cellSize),o=Math.floor(t/this.cellSize),a=Math.floor(s/this.cellSize);for(let l=-r;l<=r;l++)for(let h=-r;h<=r;h++){const u=`${o+l},${a+h}`;if(this.cells.has(u)){const c=this.cells.get(u);for(const d of c)Math.hypot(d.x-t,d.y-s)<=i&&n.push(d)}}return n}}class Hk{constructor(t){this.app=t,this.textures=new Map}getTexture(t,s){if(this.textures.has(t))return this.textures.get(t);const i=new Mt;s(i);const n=this.app.renderer.generateTexture(i);return this.textures.set(t,n),n}generateEnemyTexture(t,s,i){const n=`enemy_${t}_${s}_${i}`;return this.getTexture(n,r=>{if(t==="kamikaze")r.poly([0,-i,i,i,-i,i]),r.fill(s),r.stroke({width:2,color:0});else if(t==="tank")r.rect(-i,-i,i*2,i*2),r.fill(s),r.stroke({width:2,color:0});else if(t==="swarmer")r.poly([0,-i,i,0,0,i,-i,0]),r.fill(s);else if(t==="shooter"){const o=[];for(let a=0;a<6;a++){const l=a/6*Math.PI*2;o.push(Math.cos(l)*i,Math.sin(l)*i)}r.poly(o),r.fill(s),r.stroke({width:2,color:0})}else if(t==="crusher"){r.circle(0,0,i),r.fill(s),r.stroke({width:3,color:0});for(let o=0;o<8;o++){const a=o/8*Math.PI*2,l=Math.cos(a)*(i+5),h=Math.sin(a)*(i+5);r.moveTo(Math.cos(a)*i,Math.sin(a)*i),r.lineTo(l,h),r.stroke({width:4,color:8330525})}}else t==="fortress"?(r.stroke({width:4,color:5395035}),r.rect(-i*.6,-i*.6,i*1.2,i*1.2),r.stroke({width:2,color:0})):(r.circle(0,0,i),r.fill(s))})}generateProjectileTexture(t,s){const i=`proj_${t}_${s}`;return this.getTexture(i,n=>{t==="missile"?(n.rect(-4,-8,8,16),n.fill(14753096),n.poly([0,-12,4,-8,-4,-8]),n.fill(16777215),n.poly([-4,4,-8,12,-4,8]),n.fill(10424889),n.poly([4,4,8,12,4,8]),n.fill(10424889)):t==="cluster"?(n.rect(-6,-12,12,24),n.fill(1976635),n.poly([0,-18,6,-12,-6,-12]),n.fill(16711680),n.poly([-6,6,-10,16,-6,12]),n.fill(3359061),n.poly([6,6,10,16,6,12]),n.fill(3359061)):t==="cluster_mini"?(n.rect(-2,-4,4,8),n.fill(16436245),n.poly([0,-6,2,-4,-2,-4]),n.fill(16711680)):(n.circle(0,0,s),n.fill(t),n.circle(0,0,s*2),n.fill({color:t,alpha:.3}))})}generateParticleTexture(t,s){const i=`part_${t}_${s}`;return this.getTexture(i,n=>{n.circle(0,0,s);let r=t;t==="cluster"&&(r=15680580),t==="cluster_mini"&&(r=16436245),t==="missile"&&(r=16436245),n.fill(r)})}generateWagonChassisTexture(t,s,i){const n=`wagon_chassis_${t}_${s}_${i}`;return this.getTexture(n,r=>{r.rect(-18,-14,36,28),r.fill(3359061),r.stroke({width:2,color:1976635});for(let o=0;o<s;o++)r.circle(-14+o*6,-8,2),r.fill(16498468);t==="miner"&&(r.rect(-12,-4,24,8),r.fill(8736014))})}generateWagonTurretTexture(t,s){const i=`wagon_turret_${t}_${s}`;return this.getTexture(i,n=>{t==="gunner"?(n.rect(-12,-12,24,24),n.fill(4674921),n.rect(0,-4,22,8),n.fill(3900150)):t==="sniper"?(n.rect(-12,-12,24,24),n.fill(1976635),n.rect(0,-3,32,6),n.fill(16436245)):t==="flame"?(n.rect(-12,-12,24,24),n.fill(8330525),n.rect(0,-6,20,12),n.fill(16347926)):t==="mortar"?(n.rect(-12,-12,24,24),n.fill(4144966),n.circle(0,0,12),n.fill(0)):t==="cryo"?(n.rect(-12,-12,24,24),n.fill(1461859),n.rect(0,-4,20,8),n.fill(6809849)):t==="railgun"?(n.rect(-12,-12,24,24),n.fill(988970),n.rect(0,-2,36,4),n.fill(16777215)):t==="acid"?(n.rect(-12,-12,24,24),n.fill(3560212),n.rect(0,-5,18,10),n.fill(8702998)):t==="gravity"?(n.rect(-12,-12,24,24),n.fill(3018853),n.circle(8,0,8),n.fill(8141549)):t==="shield"?(n.circle(0,0,16),n.fill(223649),n.stroke({width:2,color:3718648})):t==="tesla"?(n.rect(-12,-12,24,24),n.fill(4988309),n.circle(0,0,8),n.fill(10980346)):t==="drone"?(n.rect(-12,-12,24,24),n.fill(1332013),n.rect(-8,-8,16,16),n.stroke({width:1,color:4906624})):t==="spike"?(n.rect(-12,-12,24,24),n.fill(8330525),n.poly([12,-12,24,-12,18,0]),n.fill(10033947),n.poly([12,12,24,12,18,0]),n.fill(10033947)):t==="fabricator"?(n.rect(-12,-12,24,24),n.fill(12730636),n.circle(0,0,10),n.fill(16628340)):t==="stasis"?(n.rect(-12,-12,24,24),n.fill(3223169),n.circle(0,0,12),n.stroke({width:2,color:8490232})):t==="medic"?(n.rect(-12,-12,24,24),n.fill(12456508),n.rect(-4,-8,8,16),n.fill(16777215),n.rect(-8,-4,16,8),n.fill(16777215)):t==="thumper"?(n.rect(-14,-14,28,28),n.fill(4937059),n.circle(0,0,10),n.stroke({width:2,color:16777215})):t==="missile"?(n.rect(-12,-12,24,24),n.fill(8917815),n.rect(-10,-8,6,16),n.fill(14753096),n.rect(4,-8,6,16),n.fill(14753096)):t==="cluster"&&(n.rect(-14,-14,28,28),n.fill(1976635),n.circle(-6,-6,4),n.fill(0),n.circle(6,-6,4),n.fill(0),n.circle(-6,6,4),n.fill(0),n.circle(6,6,4),n.fill(0))})}generateEngineTexture(t,s){const i=`engine_${t}_${s}`;return this.getTexture(i,n=>{n.rect(-20,-16,40,32),n.fill(988970),n.stroke({width:2,color:16436245}),n.rect(-10,-10,20,20),n.fill(1976635),n.poly([20,-16,30,0,20,16]),n.fill(16436245)})}}class Yk{constructor(t){this.canvas=t,this.initialized=!1,console.log("Game Constructor Start"),this.trackNodes=[],this.enemies=[],this.enemyGrid=new Wk(5e3,5e3,150),this.particles=[],this.floaters=[],this.projectiles=[],this.crystals=[],this.looseScrap=[],this.looseXp=[],this.drones=[],this.depots=[],this.mines=[],this.player={trackPos:0,totalDist:0,x:0,y:0,angle:0,speed:0,gear:0,maxSpeed:5,hp:100,maxHp:100,autoDmg:10,range:5,magnetRange:120,ramReduction:0,ramDamage:0,history:[],wagons:[]},this.keys={w:!1,s:!1,space:!1},this.mouse={x:0,y:0,down:!1,rightDown:!1,dragging:null},this.cameraMode="follow",this.difficulty={id:"normal",multiplier:1},this.bindInput(),O.getState().setGameState("SETUP")}toggleCamera(){if(this.cameraMode=this.cameraMode==="follow"?"birdseye":"follow",this.cameraMode==="birdseye"){const t=Math.min(this.app.screen.width,this.app.screen.height);this.targetZoom=t/(this.worldRadius*2+100)}else this.targetZoom=1;this.spawnFloater(this.player.x,this.player.y,`CAMERA: ${this.cameraMode.toUpperCase()}`,"#38bdf8",16),O.getState().setStats({cameraMode:this.cameraMode})}async init(t){this.app=new Vx,await this.app.init({canvas:this.canvas,resizeTo:window,backgroundColor:988970}),console.log("PixiJS Initialized"),this.setupLayers(),this.textureGen=new Hk(this.app),this.initialized=!0,t&&t(this),this.start()}setupLayers(){this.world=new tt,this.app.stage.addChild(this.world),this.layers={background:new tt,tracks:new tt,shadows:new tt,ground:new tt,air:new tt,projectiles:new tt,ui:new tt},this.world.addChild(this.layers.background),this.world.addChild(this.layers.tracks),this.world.addChild(this.layers.shadows),this.world.addChild(this.layers.ground),this.world.addChild(this.layers.air),this.world.addChild(this.layers.projectiles),this.world.addChild(this.layers.ui),this.gridGraphic=new Mt,this.boundsGraphic=new Mt,this.layers.background.addChild(this.gridGraphic),this.layers.background.addChild(this.boundsGraphic)}startGame(t,s,i){console.log("Game Starting...",i),this.waveTimer=0,this.waveDuration=1800,this.baseRadius=600,this.worldRadius=600,this.frameCount=0,this.zoom=1,this.targetZoom=1,this.shakeIntensity=0,this.difficulty=i||{id:"normal",multiplier:1},this.resize(),this.drawWorldBounds(),this.initTrack(t.track),this.initPlayer(t,s),O.getState().setStats({hp:this.player.hp,maxHp:this.player.maxHp,scrap:t.stats.scrap||100,wave:1,level:1,xp:0,maxXp:100}),this.start(),O.getState().setGameState("PLAY"),G.startMusic(),console.log("Game Started. State set to PLAY.")}resize(){if(!this.app||!this.app.renderer)return;const t=this.canvas.width/2,s=this.canvas.height/2,i=this.app.screen.width/2,n=this.app.screen.height/2;if(t&&s){const r=i-t,o=n-s;this.trackNodes.forEach(a=>{a.x+=r,a.y+=o}),this.player.x+=r,this.player.y+=o,this.enemies.forEach(a=>{a.x+=r,a.y+=o}),this.crystals.forEach(a=>{a.x+=r,a.y+=o}),this.looseScrap.forEach(a=>{a.x+=r,a.y+=o}),this.looseXp.forEach(a=>{a.x+=r,a.y+=o}),this.depots.forEach(a=>{a.x+=r,a.y+=o}),this.mines.forEach(a=>{a.x+=r,a.y+=o})}}bindInput(){window.addEventListener("keydown",t=>{t.key.toLowerCase()==="w"&&(this.keys.w=!0),t.key.toLowerCase()==="s"&&(this.keys.s=!0),t.key===" "&&(this.keys.space=!0),t.key.toLowerCase()==="c"&&this.toggleCamera()}),this.canvas.addEventListener("mousemove",t=>{const s=this.canvas.getBoundingClientRect();this.mouse.x=t.clientX-s.left,this.mouse.y=t.clientY-s.top}),this.canvas.addEventListener("mousedown",t=>{t.button===0&&(this.mouse.down=!0),t.button===2&&(this.mouse.rightDown=!0)}),this.canvas.addEventListener("mouseup",t=>{t.button===0&&(this.mouse.down=!1),t.button===2&&(this.mouse.rightDown=!1)}),this.canvas.addEventListener("contextmenu",t=>t.preventDefault())}initTrack(t){const s=this.app?this.app.screen.width/2:window.innerWidth/2,i=this.app?this.app.screen.height/2:window.innerHeight/2,n=200;if(t==="oval")for(let r=0;r<12;r++){const o=r/12*Math.PI*2,a=s+200*Math.sin(o),l=i+100*Math.sin(2*o);this.trackNodes.push({x:a,y:l})}else if(t==="wide")for(let r=0;r<10;r++){const o=r/10*Math.PI*2;this.trackNodes.push({x:s+Math.cos(o)*220,y:i+Math.sin(o)*220})}else if(t==="compact")for(let r=0;r<6;r++){const o=r/6*Math.PI*2;this.trackNodes.push({x:s+Math.cos(o)*100,y:i+Math.sin(o)*100})}else for(let r=0;r<8;r++){const o=r/8*Math.PI*2;this.trackNodes.push({x:s+Math.cos(o)*n,y:i+Math.sin(o)*n})}this.trackNodes.forEach(r=>{r.targetX=r.x,r.targetY=r.y}),this.drawTrack()}drawTrack(){const t=new Mt;if(this.layers.tracks.removeChildren(),this.layers.tracks.addChild(t),!(this.trackNodes.length<2)){t.moveTo(this.trackNodes[0].x,this.trackNodes[0].y);for(let s=0;s<=this.trackNodes.length;s+=.1){const i=St(s,this.trackNodes);s===0?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y)}t.stroke({width:45,color:959977,alpha:.1});for(let s=0;s<=this.trackNodes.length;s+=.05){const i=St(s,this.trackNodes),n=St(s+.01,this.trackNodes),r=Math.atan2(n.y-i.y,n.x-i.x),o=Math.cos(r+Math.PI/2)*12,a=Math.sin(r+Math.PI/2)*12;t.moveTo(i.x-o,i.y-a),t.lineTo(i.x+o,i.y+a),t.stroke({width:4,color:1976635,alpha:.8})}t.moveTo(this.trackNodes[0].x,this.trackNodes[0].y);for(let s=0;s<=this.trackNodes.length;s+=.1){const i=St(s,this.trackNodes);s===0?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y)}if(t.stroke({width:6,color:988970}),t.stroke({width:2,color:3718648}),this.mouse.dragging!==null&&this.mouse.dragPos){const s=this.mouse.dragging,i=this.mouse.dragPos,n=[...this.trackNodes];n[s]={x:i.x,y:i.y,fixed:this.trackNodes[s].fixed};const r=this.mouse.dragValid?2278750:15680580;t.moveTo(n[0].x,n[0].y);for(let o=0;o<=n.length;o+=.1){const a=St(o,n);o===0?t.moveTo(a.x,a.y):t.lineTo(a.x,a.y)}if(t.stroke({width:6,color:r,alpha:.6}),t.stroke({width:2,color:16777215,alpha:.8}),this.mouse.dragCost>0){const o=new Nr(`-${this.mouse.dragCost}`,{fontFamily:"monospace",fontSize:14,fill:this.mouse.dragValid?16436245:15680580,align:"center",stroke:0,strokeThickness:4});o.x=i.x-o.width/2,o.y=i.y-40,this.layers.tracks.addChild(o)}if(!this.mouse.dragValid&&this.mouse.dragError){const o=new Nr(this.mouse.dragError,{fontFamily:"monospace",fontSize:12,fill:15680580,align:"center",fontWeight:"bold",stroke:0,strokeThickness:3});o.x=i.x-o.width/2,o.y=i.y+20,this.layers.tracks.addChild(o)}}this.trackNodes.forEach((s,i)=>{let n=s.x,r=s.y,o=3718648;this.mouse.dragging===i&&this.mouse.dragPos&&(n=this.mouse.dragPos.x,r=this.mouse.dragPos.y,o=this.mouse.dragValid?2278750:15680580),t.circle(n,r,4),t.fill(o)})}}drawWorldBounds(){if(!this.boundsGraphic)return;const t=this.boundsGraphic;t.clear();const s=this.app.screen.width/2,i=this.app.screen.height/2,n=this.worldRadius,r=60,o=Math.PI*2/r;for(let a=0;a<r;a++)if(a%2===0){const l=a*o,h=(a+1)*o;t.arc(s,i,n,l,h),t.stroke({width:2,color:15680580,alpha:.3})}}initPlayer(t,s){this.player.maxHp=t.stats.hp,this.player.hp=t.stats.hp,this.player.maxSpeed=t.stats.speed,this.player.ramDamage=t.stats.ram,this.player.magnetRange=t.stats.magnet,this.player.gear=1,this.player.speed=1;const i=St(0,this.trackNodes);this.player.x=i.x,this.player.y=i.y,this.player.trackPos=0,this.player.totalDist=0,this.player.history=[];for(let r=300;r>=0;r--)this.player.history.push({dist:-(r*1),t:-(r*.01)});this.player.wagons.push(new sm(this,s.id,0)),O.getState().setStats({wagonCount:1,maxWagonCount:this.trackNodes.length}),this.playerSprite&&this.playerSprite.destroy();const n=this.textureGen.generateEngineTexture(t.id,"#facc15");this.playerSprite=new Le(n),this.playerSprite.anchor.set(.5),this.layers.ground.addChild(this.playerSprite)}start(){this.running=!0,this.app&&this.app.ticker.add(this.update,this)}stop(){this.running=!1,this.app&&this.app.ticker&&this.app.ticker.remove(this.update,this),window.removeEventListener("resize",this.handleResize)}destroy(){this.stop(),this.app&&(this.app.destroy(!0,{children:!0,texture:!0,baseTexture:!0}),this.app=null),this.initialized=!1}update(){if(!this.initialized)return;const t=O.getState();if(t.gameState!=="PLAY")return;this.frameCount++,this.updateTrackAnimations(),this.handleInput(t),this.updatePhysics(),this.manageWaves(t),this.collectLoot(t),this.playerSprite&&(this.playerSprite.x=this.player.x,this.playerSprite.y=this.player.y,this.playerSprite.rotation=this.player.angle),this.player.wagons.forEach((r,o)=>r.update(this,o)),this.drones.forEach(r=>r.update(this));const s=this.app.screen.width/2,i=this.app.screen.height/2;if(this.cameraMode==="birdseye"?this.world.pivot.set(s,i):this.mouse.dragging===null&&this.world.pivot.set(this.player.x,this.player.y),this.world.position.set(s,i),this.zoom+=(this.targetZoom-this.zoom)*.05,this.world.scale.set(this.zoom),this.frameCount%30===0){const r=this.getNearestEnemy(this.player.x,this.player.y,200);r&&(this.fireProjectile(this.player.x+16,this.player.y+16,r,10,"#fbbf24",this.player.autoDmg),G.play("shoot",(this.player.x-this.canvas.width/2)/(this.canvas.width/2)))}this.crystals.forEach(r=>r.update(this)),this.crystals=this.crystals.filter(r=>r.active);for(let r=this.enemies.length-1;r>=0;r--){const o=this.enemies[r];o.update(this),o.hp<=0&&(this.spawnXp(o.x,o.y,o.xp),o.destroy(),this.enemies.splice(r,1))}this.updateProjectiles(),this.updateParticles(),this.enemyGrid.clear(),this.enemies.forEach(r=>this.enemyGrid.add(r));for(let r=this.mines.length-1;r>=0;r--){const o=this.mines[r];if(o.update(),Math.hypot(this.player.x-o.x,this.player.y-o.y)<30){this.createExplosion(o.x,o.y,"#ef4444",10),this.damagePlayer(15),G.play("explode",(o.x-this.canvas.width/2)/(this.canvas.width/2)),o.destroy(),this.mines.splice(r,1);continue}o.life<=0&&(o.destroy(),this.mines.splice(r,1))}const n=Math.floor(this.player.trackPos/this.trackNodes.length);this.depots.forEach(r=>{r.update(),r.checkPassage(this.player,n)})}advanceWave(){this.waveTimer=this.waveDuration}toggleGodMode(){this.godMode=!this.godMode,this.spawnFloater(this.player.x,this.player.y,this.godMode?"GOD MODE ON":"GOD MODE OFF","#facc15",16),O.getState().setStats({godMode:this.godMode})}spawnMiniBoss(){const t=Mo[Math.floor(Math.random()*Mo.length)],s=Math.random()*Math.PI*2,i=400,n=this.player.x+Math.cos(s)*i,r=this.player.y+Math.sin(s)*i;this.enemies.push(new $e(this,n,r,t,!1,this.wave||10)),this.spawnFloater(n,r,"DEBUG BOSS","#ef4444",32),G.play("spawn",(n-this.canvas.width/2)/(this.canvas.width/2))}getNearestEnemy(t,s,i){let n=null,r=i;return this.enemyGrid.query(t,s,i).forEach(a=>{const l=Math.hypot(a.x-t,a.y-s);l<r&&(r=l,n=a)}),n}getStrongestEnemy(t,s,i){let n=null,r=-1,o=i;return this.enemyGrid.query(t,s,i).forEach(l=>{const h=Math.hypot(l.x-t,l.y-s);h<=i&&(l.hp>r?(r=l.hp,n=l,o=h):l.hp===r&&h<o&&(n=l,o=h))}),n}getClusteredEnemy(t,s,i){let n=null,r=-1;const o=120;return this.enemyGrid.query(t,s,i).forEach(l=>{if(Math.hypot(l.x-t,l.y-s)<=i){let u=0;this.enemyGrid.query(l.x,l.y,o).forEach(d=>{l!==d&&Math.hypot(l.x-d.x,l.y-d.y)<=o&&u++}),u>r&&(r=u,n=l)}}),n||this.getNearestEnemy(t,s,i)}fireProjectile(t,s,i,n,r,o,a=!1,l=!1,h=0,u=!1,c=!1,d=!1,f=!1){this.projectiles.push(new rm(this,t,s,i,n,r,o,a,l,h,u,c,d,f))}createShockwave(t,s,i,n){this.createExplosion(t,s,"#fff",10),this.enemies.forEach(r=>{if(Math.hypot(r.x-t,r.y-s)<i){const a=Math.atan2(r.y-s,r.x-t);r.knockbackX+=Math.cos(a)*n,r.knockbackY+=Math.sin(a)*n,r.hp-=5}})}spawnScrap(t,s,i){this.looseScrap.push(new om(this,t,s,i,!1))}spawnXp(t,s,i){this.looseXp.push(new om(this,t,s,i,!0))}spawnDrone(t){this.drones.push(new Ok(this,t))}createExplosion(t,s,i,n){for(let r=0;r<n;r++){const o=30+Math.random()*20,a=(Math.random()-.5)*8,l=(Math.random()-.5)*8;this.particles.push(new eh(this,t,s,i,a,l,o))}}spawnMine(t,s){this.mines.push(new $k(this,t,s))}createLightning(t,s,i,n){this.particles.push(new eh(this,t,s,"#fff",0,0,5,1,!0,i,n))}spawnFloater(t,s,i,n,r=12){this.floaters.push(new Uk(this,t,s,i,n,r))}shake(t){this.shakeIntensity=t}damagePlayer(t){this.godMode||(this.player.hp-=t,O.getState().setStats({hp:this.player.hp}))}healPlayer(t){this.player.hp=Math.min(this.player.maxHp,this.player.hp+t),O.getState().setStats({hp:this.player.hp})}updateTrackAnimations(){let t=!1;this.trackNodes.forEach(s=>{if(s.targetX!==void 0&&s.targetY!==void 0){const i=s.targetX-s.x,n=s.targetY-s.y;Math.hypot(i,n)>.5?(s.x+=i*.2,s.y+=n*.2,t=!0):(s.x=s.targetX,s.y=s.targetY)}}),t&&this.drawTrack()}handleInput(t){if(this.keys.space)if(this.keys.space=!1,t.scrap>=20){O.getState().setStats({scrap:t.scrap-20}),this.spawnFloater(this.player.x,this.player.y,"SALVO!","#facc15",16),G.play("shoot",(this.player.x-this.canvas.width/2)/(this.canvas.width/2));for(let o=0;o<5;o++){const a=this.getNearestEnemy(this.player.x,this.player.y,400);a&&setTimeout(()=>{this.fireProjectile(this.player.x,this.player.y,a,12,"#facc15",this.player.autoDmg*2),this.createExplosion(this.player.x,this.player.y,"#facc15",2)},o*50)}}else this.spawnFloater(this.player.x,this.player.y,"NO SCRAP","#ef4444",12);const s=this.world.toLocal({x:this.mouse.x,y:this.mouse.y});let i=-1;for(let o=0;o<this.trackNodes.length;o++)if(Math.hypot(s.x-this.trackNodes[o].x,s.y-this.trackNodes[o].y)<20){i=o;break}let n=!1;if(i===-1)for(let o=0;o<this.trackNodes.length;o+=.2){const a=St(o,this.trackNodes);if(Math.hypot(s.x-a.x,s.y-a.y)<20){n=!0;break}}let r="default";if(this.mouse.dragging!==null?r="grabbing":i!==-1?r="grab":n&&(r="cell"),this.canvas.style.cursor=r,this.mouse.down&&this.mouse.dragging!==null){const o=this.mouse.dragging,a=this.trackNodes[o];if(a.fixed){this.spawnFloater(a.x,a.y,"LOCKED","#ef4444",10),this.mouse.dragging=null;return}let l=s.x,h=s.y;for(const x of this.depots)Math.hypot(l-x.entrance.x,h-x.entrance.y)<30?(l=x.entrance.x,h=x.entrance.y):Math.hypot(l-x.exit.x,h-x.exit.y)<30&&(l=x.exit.x,h=x.exit.y);this.mouse.dragPos={x:l,y:h},this.mouse.dragValid=!0,this.mouse.dragError=null;const u=this.trackNodes[(o-1+this.trackNodes.length)%this.trackNodes.length],c=this.trackNodes[(o+1)%this.trackNodes.length];(Math.hypot(l-u.x,h-u.y)<50||Math.hypot(l-c.x,h-c.y)<50)&&(this.mouse.dragValid=!1,this.mouse.dragError="TOO CLOSE"),this.checkSharpness(o,l,h)&&(this.mouse.dragValid=!1,this.mouse.dragError="TOO SHARP"),(this.isNodeLocked(o)||t.gameState!=="PLAY")&&(this.mouse.dragValid=!1,this.mouse.dragError="TRAIN ON TRACK");const d=Hf(this.trackNodes),f={x:a.x,y:a.y};a.x=l,a.y=h;const g=Hf(this.trackNodes);a.x=f.x,a.y=f.y;const m=g-d;this.mouse.dragCost=0,m>0&&(this.mouse.dragCost=Math.ceil(m*.5),t.scrap<this.mouse.dragCost&&(this.mouse.dragValid=!1,this.mouse.dragError="NO SCRAP")),this.drawTrack()}else if(this.mouse.down&&i!==-1&&this.mouse.dragging===null)this.trackNodes[i].fixed?this.frameCount%60===0&&this.spawnFloater(this.trackNodes[i].x,this.trackNodes[i].y,"LOCKED","#ef4444",10):(this.mouse.dragging=i,this.mouse.dragStart={x:this.trackNodes[i].x,y:this.trackNodes[i].y},this.mouse.dragPos={x:this.trackNodes[i].x,y:this.trackNodes[i].y},this.mouse.dragValid=!0);else if(!this.mouse.down&&this.mouse.dragging!==null){const o=this.mouse.dragging,a=this.trackNodes[o];if(this.mouse.dragValid){a.targetX=this.mouse.dragPos.x,a.targetY=this.mouse.dragPos.y,this.mouse.dragCost>0&&(O.getState().setStats({scrap:t.scrap-this.mouse.dragCost}),this.spawnFloater(a.x,a.y,`-${this.mouse.dragCost}`,"#ef4444",12));for(const l of this.depots)Math.hypot(a.x-l.entrance.x,a.y-l.entrance.y)<10&&(a.fixed=!0,this.spawnFloater(a.x,a.y,"CONNECTED","#22c55e",12),G.play("build")),Math.hypot(a.x-l.exit.x,a.y-l.exit.y)<10&&(a.fixed=!0,this.spawnFloater(a.x,a.y,"CONNECTED","#22c55e",12),G.play("build"));G.play("build")}else this.spawnFloater(this.mouse.dragPos.x,this.mouse.dragPos.y,this.mouse.dragError||"INVALID","#ef4444",12);this.mouse.dragging=null,this.mouse.dragPos=null,this.drawTrack()}if(this.mouse.rightDown)if(i!==-1)this.trackNodes.length>4&&t.scrap>=10&&(this.trackNodes.splice(i,1),O.getState().setStats({scrap:t.scrap-10}),this.mouse.rightDown=!1,G.play("build",(s.x-this.canvas.width/2)/(this.canvas.width/2)),O.getState().setStats({maxWagonCount:this.trackNodes.length}),this.drawTrack());else{let o=999,a=-1;for(let l=0;l<this.trackNodes.length;l+=.1){const h=St(l,this.trackNodes),u=Math.hypot(s.x-h.x,s.y-h.y);u<20&&u<o&&(o=u,a=l)}if(a!==-1&&t.scrap>=im){if(St(a,this.trackNodes),Math.hypot(s.x-this.canvas.width/2,s.y-this.canvas.height/2)>this.worldRadius){this.spawnFloater(s.x,s.y,"OUT OF BOUNDS","#ef4444",12);return}const h=Math.floor(a)+1;if([...this.trackNodes].splice(h,0,{x:s.x,y:s.y}),this.trackNodes.splice(h,0,{x:s.x,y:s.y}),this.checkSharpness(h,s.x,s.y)){this.trackNodes.splice(h,1),this.spawnFloater(s.x,s.y,"TOO SHARP","#ef4444",12);return}const c=this.player.x,d=this.player.y;this.player.wagons.map(g=>({x:g.x,y:g.y})),this.player.trackPos=this.getClosestT(c,d);const f=[];f.push({dist:this.player.totalDist,t:this.player.trackPos}),this.player.history=f,O.getState().setStats({scrap:t.scrap-im}),this.spawnFloater(s.x,s.y,"-40","#ef4444"),G.play("build",(s.x-this.canvas.width/2)/(this.canvas.width/2)),this.mouse.rightDown=!1,O.getState().setStats({maxWagonCount:this.trackNodes.length}),this.drawTrack()}}}updatePhysics(){if(!this.trackNodes||this.trackNodes.length===0)return;this.keys.w&&(this.player.gear=Math.min(3,this.player.gear+1),this.keys.w=!1),this.keys.s&&(this.player.gear=Math.max(-1,this.player.gear-1),this.keys.s=!1);let t=100;this.player.wagons.forEach(f=>{const g=Qi.find(m=>m.id===f.type);g&&(t+=g.weight||10)});let s=0,i=.05*(100/t);if(this.player.gear===1?(s=this.player.maxSpeed*.25,i=.1*(100/t)):this.player.gear===2?(s=this.player.maxSpeed*.6,i=.08*(100/t)):this.player.gear===3?(s=this.player.maxSpeed,i=.05*(100/t)):this.player.gear===-1?(s=-1.5,i=.1):this.player.gear===0&&(s=0,i=.2),this.player.speed+=(s-this.player.speed)*i,this.frameCount%5===0&&O.getState().setStats({speed:this.player.speed,gear:this.player.gear}),this.player.ramDamage=t*Math.abs(this.player.speed)*.1,Math.abs(this.player.speed)<.05&&this.player.gear===0&&(this.player.speed=0),this.player.speed===0)return;const n=.05,r=St(this.player.trackPos,this.trackNodes),o=St(this.player.trackPos+n,this.trackNodes),a=Math.hypot(o.x-r.x,o.y-r.y),h=Math.max(.1,a)/n,u=this.player.speed/Math.max(1,h);this.player.trackPos+=u,this.player.totalDist+=this.player.speed;const c=St(this.player.trackPos,this.trackNodes),d=St(this.player.trackPos+.1,this.trackNodes);if(this.player.x=c.x,this.player.y=c.y,this.player.angle=Math.atan2(d.y-c.y,d.x-c.x),(this.player.history.length===0||Math.abs(this.player.totalDist-this.player.history[this.player.history.length-1].dist)>.5)&&(this.player.history.push({dist:this.player.totalDist,t:this.player.trackPos}),this.player.history.length>2e3&&this.player.history.shift()),Math.abs(this.player.speed)>.1&&this.frameCount%20===0){const f=Math.random()-.5,g=Math.random()-.5;this.particles.push(new eh(this,this.player.x,this.player.y,"rgba(255,255,255,0.1)",f,g,60,5))}}manageWaves(t){this.waveTimer++,this.frameCount%5===0&&O.getState().setStats({waveTimer:this.waveTimer});let s=180;this.difficulty.id==="easy"&&(s=240),this.difficulty.id==="hard"&&(s=120);const i=Math.max(30,s-t.wave*5);if(this.waveTimer%i===0&&this.spawnOneEnemy(t.wave),this.waveTimer>=this.waveDuration){this.waveTimer=0;const n=t.wave+1;if(O.getState().setStats({wave:n}),this.spawnFloater(this.player.x,this.player.y,`WAVE ${n}`,"#facc15",32),G.play("levelup"),this.difficulty.multiplier+=.1,this.worldRadius+=100,this.drawWorldBounds(),this.cameraMode==="birdseye"){const r=Math.min(this.app.screen.width,this.app.screen.height);this.targetZoom=r/(this.worldRadius*2+100)}}}spawnOneEnemy(t){if(t%10===0&&this.enemies.filter(s=>s.isBoss).length===0){const s=Mo[Math.floor(t/10%Mo.length)],i=Math.random()*Math.PI*2,n=this.worldRadius+100,r=this.canvas.width/2+Math.cos(i)*n,o=this.canvas.height/2+Math.sin(i)*n;this.enemies.push(new $e(this,r,o,s,!1,t)),this.spawnFloater(r,o,"BOSS APPROACHING!","#ef4444",32),G.play("spawn",(r-this.canvas.width/2)/(this.canvas.width/2)),this.enemies.push(new $e(this,r+40,o+40,"tank",!1,t)),this.enemies.push(new $e(this,r-40,o-40,"tank",!1,t))}else{if(t>4&&Math.random()<.15){const u=["screamer","healer","shielder"],c=u[Math.floor(Math.random()*u.length)],d=Math.random()*Math.PI*2,f=this.worldRadius+50,g=this.canvas.width/2+Math.cos(d)*f,m=this.canvas.height/2+Math.sin(d)*f;this.spawnSquad(c,g,m,t);return}let s="normal";const i=Math.random();t>2&&i<.3&&(s="swarmer"),t>3&&i>.6&&(s="dasher"),t>4&&i>.75&&(s="miner"),t>5&&i>.85&&(s="boomer"),t>6&&i>.9&&(s="tank"),t>2&&i>.5&&i<.6&&(s="shooter"),t>4&&i>.3&&i<.4&&(s="screamer"),t>5&&i>.4&&i<.5&&(s="healer"),t>6&&i>.1&&i<.2&&(s="shielder");const n=Math.random()<.05+t*.005,r=!n&&Math.random()<.05,o=Math.random()*Math.PI*2,a=this.worldRadius+50,l=this.canvas.width/2+Math.cos(o)*a,h=this.canvas.height/2+Math.sin(o)*a;this.enemies.push(new $e(this,l,h,s,n,t,r))}}spawnSquad(t,s,i,n){this.enemies.push(new $e(this,s,i,t,!0,n)),this.spawnFloater(s,i,"SQUAD DETECTED","#facc15",20);const r=[{x:-30,y:-30},{x:30,y:-30},{x:-30,y:30},{x:30,y:30}];let o="tank";t==="screamer"&&(o="swarmer"),t==="healer"&&(o="shooter"),t==="shielder"&&(o="tank"),r.forEach(a=>{this.enemies.push(new $e(this,s+a.x,i+a.y,o,!1,n))})}spawnDepot(t,s){this.depots.push(new Gk(this,t,s)),this.spawnFloater(t,s,"DEPOT DROPPED!","#fbbf24",20),G.play("build",(t-this.canvas.width/2)/(this.canvas.width/2))}collectLoot(t){const s=i=>{for(let n=i.length-1;n>=0;n--){const r=i[n];r.update();const o=Math.hypot(this.player.x-r.x,this.player.y-r.y);if(o<this.player.magnetRange&&(r.x+=(this.player.x-r.x)*.15,r.y+=(this.player.y-r.y)*.15,o<30)){r.isXp?(this.gainXp(r.val,t),this.spawnFloater(r.x,r.y,`+${r.val} XP`,"#a855f7")):(O.getState().setStats({scrap:t.scrap+r.val}),this.spawnFloater(r.x,r.y,`+${r.val}`,"#fbbf24")),r.destroy(),i.splice(n,1),G.play("collect",(r.x-this.canvas.width/2)/(this.canvas.width/2));continue}r.life<=0&&(r.destroy(),i.splice(n,1))}};s(this.looseScrap),s(this.looseXp)}gainXp(t,s){let i=s.xp+t;if(i>=s.maxXp){i-=s.maxXp;const n=s.level+1,r=Math.floor(s.maxXp*1.2);O.getState().setStats({xp:i,level:n,maxXp:r}),O.getState().setGameState("LEVEL_UP"),G.play("levelup")}else O.getState().setStats({xp:i})}forceLevelUp(){const t=O.getState();this.gainXp(t.maxXp-t.xp,t)}debugAutoLevelUp(){const{ownedWagons:t,wagonCount:s,maxWagonCount:i}=O.getState();let n=Qi;if(s>=i&&(n=Qi.filter(r=>r.type==="stat"||r.type==="wagon"&&t.some(o=>o.id===r.id))),n.length>0){const r=n[Math.floor(Math.random()*n.length)];this.selectCard(r)}}debugAddScrap(){const t=O.getState();O.getState().setStats({scrap:t.scrap+1e3}),this.spawnFloater(this.player.x,this.player.y,"+1000 SCRAP","#fbbf24",24),G.play("collect")}debugSpawnDepot(){const t=Math.random()*Math.PI*2,s=300,i=this.player.x+Math.cos(t)*s,n=this.player.y+Math.sin(t)*s;this.spawnDepot(i,n)}isNodeLocked(t){const s=this.trackNodes.length,i=n=>{const r=Math.floor(n),o=Math.abs(r-t),a=Math.abs(r-t+s)%s,l=Math.abs(r-t-s)%s;return o<=1||a<=1||l<=1};if(i(this.player.trackPos))return!0;for(const n of this.player.wagons)if(i(n.trackPos))return!0;return!1}getClosestT(t,s){let i=0,n=1/0;for(let a=0;a<this.trackNodes.length;a+=.5){const l=St(a,this.trackNodes),h=Math.hypot(l.x-t,l.y-s);h<n&&(n=h,i=a)}let r=i-.5,o=i+.5;for(let a=r;a<=o;a+=.05){const l=St(a,this.trackNodes),h=Math.hypot(l.x-t,l.y-s);h<n&&(n=h,i=a)}return i}checkSharpness(t,s,i){const n=this.trackNodes.length;if(n<3)return!1;const r=a=>{const l=(a+n*10)%n;return l===t?{x:s,y:i}:this.trackNodes[l]},o=(a,l,h)=>{const u=l.x-a.x,c=l.y-a.y,d=h.x-l.x,f=h.y-l.y,g=Math.atan2(c,u),m=Math.atan2(f,d);let x=Math.abs(g-m);return x>Math.PI&&(x=2*Math.PI-x),x>Math.PI/1.6};return!!(o(r(t-2),r(t-1),r(t))||o(r(t-1),r(t),r(t+1))||o(r(t),r(t+1),r(t+2)))}updateProjectiles(){for(let t=this.projectiles.length-1;t>=0;t--){const s=this.projectiles[t];s.update();let i=!1;const n=this.enemyGrid.query(s.x,s.y,60);for(const r of n)if(Math.hypot(s.x-r.x,s.y-r.y)<r.size+5){if(r.hp-=s.damage,i=!0,this.createExplosion(s.x,s.y,s.color,3),this.spawnFloater(r.x,r.y-15,Math.floor(s.damage),"#fff",10),s.knockback){const o=Math.atan2(r.y-s.y,r.x-s.x);r.knockbackX+=Math.cos(o)*s.knockback,r.knockbackY+=Math.sin(o)*s.knockback}s.isCryo&&(r.frozenTimer=120),s.isAcid&&(r.acidTimer=300),s.isGravity&&this.enemyGrid.query(s.x,s.y,150).forEach(a=>{if(Math.hypot(a.x-s.x,a.y-s.y)<150&&a!==r){const h=Math.atan2(s.y-a.y,s.x-a.x);a.knockbackX+=Math.cos(h)*5,a.knockbackY+=Math.sin(h)*5}}),s.isExplosive&&(this.createExplosion(s.x,s.y,"#ef4444",10),this.enemies.forEach(o=>{Math.hypot(o.x-s.x,o.y-s.y)<50&&(o.hp-=s.damage*.5)}));break}if(i||s.life<=0){if(s.isCluster){for(let r=0;r<6;r++){const o=r/6*Math.PI*2,a=s.x+Math.cos(o)*10,l=s.y+Math.sin(o)*10,h=new rm(this,a,l,null,8,"cluster_mini",s.damage*.3,!0,!1,2,!1,!1,!1,!1);h.vx=Math.cos(o)*8,h.vy=Math.sin(o)*8,h.life=30,this.projectiles.push(h)}this.createExplosion(s.x,s.y,"#facc15",15),G.play("explode")}s.destroy(),this.projectiles.splice(t,1)}}}updateParticles(){for(let t=this.particles.length-1;t>=0;t--){const s=this.particles[t];s.update(),s.life<=0&&(s.destroy(),this.particles.splice(t,1))}for(let t=this.floaters.length-1;t>=0;t--){const s=this.floaters[t];s.update(),s.life<=0&&(s.destroy(),this.floaters.splice(t,1))}}draw(){}selectCard(t){const s=O.getState();if(t.type==="wagon"){const i=this.player.wagons.find(r=>r.type===t.id&&r.level<r.maxLevel);if(i)i.upgrade(),this.spawnFloater(i.x,i.y,"LEVEL UP!","#fbbf24",16);else{const r=Math.floor(this.trackNodes.length);if(this.player.wagons.length<r)this.player.wagons.push(new sm(this,t.id,this.player.wagons.length)),O.getState().setStats({wagonCount:this.player.wagons.length});else{O.getState().setStats({scrap:s.scrap+100}),this.spawnFloater(this.player.x,this.player.y,"CAPACITY FULL (+100 SCRAP)","#ef4444",16),G.play("build"),O.getState().setGameState("PLAY");return}}const n=this.player.wagons.map(r=>({id:r.type,level:r.level,maxLevel:r.maxLevel}));O.getState().setStats({ownedWagons:n})}else t.id==="repair"&&(this.player.hp=this.player.maxHp,O.getState().setStats({hp:this.player.hp})),t.id==="dmg"&&(this.player.autoDmg*=1.5),t.id==="speed"&&(this.player.maxSpeed+=.5),t.id==="magnet"&&(this.player.magnetRange+=100),t.id==="ram"&&(this.player.ramReduction=.8,this.player.ramDamage+=50);G.play("build"),O.getState().setGameState("PLAY")}}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),_t=(e,t)=>{const s=M.forwardRef(({color:i="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:a="",children:l,...h},u)=>M.createElement("svg",{ref:u,...Xk,width:n,height:n,stroke:i,strokeWidth:o?Number(r)*24/Number(n):r,className:["lucide",`lucide-${Kk(e)}`,a].join(" "),...h},[...t.map(([c,d])=>M.createElement(c,d)),...Array.isArray(l)?l:[l]]));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=_t("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=_t("ArrowUpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=_t("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=_t("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=_t("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=_t("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=_t("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=_t("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=_t("FastForward",[["polygon",{points:"13 19 22 12 13 5 13 19",key:"587y9g"}],["polygon",{points:"2 19 11 12 2 5 2 19",key:"3pweh0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=_t("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=_t("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=_t("Magnet",[["path",{d:"m6 15-4-4 6.75-6.77a7.79 7.79 0 0 1 11 11L13 22l-4-4 6.39-6.36a2.14 2.14 0 0 0-3-3L6 15",key:"1i3lhw"}],["path",{d:"m5 8 4 4",key:"j6kj7e"}],["path",{d:"m12 15 4 4",key:"lnac28"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=_t("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=_t("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=_t("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=_t("Skull",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["path",{d:"M8 20v2h8v-2",key:"ded4og"}],["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M16 20a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20",key:"xq9p5u"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=_t("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=_t("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=_t("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=_t("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),qc=M.createContext({});function Qc(e){const t=M.useRef(null);return t.current===null&&(t.current=e()),t.current}const tl=M.createContext(null),Zc=M.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class fT extends M.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=s.offsetHeight||0,i.width=s.offsetWidth||0,i.top=s.offsetTop,i.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function pT({children:e,isPresent:t}){const s=M.useId(),i=M.useRef(null),n=M.useRef({width:0,height:0,top:0,left:0}),{nonce:r}=M.useContext(Zc);return M.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:h}=n.current;if(t||!i.current||!o||!a)return;i.current.dataset.motionPopId=s;const u=document.createElement("style");return r&&(u.nonce=r),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),w.jsx(fT,{isPresent:t,childRef:i,sizeRef:n,children:M.cloneElement(e,{ref:i})})}const mT=({children:e,initial:t,isPresent:s,onExitComplete:i,custom:n,presenceAffectsLayout:r,mode:o})=>{const a=Qc(gT),l=M.useId(),h=M.useCallback(c=>{a.set(c,!0);for(const d of a.values())if(!d)return;i&&i()},[a,i]),u=M.useMemo(()=>({id:l,initial:t,isPresent:s,custom:n,onExitComplete:h,register:c=>(a.set(c,!1),()=>a.delete(c))}),r?[Math.random(),h]:[s,h]);return M.useMemo(()=>{a.forEach((c,d)=>a.set(d,!1))},[s]),M.useEffect(()=>{!s&&!a.size&&i&&i()},[s]),o==="popLayout"&&(e=w.jsx(pT,{isPresent:s,children:e})),w.jsx(tl.Provider,{value:u,children:e})};function gT(){return new Map}function rv(e=!0){const t=M.useContext(tl);if(t===null)return[!0,null];const{isPresent:s,onExitComplete:i,register:n}=t,r=M.useId();M.useEffect(()=>{e&&n(r)},[e]);const o=M.useCallback(()=>e&&i&&i(r),[r,i,e]);return!s&&i?[!1,o]:[!0]}const Ao=e=>e.key||"";function lm(e){const t=[];return M.Children.forEach(e,s=>{M.isValidElement(s)&&t.push(s)}),t}const Jc=typeof window<"u",ov=Jc?M.useLayoutEffect:M.useEffect,td=({children:e,custom:t,initial:s=!0,onExitComplete:i,presenceAffectsLayout:n=!0,mode:r="sync",propagate:o=!1})=>{const[a,l]=rv(o),h=M.useMemo(()=>lm(e),[e]),u=o&&!a?[]:h.map(Ao),c=M.useRef(!0),d=M.useRef(h),f=Qc(()=>new Map),[g,m]=M.useState(h),[x,p]=M.useState(h);ov(()=>{c.current=!1,d.current=h;for(let _=0;_<x.length;_++){const S=Ao(x[_]);u.includes(S)?f.delete(S):f.get(S)!==!0&&f.set(S,!1)}},[x,u.length,u.join("-")]);const y=[];if(h!==g){let _=[...h];for(let S=0;S<x.length;S++){const b=x[S],C=Ao(b);u.includes(C)||(_.splice(S,0,b),y.push(b))}r==="wait"&&y.length&&(_=y),p(lm(_)),m(h);return}const{forceRender:v}=M.useContext(qc);return w.jsx(w.Fragment,{children:x.map(_=>{const S=Ao(_),b=o&&!a?!1:h===x||u.includes(S),C=()=>{if(f.has(S))f.set(S,!0);else return;let k=!0;f.forEach(A=>{A||(k=!1)}),k&&(v==null||v(),p(d.current),o&&(l==null||l()),i&&i())};return w.jsx(mT,{isPresent:b,initial:!c.current||s?void 0:!1,custom:b?void 0:t,presenceAffectsLayout:n,mode:r,onExitComplete:b?void 0:C,children:_},S)})})},oe=e=>e;let av=oe;function ed(e){let t;return()=>(t===void 0&&(t=e()),t)}const un=(e,t,s)=>{const i=t-e;return i===0?1:(s-e)/i},os=e=>e*1e3,as=e=>e/1e3,yT={useManualTiming:!1};function xT(e){let t=new Set,s=new Set,i=!1,n=!1;const r=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(h){r.has(h)&&(l.schedule(h),e()),h(o)}const l={schedule:(h,u=!1,c=!1)=>{const f=c&&i?t:s;return u&&r.add(h),f.has(h)||f.add(h),h},cancel:h=>{s.delete(h),r.delete(h)},process:h=>{if(o=h,i){n=!0;return}i=!0,[t,s]=[s,t],t.forEach(a),t.clear(),i=!1,n&&(n=!1,l.process(h))}};return l}const Eo=["read","resolveKeyframes","update","preRender","render","postRender"],vT=40;function lv(e,t){let s=!1,i=!0;const n={delta:0,timestamp:0,isProcessing:!1},r=()=>s=!0,o=Eo.reduce((p,y)=>(p[y]=xT(r),p),{}),{read:a,resolveKeyframes:l,update:h,preRender:u,render:c,postRender:d}=o,f=()=>{const p=performance.now();s=!1,n.delta=i?1e3/60:Math.max(Math.min(p-n.timestamp,vT),1),n.timestamp=p,n.isProcessing=!0,a.process(n),l.process(n),h.process(n),u.process(n),c.process(n),d.process(n),n.isProcessing=!1,s&&t&&(i=!1,e(f))},g=()=>{s=!0,i=!0,n.isProcessing||e(f)};return{schedule:Eo.reduce((p,y)=>{const v=o[y];return p[y]=(_,S=!1,b=!1)=>(s||g(),v.schedule(_,S,b)),p},{}),cancel:p=>{for(let y=0;y<Eo.length;y++)o[Eo[y]].cancel(p)},state:n,steps:o}}const{schedule:nt,cancel:Ls,state:Rt,steps:sh}=lv(typeof requestAnimationFrame<"u"?requestAnimationFrame:oe,!0),hv=M.createContext({strict:!1}),hm={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},cn={};for(const e in hm)cn[e]={isEnabled:t=>hm[e].some(s=>!!t[s])};function wT(e){for(const t in e)cn[t]={...cn[t],...e[t]}}const _T=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ka(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||_T.has(e)}let uv=e=>!ka(e);function ST(e){e&&(uv=t=>t.startsWith("on")?!ka(t):e(t))}try{ST(require("@emotion/is-prop-valid").default)}catch{}function bT(e,t,s){const i={};for(const n in e)n==="values"&&typeof e.values=="object"||(uv(n)||s===!0&&ka(n)||!t&&!ka(n)||e.draggable&&n.startsWith("onDrag"))&&(i[n]=e[n]);return i}function CT(e){if(typeof Proxy>"u")return e;const t=new Map,s=(...i)=>e(...i);return new Proxy(s,{get:(i,n)=>n==="create"?e:(t.has(n)||t.set(n,e(n)),t.get(n))})}const el=M.createContext({});function Dr(e){return typeof e=="string"||Array.isArray(e)}function sl(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const sd=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],id=["initial",...sd];function il(e){return sl(e.animate)||id.some(t=>Dr(e[t]))}function cv(e){return!!(il(e)||e.variants)}function kT(e,t){if(il(e)){const{initial:s,animate:i}=e;return{initial:s===!1||Dr(s)?s:void 0,animate:Dr(i)?i:void 0}}return e.inherit!==!1?t:{}}function TT(e){const{initial:t,animate:s}=kT(e,M.useContext(el));return M.useMemo(()=>({initial:t,animate:s}),[um(t),um(s)])}function um(e){return Array.isArray(e)?e.join(" "):e}const PT=Symbol.for("motionComponentSymbol");function Oi(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function MT(e,t,s){return M.useCallback(i=>{i&&e.onMount&&e.onMount(i),t&&(i?t.mount(i):t.unmount()),s&&(typeof s=="function"?s(i):Oi(s)&&(s.current=i))},[t])}const nd=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),AT="framerAppearId",dv="data-"+nd(AT),{schedule:rd}=lv(queueMicrotask,!1),fv=M.createContext({});function ET(e,t,s,i,n){var r,o;const{visualElement:a}=M.useContext(el),l=M.useContext(hv),h=M.useContext(tl),u=M.useContext(Zc).reducedMotion,c=M.useRef(null);i=i||l.renderer,!c.current&&i&&(c.current=i(e,{visualState:t,parent:a,props:s,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:u}));const d=c.current,f=M.useContext(fv);d&&!d.projection&&n&&(d.type==="html"||d.type==="svg")&&RT(c.current,s,n,f);const g=M.useRef(!1);M.useInsertionEffect(()=>{d&&g.current&&d.update(s,h)});const m=s[dv],x=M.useRef(!!m&&!(!((r=window.MotionHandoffIsComplete)===null||r===void 0)&&r.call(window,m))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,m)));return ov(()=>{d&&(g.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),rd.render(d.render),x.current&&d.animationState&&d.animationState.animateChanges())}),M.useEffect(()=>{d&&(!x.current&&d.animationState&&d.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var p;(p=window.MotionHandoffMarkAsComplete)===null||p===void 0||p.call(window,m)}),x.current=!1))}),d}function RT(e,t,s,i){const{layoutId:n,layout:r,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:h}=t;e.projection=new s(e.latestValues,t["data-framer-portal-id"]?void 0:pv(e.parent)),e.projection.setOptions({layoutId:n,layout:r,alwaysMeasureLayout:!!o||a&&Oi(a),visualElement:e,animationType:typeof r=="string"?r:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:h})}function pv(e){if(e)return e.options.allowProjection!==!1?e.projection:pv(e.parent)}function NT({preloadedFeatures:e,createVisualElement:t,useRender:s,useVisualState:i,Component:n}){var r,o;e&&wT(e);function a(h,u){let c;const d={...M.useContext(Zc),...h,layoutId:DT(h)},{isStatic:f}=d,g=TT(h),m=i(h,f);if(!f&&Jc){IT();const x=LT(d);c=x.MeasureLayout,g.visualElement=ET(n,m,d,t,x.ProjectionNode)}return w.jsxs(el.Provider,{value:g,children:[c&&g.visualElement?w.jsx(c,{visualElement:g.visualElement,...d}):null,s(n,h,MT(m,g.visualElement,u),m,f,g.visualElement)]})}a.displayName=`motion.${typeof n=="string"?n:`create(${(o=(r=n.displayName)!==null&&r!==void 0?r:n.name)!==null&&o!==void 0?o:""})`}`;const l=M.forwardRef(a);return l[PT]=n,l}function DT({layoutId:e}){const t=M.useContext(qc).id;return t&&e!==void 0?t+"-"+e:e}function IT(e,t){M.useContext(hv).strict}function LT(e){const{drag:t,layout:s}=cn;if(!t&&!s)return{};const i={...t,...s};return{MeasureLayout:t!=null&&t.isEnabled(e)||s!=null&&s.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const FT=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function od(e){return typeof e!="string"||e.includes("-")?!1:!!(FT.indexOf(e)>-1||/[A-Z]/u.test(e))}function cm(e){const t=[{},{}];return e==null||e.values.forEach((s,i)=>{t[0][i]=s.get(),t[1][i]=s.getVelocity()}),t}function ad(e,t,s,i){if(typeof t=="function"){const[n,r]=cm(i);t=t(s!==void 0?s:e.custom,n,r)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[n,r]=cm(i);t=t(s!==void 0?s:e.custom,n,r)}return t}const Tu=e=>Array.isArray(e),jT=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),BT=e=>Tu(e)?e[e.length-1]||0:e,Ot=e=>!!(e&&e.getVelocity);function Yo(e){const t=Ot(e)?e.get():e;return jT(t)?t.toValue():t}function VT({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:s},i,n,r){const o={latestValues:OT(i,n,r,e),renderState:t()};return s&&(o.onMount=a=>s({props:i,current:a,...o}),o.onUpdate=a=>s(a)),o}const mv=e=>(t,s)=>{const i=M.useContext(el),n=M.useContext(tl),r=()=>VT(e,t,i,n);return s?r():Qc(r)};function OT(e,t,s,i){const n={},r=i(e,{});for(const d in r)n[d]=Yo(r[d]);let{initial:o,animate:a}=e;const l=il(e),h=cv(e);t&&h&&!l&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let u=s?s.initial===!1:!1;u=u||o===!1;const c=u?a:o;if(c&&typeof c!="boolean"&&!sl(c)){const d=Array.isArray(c)?c:[c];for(let f=0;f<d.length;f++){const g=ad(e,d[f]);if(g){const{transitionEnd:m,transition:x,...p}=g;for(const y in p){let v=p[y];if(Array.isArray(v)){const _=u?v.length-1:0;v=v[_]}v!==null&&(n[y]=v)}for(const y in m)n[y]=m[y]}}}return n}const gn=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],vi=new Set(gn),gv=e=>t=>typeof t=="string"&&t.startsWith(e),yv=gv("--"),zT=gv("var(--"),ld=e=>zT(e)?GT.test(e.split("/*")[0].trim()):!1,GT=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,xv=(e,t)=>t&&typeof e=="number"?t.transform(e):e,fs=(e,t,s)=>s>t?t:s<e?e:s,yn={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ir={...yn,transform:e=>fs(0,1,e)},Ro={...yn,default:1},$r=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),ys=$r("deg"),Xe=$r("%"),B=$r("px"),UT=$r("vh"),$T=$r("vw"),dm={...Xe,parse:e=>Xe.parse(e)/100,transform:e=>Xe.transform(e*100)},WT={borderWidth:B,borderTopWidth:B,borderRightWidth:B,borderBottomWidth:B,borderLeftWidth:B,borderRadius:B,radius:B,borderTopLeftRadius:B,borderTopRightRadius:B,borderBottomRightRadius:B,borderBottomLeftRadius:B,width:B,maxWidth:B,height:B,maxHeight:B,top:B,right:B,bottom:B,left:B,padding:B,paddingTop:B,paddingRight:B,paddingBottom:B,paddingLeft:B,margin:B,marginTop:B,marginRight:B,marginBottom:B,marginLeft:B,backgroundPositionX:B,backgroundPositionY:B},HT={rotate:ys,rotateX:ys,rotateY:ys,rotateZ:ys,scale:Ro,scaleX:Ro,scaleY:Ro,scaleZ:Ro,skew:ys,skewX:ys,skewY:ys,distance:B,translateX:B,translateY:B,translateZ:B,x:B,y:B,z:B,perspective:B,transformPerspective:B,opacity:Ir,originX:dm,originY:dm,originZ:B},fm={...yn,transform:Math.round},hd={...WT,...HT,zIndex:fm,size:B,fillOpacity:Ir,strokeOpacity:Ir,numOctaves:fm},YT={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},XT=gn.length;function KT(e,t,s){let i="",n=!0;for(let r=0;r<XT;r++){const o=gn[r],a=e[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||s){const h=xv(a,hd[o]);if(!l){n=!1;const u=YT[o]||o;i+=`${u}(${h}) `}s&&(t[o]=h)}}return i=i.trim(),s?i=s(t,n?"":i):n&&(i="none"),i}function ud(e,t,s){const{style:i,vars:n,transformOrigin:r}=e;let o=!1,a=!1;for(const l in t){const h=t[l];if(vi.has(l)){o=!0;continue}else if(yv(l)){n[l]=h;continue}else{const u=xv(h,hd[l]);l.startsWith("origin")?(a=!0,r[l]=u):i[l]=u}}if(t.transform||(o||s?i.transform=KT(t,e.transform,s):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:h="50%",originZ:u=0}=r;i.transformOrigin=`${l} ${h} ${u}`}}const qT={offset:"stroke-dashoffset",array:"stroke-dasharray"},QT={offset:"strokeDashoffset",array:"strokeDasharray"};function ZT(e,t,s=1,i=0,n=!0){e.pathLength=1;const r=n?qT:QT;e[r.offset]=B.transform(-i);const o=B.transform(t),a=B.transform(s);e[r.array]=`${o} ${a}`}function pm(e,t,s){return typeof e=="string"?e:B.transform(t+s*e)}function JT(e,t,s){const i=pm(t,e.x,e.width),n=pm(s,e.y,e.height);return`${i} ${n}`}function cd(e,{attrX:t,attrY:s,attrScale:i,originX:n,originY:r,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...h},u,c){if(ud(e,h,c),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:d,style:f,dimensions:g}=e;d.transform&&(g&&(f.transform=d.transform),delete d.transform),g&&(n!==void 0||r!==void 0||f.transform)&&(f.transformOrigin=JT(g,n!==void 0?n:.5,r!==void 0?r:.5)),t!==void 0&&(d.x=t),s!==void 0&&(d.y=s),i!==void 0&&(d.scale=i),o!==void 0&&ZT(d,o,a,l,!1)}const dd=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),vv=()=>({...dd(),attrs:{}}),fd=e=>typeof e=="string"&&e.toLowerCase()==="svg";function wv(e,{style:t,vars:s},i,n){Object.assign(e.style,t,n&&n.getProjectionStyles(i));for(const r in s)e.style.setProperty(r,s[r])}const _v=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Sv(e,t,s,i){wv(e,t,void 0,i);for(const n in t.attrs)e.setAttribute(_v.has(n)?n:nd(n),t.attrs[n])}const Ta={};function tP(e){Object.assign(Ta,e)}function bv(e,{layout:t,layoutId:s}){return vi.has(e)||e.startsWith("origin")||(t||s!==void 0)&&(!!Ta[e]||e==="opacity")}function pd(e,t,s){var i;const{style:n}=e,r={};for(const o in n)(Ot(n[o])||t.style&&Ot(t.style[o])||bv(o,e)||((i=s==null?void 0:s.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(r[o]=n[o]);return r}function Cv(e,t,s){const i=pd(e,t,s);for(const n in e)if(Ot(e[n])||Ot(t[n])){const r=gn.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;i[r]=e[n]}return i}function eP(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const mm=["x","y","width","height","cx","cy","r"],sP={useVisualState:mv({scrapeMotionValuesFromProps:Cv,createRenderState:vv,onUpdate:({props:e,prevProps:t,current:s,renderState:i,latestValues:n})=>{if(!s)return;let r=!!e.drag;if(!r){for(const a in n)if(vi.has(a)){r=!0;break}}if(!r)return;let o=!t;if(t)for(let a=0;a<mm.length;a++){const l=mm[a];e[l]!==t[l]&&(o=!0)}o&&nt.read(()=>{eP(s,i),nt.render(()=>{cd(i,n,fd(s.tagName),e.transformTemplate),Sv(s,i)})})}})},iP={useVisualState:mv({scrapeMotionValuesFromProps:pd,createRenderState:dd})};function kv(e,t,s){for(const i in t)!Ot(t[i])&&!bv(i,s)&&(e[i]=t[i])}function nP({transformTemplate:e},t){return M.useMemo(()=>{const s=dd();return ud(s,t,e),Object.assign({},s.vars,s.style)},[t])}function rP(e,t){const s=e.style||{},i={};return kv(i,s,e),Object.assign(i,nP(e,t)),i}function oP(e,t){const s={},i=rP(e,t);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=i,s}function aP(e,t,s,i){const n=M.useMemo(()=>{const r=vv();return cd(r,t,fd(i),e.transformTemplate),{...r.attrs,style:{...r.style}}},[t]);if(e.style){const r={};kv(r,e.style,e),n.style={...r,...n.style}}return n}function lP(e=!1){return(s,i,n,{latestValues:r},o)=>{const l=(od(s)?aP:oP)(i,r,o,s),h=bT(i,typeof s=="string",e),u=s!==M.Fragment?{...h,...l,ref:n}:{},{children:c}=i,d=M.useMemo(()=>Ot(c)?c.get():c,[c]);return M.createElement(s,{...u,children:d})}}function hP(e,t){return function(i,{forwardMotionProps:n}={forwardMotionProps:!1}){const o={...od(i)?sP:iP,preloadedFeatures:e,useRender:lP(n),createVisualElement:t,Component:i};return NT(o)}}function Tv(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let i=0;i<s;i++)if(t[i]!==e[i])return!1;return!0}function nl(e,t,s){const i=e.getProps();return ad(i,t,s!==void 0?s:i.custom,e)}const uP=ed(()=>window.ScrollTimeline!==void 0);class cP{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,s){for(let i=0;i<this.animations.length;i++)this.animations[i][t]=s}attachTimeline(t,s){const i=this.animations.map(n=>{if(uP()&&n.attachTimeline)return n.attachTimeline(t);if(typeof s=="function")return s(n)});return()=>{i.forEach((n,r)=>{n&&n(),this.animations[r].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let s=0;s<this.animations.length;s++)t=Math.max(t,this.animations[s].duration);return t}runAll(t){this.animations.forEach(s=>s[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class dP extends cP{then(t,s){return Promise.all(this.animations).then(t).catch(s)}}function md(e,t){return e?e[t]||e.default||e:void 0}const Pu=2e4;function Pv(e){let t=0;const s=50;let i=e.next(t);for(;!i.done&&t<Pu;)t+=s,i=e.next(t);return t>=Pu?1/0:t}function gd(e){return typeof e=="function"}function gm(e,t){e.timeline=t,e.onfinish=null}const yd=e=>Array.isArray(e)&&typeof e[0]=="number",fP={linearEasing:void 0};function pP(e,t){const s=ed(e);return()=>{var i;return(i=fP[t])!==null&&i!==void 0?i:s()}}const Pa=pP(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Mv=(e,t,s=10)=>{let i="";const n=Math.max(Math.round(t/s),2);for(let r=0;r<n;r++)i+=e(un(0,n-1,r))+", ";return`linear(${i.substring(0,i.length-2)})`};function Av(e){return!!(typeof e=="function"&&Pa()||!e||typeof e=="string"&&(e in Mu||Pa())||yd(e)||Array.isArray(e)&&e.every(Av))}const Gn=([e,t,s,i])=>`cubic-bezier(${e}, ${t}, ${s}, ${i})`,Mu={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Gn([0,.65,.55,1]),circOut:Gn([.55,0,1,.45]),backIn:Gn([.31,.01,.66,-.59]),backOut:Gn([.33,1.53,.69,.99])};function Ev(e,t){if(e)return typeof e=="function"&&Pa()?Mv(e,t):yd(e)?Gn(e):Array.isArray(e)?e.map(s=>Ev(s,t)||Mu.easeOut):Mu[e]}const ke={x:!1,y:!1};function Rv(){return ke.x||ke.y}function mP(e,t,s){var i;if(e instanceof Element)return[e];if(typeof e=="string"){let n=document;const r=(i=void 0)!==null&&i!==void 0?i:n.querySelectorAll(e);return r?Array.from(r):[]}return Array.from(e)}function Nv(e,t){const s=mP(e),i=new AbortController,n={passive:!0,...t,signal:i.signal};return[s,n,()=>i.abort()]}function ym(e){return t=>{t.pointerType==="touch"||Rv()||e(t)}}function gP(e,t,s={}){const[i,n,r]=Nv(e,s),o=ym(a=>{const{target:l}=a,h=t(a);if(typeof h!="function"||!l)return;const u=ym(c=>{h(c),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,n)});return i.forEach(a=>{a.addEventListener("pointerenter",o,n)}),r}const Dv=(e,t)=>t?e===t?!0:Dv(e,t.parentElement):!1,xd=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,yP=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function xP(e){return yP.has(e.tagName)||e.tabIndex!==-1}const Un=new WeakSet;function xm(e){return t=>{t.key==="Enter"&&e(t)}}function ih(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const vP=(e,t)=>{const s=e.currentTarget;if(!s)return;const i=xm(()=>{if(Un.has(s))return;ih(s,"down");const n=xm(()=>{ih(s,"up")}),r=()=>ih(s,"cancel");s.addEventListener("keyup",n,t),s.addEventListener("blur",r,t)});s.addEventListener("keydown",i,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",i),t)};function vm(e){return xd(e)&&!Rv()}function wP(e,t,s={}){const[i,n,r]=Nv(e,s),o=a=>{const l=a.currentTarget;if(!vm(a)||Un.has(l))return;Un.add(l);const h=t(a),u=(f,g)=>{window.removeEventListener("pointerup",c),window.removeEventListener("pointercancel",d),!(!vm(f)||!Un.has(l))&&(Un.delete(l),typeof h=="function"&&h(f,{success:g}))},c=f=>{u(f,s.useGlobalTarget||Dv(l,f.target))},d=f=>{u(f,!1)};window.addEventListener("pointerup",c,n),window.addEventListener("pointercancel",d,n)};return i.forEach(a=>{!xP(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(s.useGlobalTarget?window:a).addEventListener("pointerdown",o,n),a.addEventListener("focus",h=>vP(h,n),n)}),r}function _P(e){return e==="x"||e==="y"?ke[e]?null:(ke[e]=!0,()=>{ke[e]=!1}):ke.x||ke.y?null:(ke.x=ke.y=!0,()=>{ke.x=ke.y=!1})}const Iv=new Set(["width","height","top","left","right","bottom",...gn]);let Xo;function SP(){Xo=void 0}const Ke={now:()=>(Xo===void 0&&Ke.set(Rt.isProcessing||yT.useManualTiming?Rt.timestamp:performance.now()),Xo),set:e=>{Xo=e,queueMicrotask(SP)}};function vd(e,t){e.indexOf(t)===-1&&e.push(t)}function wd(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}class _d{constructor(){this.subscriptions=[]}add(t){return vd(this.subscriptions,t),()=>wd(this.subscriptions,t)}notify(t,s,i){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](t,s,i);else for(let r=0;r<n;r++){const o=this.subscriptions[r];o&&o(t,s,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Lv(e,t){return t?e*(1e3/t):0}const wm=30,bP=e=>!isNaN(parseFloat(e));class CP{constructor(t,s={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,n=!0)=>{const r=Ke.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),n&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=s.owner}setCurrent(t){this.current=t,this.updatedAt=Ke.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=bP(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new _d);const i=this.events[t].add(s);return t==="change"?()=>{i(),nt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t,s=!0){!s||!this.passiveEffect?this.updateAndNotify(t,s):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,s,i){this.set(s),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,s=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ke.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>wm)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,wm);return Lv(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Lr(e,t){return new CP(e,t)}function kP(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,Lr(s))}function TP(e,t){const s=nl(e,t);let{transitionEnd:i={},transition:n={},...r}=s||{};r={...r,...i};for(const o in r){const a=BT(r[o]);kP(e,o,a)}}function PP(e){return!!(Ot(e)&&e.add)}function Au(e,t){const s=e.getValue("willChange");if(PP(s))return s.add(t)}function Fv(e){return e.props[dv]}const jv=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e,MP=1e-7,AP=12;function EP(e,t,s,i,n){let r,o,a=0;do o=t+(s-t)/2,r=jv(o,i,n)-e,r>0?s=o:t=o;while(Math.abs(r)>MP&&++a<AP);return o}function Wr(e,t,s,i){if(e===t&&s===i)return oe;const n=r=>EP(r,0,1,e,s);return r=>r===0||r===1?r:jv(n(r),t,i)}const Bv=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Vv=e=>t=>1-e(1-t),Ov=Wr(.33,1.53,.69,.99),Sd=Vv(Ov),zv=Bv(Sd),Gv=e=>(e*=2)<1?.5*Sd(e):.5*(2-Math.pow(2,-10*(e-1))),bd=e=>1-Math.sin(Math.acos(e)),Uv=Vv(bd),$v=Bv(bd),Wv=e=>/^0[^.\s]+$/u.test(e);function RP(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Wv(e):!0}const nr=e=>Math.round(e*1e5)/1e5,Cd=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function NP(e){return e==null}const DP=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,kd=(e,t)=>s=>!!(typeof s=="string"&&DP.test(s)&&s.startsWith(e)||t&&!NP(s)&&Object.prototype.hasOwnProperty.call(s,t)),Hv=(e,t,s)=>i=>{if(typeof i!="string")return i;const[n,r,o,a]=i.match(Cd);return{[e]:parseFloat(n),[t]:parseFloat(r),[s]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},IP=e=>fs(0,255,e),nh={...yn,transform:e=>Math.round(IP(e))},ai={test:kd("rgb","red"),parse:Hv("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:i=1})=>"rgba("+nh.transform(e)+", "+nh.transform(t)+", "+nh.transform(s)+", "+nr(Ir.transform(i))+")"};function LP(e){let t="",s="",i="",n="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),i=e.substring(5,7),n=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),i=e.substring(3,4),n=e.substring(4,5),t+=t,s+=s,i+=i,n+=n),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(i,16),alpha:n?parseInt(n,16)/255:1}}const Eu={test:kd("#"),parse:LP,transform:ai.transform},zi={test:kd("hsl","hue"),parse:Hv("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:i=1})=>"hsla("+Math.round(e)+", "+Xe.transform(nr(t))+", "+Xe.transform(nr(s))+", "+nr(Ir.transform(i))+")"},jt={test:e=>ai.test(e)||Eu.test(e)||zi.test(e),parse:e=>ai.test(e)?ai.parse(e):zi.test(e)?zi.parse(e):Eu.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?ai.transform(e):zi.transform(e)},FP=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function jP(e){var t,s;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Cd))===null||t===void 0?void 0:t.length)||0)+(((s=e.match(FP))===null||s===void 0?void 0:s.length)||0)>0}const Yv="number",Xv="color",BP="var",VP="var(",_m="${}",OP=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Fr(e){const t=e.toString(),s=[],i={color:[],number:[],var:[]},n=[];let r=0;const a=t.replace(OP,l=>(jt.test(l)?(i.color.push(r),n.push(Xv),s.push(jt.parse(l))):l.startsWith(VP)?(i.var.push(r),n.push(BP),s.push(l)):(i.number.push(r),n.push(Yv),s.push(parseFloat(l))),++r,_m)).split(_m);return{values:s,split:a,indexes:i,types:n}}function Kv(e){return Fr(e).values}function qv(e){const{split:t,types:s}=Fr(e),i=t.length;return n=>{let r="";for(let o=0;o<i;o++)if(r+=t[o],n[o]!==void 0){const a=s[o];a===Yv?r+=nr(n[o]):a===Xv?r+=jt.transform(n[o]):r+=n[o]}return r}}const zP=e=>typeof e=="number"?0:e;function GP(e){const t=Kv(e);return qv(e)(t.map(zP))}const Fs={test:jP,parse:Kv,createTransformer:qv,getAnimatableNone:GP},UP=new Set(["brightness","contrast","saturate","opacity"]);function $P(e){const[t,s]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=s.match(Cd)||[];if(!i)return e;const n=s.replace(i,"");let r=UP.has(t)?1:0;return i!==s&&(r*=100),t+"("+r+n+")"}const WP=/\b([a-z-]*)\(.*?\)/gu,Ru={...Fs,getAnimatableNone:e=>{const t=e.match(WP);return t?t.map($P).join(" "):e}},HP={...hd,color:jt,backgroundColor:jt,outlineColor:jt,fill:jt,stroke:jt,borderColor:jt,borderTopColor:jt,borderRightColor:jt,borderBottomColor:jt,borderLeftColor:jt,filter:Ru,WebkitFilter:Ru},Td=e=>HP[e];function Qv(e,t){let s=Td(e);return s!==Ru&&(s=Fs),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const YP=new Set(["auto","none","0"]);function XP(e,t,s){let i=0,n;for(;i<e.length&&!n;){const r=e[i];typeof r=="string"&&!YP.has(r)&&Fr(r).values.length&&(n=e[i]),i++}if(n&&s)for(const r of t)e[r]=Qv(s,n)}const Sm=e=>e===yn||e===B,bm=(e,t)=>parseFloat(e.split(", ")[t]),Cm=(e,t)=>(s,{transform:i})=>{if(i==="none"||!i)return 0;const n=i.match(/^matrix3d\((.+)\)$/u);if(n)return bm(n[1],t);{const r=i.match(/^matrix\((.+)\)$/u);return r?bm(r[1],e):0}},KP=new Set(["x","y","z"]),qP=gn.filter(e=>!KP.has(e));function QP(e){const t=[];return qP.forEach(s=>{const i=e.getValue(s);i!==void 0&&(t.push([s,i.get()]),i.set(s.startsWith("scale")?1:0))}),t}const dn={width:({x:e},{paddingLeft:t="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),height:({y:e},{paddingTop:t="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Cm(4,13),y:Cm(5,14)};dn.translateX=dn.x;dn.translateY=dn.y;const ui=new Set;let Nu=!1,Du=!1;function Zv(){if(Du){const e=Array.from(ui).filter(i=>i.needsMeasurement),t=new Set(e.map(i=>i.element)),s=new Map;t.forEach(i=>{const n=QP(i);n.length&&(s.set(i,n),i.render())}),e.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const n=s.get(i);n&&n.forEach(([r,o])=>{var a;(a=i.getValue(r))===null||a===void 0||a.set(o)})}),e.forEach(i=>i.measureEndState()),e.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Du=!1,Nu=!1,ui.forEach(e=>e.complete()),ui.clear()}function Jv(){ui.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Du=!0)})}function ZP(){Jv(),Zv()}class Pd{constructor(t,s,i,n,r,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=s,this.name=i,this.motionValue=n,this.element=r,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ui.add(this),Nu||(Nu=!0,nt.read(Jv),nt.resolveKeyframes(Zv))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:s,element:i,motionValue:n}=this;for(let r=0;r<t.length;r++)if(t[r]===null)if(r===0){const o=n==null?void 0:n.get(),a=t[t.length-1];if(o!==void 0)t[0]=o;else if(i&&s){const l=i.readValue(s,a);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=a),n&&o===void 0&&n.set(t[0])}else t[r]=t[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ui.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ui.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const t1=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),JP=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function tM(e){const t=JP.exec(e);if(!t)return[,];const[,s,i,n]=t;return[`--${s??i}`,n]}function e1(e,t,s=1){const[i,n]=tM(e);if(!i)return;const r=window.getComputedStyle(t).getPropertyValue(i);if(r){const o=r.trim();return t1(o)?parseFloat(o):o}return ld(n)?e1(n,t,s+1):n}const s1=e=>t=>t.test(e),eM={test:e=>e==="auto",parse:e=>e},i1=[yn,B,Xe,ys,$T,UT,eM],km=e=>i1.find(s1(e));class n1 extends Pd{constructor(t,s,i,n,r){super(t,s,i,n,r,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:s,name:i}=this;if(!s||!s.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let h=t[l];if(typeof h=="string"&&(h=h.trim(),ld(h))){const u=e1(h,s.current);u!==void 0&&(t[l]=u),l===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!Iv.has(i)||t.length!==2)return;const[n,r]=t,o=km(n),a=km(r);if(o!==a)if(Sm(o)&&Sm(a))for(let l=0;l<t.length;l++){const h=t[l];typeof h=="string"&&(t[l]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:s}=this,i=[];for(let n=0;n<t.length;n++)RP(t[n])&&i.push(n);i.length&&XP(t,i,s)}measureInitialState(){const{element:t,unresolvedKeyframes:s,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=dn[i](t.measureViewportBox(),window.getComputedStyle(t.current)),s[0]=this.measuredOrigin;const n=s[s.length-1];n!==void 0&&t.getValue(i,n).jump(n,!1)}measureEndState(){var t;const{element:s,name:i,unresolvedKeyframes:n}=this;if(!s||!s.current)return;const r=s.getValue(i);r&&r.jump(this.measuredOrigin,!1);const o=n.length-1,a=n[o];n[o]=dn[i](s.measureViewportBox(),window.getComputedStyle(s.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([l,h])=>{s.getValue(l).set(h)}),this.resolveNoneKeyframes()}}const Tm=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Fs.test(e)||e==="0")&&!e.startsWith("url("));function sM(e){const t=e[0];if(e.length===1)return!0;for(let s=0;s<e.length;s++)if(e[s]!==t)return!0}function iM(e,t,s,i){const n=e[0];if(n===null)return!1;if(t==="display"||t==="visibility")return!0;const r=e[e.length-1],o=Tm(n,t),a=Tm(r,t);return!o||!a?!1:sM(e)||(s==="spring"||gd(s))&&i}const nM=e=>e!==null;function rl(e,{repeat:t,repeatType:s="loop"},i){const n=e.filter(nM),r=t&&s!=="loop"&&t%2===1?0:n.length-1;return!r||i===void 0?n[r]:i}const rM=40;class r1{constructor({autoplay:t=!0,delay:s=0,type:i="keyframes",repeat:n=0,repeatDelay:r=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ke.now(),this.options={autoplay:t,delay:s,type:i,repeat:n,repeatDelay:r,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>rM?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&ZP(),this._resolved}onKeyframesResolved(t,s){this.resolvedAt=Ke.now(),this.hasAttemptedResolve=!0;const{name:i,type:n,velocity:r,delay:o,onComplete:a,onUpdate:l,isGenerator:h}=this.options;if(!h&&!iM(t,i,n,r))if(o)this.options.duration=0;else{l&&l(rl(t,this.options,s)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(t,s);u!==!1&&(this._resolved={keyframes:t,finalKeyframe:s,...u},this.onPostResolved())}onPostResolved(){}then(t,s){return this.currentFinishedPromise.then(t,s)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const ht=(e,t,s)=>e+(t-e)*s;function rh(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function oM({hue:e,saturation:t,lightness:s,alpha:i}){e/=360,t/=100,s/=100;let n=0,r=0,o=0;if(!t)n=r=o=s;else{const a=s<.5?s*(1+t):s+t-s*t,l=2*s-a;n=rh(l,a,e+1/3),r=rh(l,a,e),o=rh(l,a,e-1/3)}return{red:Math.round(n*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:i}}function Ma(e,t){return s=>s>0?t:e}const oh=(e,t,s)=>{const i=e*e,n=s*(t*t-i)+i;return n<0?0:Math.sqrt(n)},aM=[Eu,ai,zi],lM=e=>aM.find(t=>t.test(e));function Pm(e){const t=lM(e);if(!t)return!1;let s=t.parse(e);return t===zi&&(s=oM(s)),s}const Mm=(e,t)=>{const s=Pm(e),i=Pm(t);if(!s||!i)return Ma(e,t);const n={...s};return r=>(n.red=oh(s.red,i.red,r),n.green=oh(s.green,i.green,r),n.blue=oh(s.blue,i.blue,r),n.alpha=ht(s.alpha,i.alpha,r),ai.transform(n))},hM=(e,t)=>s=>t(e(s)),Hr=(...e)=>e.reduce(hM),Iu=new Set(["none","hidden"]);function uM(e,t){return Iu.has(e)?s=>s<=0?e:t:s=>s>=1?t:e}function cM(e,t){return s=>ht(e,t,s)}function Md(e){return typeof e=="number"?cM:typeof e=="string"?ld(e)?Ma:jt.test(e)?Mm:pM:Array.isArray(e)?o1:typeof e=="object"?jt.test(e)?Mm:dM:Ma}function o1(e,t){const s=[...e],i=s.length,n=e.map((r,o)=>Md(r)(r,t[o]));return r=>{for(let o=0;o<i;o++)s[o]=n[o](r);return s}}function dM(e,t){const s={...e,...t},i={};for(const n in s)e[n]!==void 0&&t[n]!==void 0&&(i[n]=Md(e[n])(e[n],t[n]));return n=>{for(const r in i)s[r]=i[r](n);return s}}function fM(e,t){var s;const i=[],n={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const o=t.types[r],a=e.indexes[o][n[o]],l=(s=e.values[a])!==null&&s!==void 0?s:0;i[r]=l,n[o]++}return i}const pM=(e,t)=>{const s=Fs.createTransformer(t),i=Fr(e),n=Fr(t);return i.indexes.var.length===n.indexes.var.length&&i.indexes.color.length===n.indexes.color.length&&i.indexes.number.length>=n.indexes.number.length?Iu.has(e)&&!n.values.length||Iu.has(t)&&!i.values.length?uM(e,t):Hr(o1(fM(i,n),n.values),s):Ma(e,t)};function a1(e,t,s){return typeof e=="number"&&typeof t=="number"&&typeof s=="number"?ht(e,t,s):Md(e)(e,t)}const mM=5;function l1(e,t,s){const i=Math.max(t-mM,0);return Lv(s-e(i),t-i)}const ft={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ah=.001;function gM({duration:e=ft.duration,bounce:t=ft.bounce,velocity:s=ft.velocity,mass:i=ft.mass}){let n,r,o=1-t;o=fs(ft.minDamping,ft.maxDamping,o),e=fs(ft.minDuration,ft.maxDuration,as(e)),o<1?(n=h=>{const u=h*o,c=u*e,d=u-s,f=Lu(h,o),g=Math.exp(-c);return ah-d/f*g},r=h=>{const c=h*o*e,d=c*s+s,f=Math.pow(o,2)*Math.pow(h,2)*e,g=Math.exp(-c),m=Lu(Math.pow(h,2),o);return(-n(h)+ah>0?-1:1)*((d-f)*g)/m}):(n=h=>{const u=Math.exp(-h*e),c=(h-s)*e+1;return-ah+u*c},r=h=>{const u=Math.exp(-h*e),c=(s-h)*(e*e);return u*c});const a=5/e,l=xM(n,r,a);if(e=os(e),isNaN(l))return{stiffness:ft.stiffness,damping:ft.damping,duration:e};{const h=Math.pow(l,2)*i;return{stiffness:h,damping:o*2*Math.sqrt(i*h),duration:e}}}const yM=12;function xM(e,t,s){let i=s;for(let n=1;n<yM;n++)i=i-e(i)/t(i);return i}function Lu(e,t){return e*Math.sqrt(1-t*t)}const vM=["duration","bounce"],wM=["stiffness","damping","mass"];function Am(e,t){return t.some(s=>e[s]!==void 0)}function _M(e){let t={velocity:ft.velocity,stiffness:ft.stiffness,damping:ft.damping,mass:ft.mass,isResolvedFromDuration:!1,...e};if(!Am(e,wM)&&Am(e,vM))if(e.visualDuration){const s=e.visualDuration,i=2*Math.PI/(s*1.2),n=i*i,r=2*fs(.05,1,1-(e.bounce||0))*Math.sqrt(n);t={...t,mass:ft.mass,stiffness:n,damping:r}}else{const s=gM(e);t={...t,...s,mass:ft.mass},t.isResolvedFromDuration=!0}return t}function h1(e=ft.visualDuration,t=ft.bounce){const s=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:i,restDelta:n}=s;const r=s.keyframes[0],o=s.keyframes[s.keyframes.length-1],a={done:!1,value:r},{stiffness:l,damping:h,mass:u,duration:c,velocity:d,isResolvedFromDuration:f}=_M({...s,velocity:-as(s.velocity||0)}),g=d||0,m=h/(2*Math.sqrt(l*u)),x=o-r,p=as(Math.sqrt(l/u)),y=Math.abs(x)<5;i||(i=y?ft.restSpeed.granular:ft.restSpeed.default),n||(n=y?ft.restDelta.granular:ft.restDelta.default);let v;if(m<1){const S=Lu(p,m);v=b=>{const C=Math.exp(-m*p*b);return o-C*((g+m*p*x)/S*Math.sin(S*b)+x*Math.cos(S*b))}}else if(m===1)v=S=>o-Math.exp(-p*S)*(x+(g+p*x)*S);else{const S=p*Math.sqrt(m*m-1);v=b=>{const C=Math.exp(-m*p*b),k=Math.min(S*b,300);return o-C*((g+m*p*x)*Math.sinh(k)+S*x*Math.cosh(k))/S}}const _={calculatedDuration:f&&c||null,next:S=>{const b=v(S);if(f)a.done=S>=c;else{let C=0;m<1&&(C=S===0?os(g):l1(v,S,b));const k=Math.abs(C)<=i,A=Math.abs(o-b)<=n;a.done=k&&A}return a.value=a.done?o:b,a},toString:()=>{const S=Math.min(Pv(_),Pu),b=Mv(C=>_.next(S*C).value,S,30);return S+"ms "+b}};return _}function Em({keyframes:e,velocity:t=0,power:s=.8,timeConstant:i=325,bounceDamping:n=10,bounceStiffness:r=500,modifyTarget:o,min:a,max:l,restDelta:h=.5,restSpeed:u}){const c=e[0],d={done:!1,value:c},f=k=>a!==void 0&&k<a||l!==void 0&&k>l,g=k=>a===void 0?l:l===void 0||Math.abs(a-k)<Math.abs(l-k)?a:l;let m=s*t;const x=c+m,p=o===void 0?x:o(x);p!==x&&(m=p-c);const y=k=>-m*Math.exp(-k/i),v=k=>p+y(k),_=k=>{const A=y(k),T=v(k);d.done=Math.abs(A)<=h,d.value=d.done?p:T};let S,b;const C=k=>{f(d.value)&&(S=k,b=h1({keyframes:[d.value,g(d.value)],velocity:l1(v,k,d.value),damping:n,stiffness:r,restDelta:h,restSpeed:u}))};return C(0),{calculatedDuration:null,next:k=>{let A=!1;return!b&&S===void 0&&(A=!0,_(k),C(k)),S!==void 0&&k>=S?b.next(k-S):(!A&&_(k),d)}}}const SM=Wr(.42,0,1,1),bM=Wr(0,0,.58,1),u1=Wr(.42,0,.58,1),CM=e=>Array.isArray(e)&&typeof e[0]!="number",kM={linear:oe,easeIn:SM,easeInOut:u1,easeOut:bM,circIn:bd,circInOut:$v,circOut:Uv,backIn:Sd,backInOut:zv,backOut:Ov,anticipate:Gv},Rm=e=>{if(yd(e)){av(e.length===4);const[t,s,i,n]=e;return Wr(t,s,i,n)}else if(typeof e=="string")return kM[e];return e};function TM(e,t,s){const i=[],n=s||a1,r=e.length-1;for(let o=0;o<r;o++){let a=n(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||oe:t;a=Hr(l,a)}i.push(a)}return i}function PM(e,t,{clamp:s=!0,ease:i,mixer:n}={}){const r=e.length;if(av(r===t.length),r===1)return()=>t[0];if(r===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[r-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=TM(t,i,n),l=a.length,h=u=>{if(o&&u<e[0])return t[0];let c=0;if(l>1)for(;c<e.length-2&&!(u<e[c+1]);c++);const d=un(e[c],e[c+1],u);return a[c](d)};return s?u=>h(fs(e[0],e[r-1],u)):h}function MM(e,t){const s=e[e.length-1];for(let i=1;i<=t;i++){const n=un(0,t,i);e.push(ht(s,1,n))}}function AM(e){const t=[0];return MM(t,e.length-1),t}function EM(e,t){return e.map(s=>s*t)}function RM(e,t){return e.map(()=>t||u1).splice(0,e.length-1)}function Aa({duration:e=300,keyframes:t,times:s,ease:i="easeInOut"}){const n=CM(i)?i.map(Rm):Rm(i),r={done:!1,value:t[0]},o=EM(s&&s.length===t.length?s:AM(t),e),a=PM(o,t,{ease:Array.isArray(n)?n:RM(t,n)});return{calculatedDuration:e,next:l=>(r.value=a(l),r.done=l>=e,r)}}const NM=e=>{const t=({timestamp:s})=>e(s);return{start:()=>nt.update(t,!0),stop:()=>Ls(t),now:()=>Rt.isProcessing?Rt.timestamp:Ke.now()}},DM={decay:Em,inertia:Em,tween:Aa,keyframes:Aa,spring:h1},IM=e=>e/100;class Ad extends r1{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:s,motionValue:i,element:n,keyframes:r}=this.options,o=(n==null?void 0:n.KeyframeResolver)||Pd,a=(l,h)=>this.onKeyframesResolved(l,h);this.resolver=new o(r,a,s,i,n),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:s="keyframes",repeat:i=0,repeatDelay:n=0,repeatType:r,velocity:o=0}=this.options,a=gd(s)?s:DM[s]||Aa;let l,h;a!==Aa&&typeof t[0]!="number"&&(l=Hr(IM,a1(t[0],t[1])),t=[0,100]);const u=a({...this.options,keyframes:t});r==="mirror"&&(h=a({...this.options,keyframes:[...t].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=Pv(u));const{calculatedDuration:c}=u,d=c+n,f=d*(i+1)-n;return{generator:u,mirroredGenerator:h,mapPercentToKeyframes:l,calculatedDuration:c,resolvedDuration:d,totalDuration:f}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,s=!1){const{resolved:i}=this;if(!i){const{keyframes:k}=this.options;return{done:!0,value:k[k.length-1]}}const{finalKeyframe:n,generator:r,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:h,totalDuration:u,resolvedDuration:c}=i;if(this.startTime===null)return r.next(0);const{delay:d,repeat:f,repeatType:g,repeatDelay:m,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-u/this.speed,this.startTime)),s?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const p=this.currentTime-d*(this.speed>=0?1:-1),y=this.speed>=0?p<0:p>u;this.currentTime=Math.max(p,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let v=this.currentTime,_=r;if(f){const k=Math.min(this.currentTime,u)/c;let A=Math.floor(k),T=k%1;!T&&k>=1&&(T=1),T===1&&A--,A=Math.min(A,f+1),!!(A%2)&&(g==="reverse"?(T=1-T,m&&(T-=m/c)):g==="mirror"&&(_=o)),v=fs(0,1,T)*c}const S=y?{done:!1,value:l[0]}:_.next(v);a&&(S.value=a(S.value));let{done:b}=S;!y&&h!==null&&(b=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&b);return C&&n!==void 0&&(S.value=rl(l,this.options,n)),x&&x(S.value),C&&this.finish(),S}get duration(){const{resolved:t}=this;return t?as(t.calculatedDuration):0}get time(){return as(this.currentTime)}set time(t){t=os(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const s=this.playbackSpeed!==t;this.playbackSpeed=t,s&&(this.time=as(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=NM,onPlay:s,startTime:i}=this.options;this.driver||(this.driver=t(r=>this.tick(r))),s&&s();const n=this.driver.now();this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=n):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const LM=new Set(["opacity","clipPath","filter","transform"]);function FM(e,t,s,{delay:i=0,duration:n=300,repeat:r=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const h={[t]:s};l&&(h.offset=l);const u=Ev(a,n);return Array.isArray(u)&&(h.easing=u),e.animate(h,{delay:i,duration:n,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"})}const jM=ed(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ea=10,BM=2e4;function VM(e){return gd(e.type)||e.type==="spring"||!Av(e.ease)}function OM(e,t){const s=new Ad({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:e[0]};const n=[];let r=0;for(;!i.done&&r<BM;)i=s.sample(r),n.push(i.value),r+=Ea;return{times:void 0,keyframes:n,duration:r-Ea,ease:"linear"}}const c1={anticipate:Gv,backInOut:zv,circInOut:$v};function zM(e){return e in c1}class Nm extends r1{constructor(t){super(t);const{name:s,motionValue:i,element:n,keyframes:r}=this.options;this.resolver=new n1(r,(o,a)=>this.onKeyframesResolved(o,a),s,i,n),this.resolver.scheduleResolve()}initPlayback(t,s){let{duration:i=300,times:n,ease:r,type:o,motionValue:a,name:l,startTime:h}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof r=="string"&&Pa()&&zM(r)&&(r=c1[r]),VM(this.options)){const{onComplete:c,onUpdate:d,motionValue:f,element:g,...m}=this.options,x=OM(t,m);t=x.keyframes,t.length===1&&(t[1]=t[0]),i=x.duration,n=x.times,r=x.ease,o="keyframes"}const u=FM(a.owner.current,l,t,{...this.options,duration:i,times:n,ease:r});return u.startTime=h??this.calcStartTime(),this.pendingTimeline?(gm(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:c}=this.options;a.set(rl(t,this.options,s)),c&&c(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:i,times:n,type:o,ease:r,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:s}=t;return as(s)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:s}=t;return as(s.currentTime||0)}set time(t){const{resolved:s}=this;if(!s)return;const{animation:i}=s;i.currentTime=os(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:s}=t;return s.playbackRate}set speed(t){const{resolved:s}=this;if(!s)return;const{animation:i}=s;i.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:s}=t;return s.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:s}=t;return s.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:s}=this;if(!s)return oe;const{animation:i}=s;gm(i,t)}return oe}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:s}=t;s.playState==="finished"&&this.updateFinishedPromise(),s.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:s}=t;s.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:s,keyframes:i,duration:n,type:r,ease:o,times:a}=t;if(s.playState==="idle"||s.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:u,onComplete:c,element:d,...f}=this.options,g=new Ad({...f,keyframes:i,duration:n,type:r,ease:o,times:a,isGenerator:!0}),m=os(this.time);h.setWithVelocity(g.sample(m-Ea).value,g.sample(m).value,Ea)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:s,name:i,repeatDelay:n,repeatType:r,damping:o,type:a}=t;if(!s||!s.owner||!(s.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:h}=s.owner.getProps();return jM()&&i&&LM.has(i)&&!l&&!h&&!n&&r!=="mirror"&&o!==0&&a!=="inertia"}}const GM={type:"spring",stiffness:500,damping:25,restSpeed:10},UM=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),$M={type:"keyframes",duration:.8},WM={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},HM=(e,{keyframes:t})=>t.length>2?$M:vi.has(e)?e.startsWith("scale")?UM(t[1]):GM:WM;function YM({when:e,delay:t,delayChildren:s,staggerChildren:i,staggerDirection:n,repeat:r,repeatType:o,repeatDelay:a,from:l,elapsed:h,...u}){return!!Object.keys(u).length}const Ed=(e,t,s,i={},n,r)=>o=>{const a=md(i,e)||{},l=a.delay||i.delay||0;let{elapsed:h=0}=i;h=h-os(l);let u={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-h,onUpdate:d=>{t.set(d),a.onUpdate&&a.onUpdate(d)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:r?void 0:n};YM(a)||(u={...u,...HM(e,u)}),u.duration&&(u.duration=os(u.duration)),u.repeatDelay&&(u.repeatDelay=os(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let c=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(c=!0)),c&&!r&&t.get()!==void 0){const d=rl(u.keyframes,a);if(d!==void 0)return nt.update(()=>{u.onUpdate(d),u.onComplete()}),new dP([])}return!r&&Nm.supports(u)?new Nm(u):new Ad(u)};function XM({protectedKeys:e,needsAnimating:t},s){const i=e.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,i}function d1(e,t,{delay:s=0,transitionOverride:i,type:n}={}){var r;let{transition:o=e.getDefaultTransition(),transitionEnd:a,...l}=t;i&&(o=i);const h=[],u=n&&e.animationState&&e.animationState.getState()[n];for(const c in l){const d=e.getValue(c,(r=e.latestValues[c])!==null&&r!==void 0?r:null),f=l[c];if(f===void 0||u&&XM(u,c))continue;const g={delay:s,...md(o||{},c)};let m=!1;if(window.MotionHandoffAnimation){const p=Fv(e);if(p){const y=window.MotionHandoffAnimation(p,c,nt);y!==null&&(g.startTime=y,m=!0)}}Au(e,c),d.start(Ed(c,d,f,e.shouldReduceMotion&&Iv.has(c)?{type:!1}:g,e,m));const x=d.animation;x&&h.push(x)}return a&&Promise.all(h).then(()=>{nt.update(()=>{a&&TP(e,a)})}),h}function Fu(e,t,s={}){var i;const n=nl(e,t,s.type==="exit"?(i=e.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:r=e.getDefaultTransition()||{}}=n||{};s.transitionOverride&&(r=s.transitionOverride);const o=n?()=>Promise.all(d1(e,n,s)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(h=0)=>{const{delayChildren:u=0,staggerChildren:c,staggerDirection:d}=r;return KM(e,t,u+h,c,d,s)}:()=>Promise.resolve(),{when:l}=r;if(l){const[h,u]=l==="beforeChildren"?[o,a]:[a,o];return h().then(()=>u())}else return Promise.all([o(),a(s.delay)])}function KM(e,t,s=0,i=0,n=1,r){const o=[],a=(e.variantChildren.size-1)*i,l=n===1?(h=0)=>h*i:(h=0)=>a-h*i;return Array.from(e.variantChildren).sort(qM).forEach((h,u)=>{h.notify("AnimationStart",t),o.push(Fu(h,t,{...r,delay:s+l(u)}).then(()=>h.notify("AnimationComplete",t)))}),Promise.all(o)}function qM(e,t){return e.sortNodePosition(t)}function QM(e,t,s={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const n=t.map(r=>Fu(e,r,s));i=Promise.all(n)}else if(typeof t=="string")i=Fu(e,t,s);else{const n=typeof t=="function"?nl(e,t,s.custom):t;i=Promise.all(d1(e,n,s))}return i.then(()=>{e.notify("AnimationComplete",t)})}const ZM=id.length;function f1(e){if(!e)return;if(!e.isControllingVariants){const s=e.parent?f1(e.parent)||{}:{};return e.props.initial!==void 0&&(s.initial=e.props.initial),s}const t={};for(let s=0;s<ZM;s++){const i=id[s],n=e.props[i];(Dr(n)||n===!1)&&(t[i]=n)}return t}const JM=[...sd].reverse(),tA=sd.length;function eA(e){return t=>Promise.all(t.map(({animation:s,options:i})=>QM(e,s,i)))}function sA(e){let t=eA(e),s=Dm(),i=!0;const n=l=>(h,u)=>{var c;const d=nl(e,u,l==="exit"?(c=e.presenceContext)===null||c===void 0?void 0:c.custom:void 0);if(d){const{transition:f,transitionEnd:g,...m}=d;h={...h,...m,...g}}return h};function r(l){t=l(e)}function o(l){const{props:h}=e,u=f1(e.parent)||{},c=[],d=new Set;let f={},g=1/0;for(let x=0;x<tA;x++){const p=JM[x],y=s[p],v=h[p]!==void 0?h[p]:u[p],_=Dr(v),S=p===l?y.isActive:null;S===!1&&(g=x);let b=v===u[p]&&v!==h[p]&&_;if(b&&i&&e.manuallyAnimateOnMount&&(b=!1),y.protectedKeys={...f},!y.isActive&&S===null||!v&&!y.prevProp||sl(v)||typeof v=="boolean")continue;const C=iA(y.prevProp,v);let k=C||p===l&&y.isActive&&!b&&_||x>g&&_,A=!1;const T=Array.isArray(v)?v:[v];let R=T.reduce(n(p),{});S===!1&&(R={});const{prevResolvedValues:$={}}=y,V={...$,...R},Y=D=>{k=!0,d.has(D)&&(A=!0,d.delete(D)),y.needsAnimating[D]=!0;const E=e.getValue(D);E&&(E.liveStyle=!1)};for(const D in V){const E=R[D],N=$[D];if(f.hasOwnProperty(D))continue;let j=!1;Tu(E)&&Tu(N)?j=!Tv(E,N):j=E!==N,j?E!=null?Y(D):d.add(D):E!==void 0&&d.has(D)?Y(D):y.protectedKeys[D]=!0}y.prevProp=v,y.prevResolvedValues=R,y.isActive&&(f={...f,...R}),i&&e.blockInitialAnimation&&(k=!1),k&&(!(b&&C)||A)&&c.push(...T.map(D=>({animation:D,options:{type:p}})))}if(d.size){const x={};d.forEach(p=>{const y=e.getBaseTarget(p),v=e.getValue(p);v&&(v.liveStyle=!0),x[p]=y??null}),c.push({animation:x})}let m=!!c.length;return i&&(h.initial===!1||h.initial===h.animate)&&!e.manuallyAnimateOnMount&&(m=!1),i=!1,m?t(c):Promise.resolve()}function a(l,h){var u;if(s[l].isActive===h)return Promise.resolve();(u=e.variantChildren)===null||u===void 0||u.forEach(d=>{var f;return(f=d.animationState)===null||f===void 0?void 0:f.setActive(l,h)}),s[l].isActive=h;const c=o(l);for(const d in s)s[d].protectedKeys={};return c}return{animateChanges:o,setActive:a,setAnimateFunction:r,getState:()=>s,reset:()=>{s=Dm(),i=!0}}}function iA(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Tv(t,e):!1}function Xs(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Dm(){return{animate:Xs(!0),whileInView:Xs(),whileHover:Xs(),whileTap:Xs(),whileDrag:Xs(),whileFocus:Xs(),exit:Xs()}}class Os{constructor(t){this.isMounted=!1,this.node=t}update(){}}class nA extends Os{constructor(t){super(t),t.animationState||(t.animationState=sA(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();sl(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let rA=0;class oA extends Os{constructor(){super(...arguments),this.id=rA++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const n=this.node.animationState.setActive("exit",!t);s&&!t&&n.then(()=>s(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const aA={animation:{Feature:nA},exit:{Feature:oA}};function jr(e,t,s,i={passive:!0}){return e.addEventListener(t,s,i),()=>e.removeEventListener(t,s)}function Yr(e){return{point:{x:e.pageX,y:e.pageY}}}const lA=e=>t=>xd(t)&&e(t,Yr(t));function rr(e,t,s,i){return jr(e,t,lA(s),i)}const Im=(e,t)=>Math.abs(e-t);function hA(e,t){const s=Im(e.x,t.x),i=Im(e.y,t.y);return Math.sqrt(s**2+i**2)}class p1{constructor(t,s,{transformPagePoint:i,contextWindow:n,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const c=hh(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,f=hA(c.offset,{x:0,y:0})>=3;if(!d&&!f)return;const{point:g}=c,{timestamp:m}=Rt;this.history.push({...g,timestamp:m});const{onStart:x,onMove:p}=this.handlers;d||(x&&x(this.lastMoveEvent,c),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,c)},this.handlePointerMove=(c,d)=>{this.lastMoveEvent=c,this.lastMoveEventInfo=lh(d,this.transformPagePoint),nt.update(this.updatePoint,!0)},this.handlePointerUp=(c,d)=>{this.end();const{onEnd:f,onSessionEnd:g,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=hh(c.type==="pointercancel"?this.lastMoveEventInfo:lh(d,this.transformPagePoint),this.history);this.startEvent&&f&&f(c,x),g&&g(c,x)},!xd(t))return;this.dragSnapToOrigin=r,this.handlers=s,this.transformPagePoint=i,this.contextWindow=n||window;const o=Yr(t),a=lh(o,this.transformPagePoint),{point:l}=a,{timestamp:h}=Rt;this.history=[{...l,timestamp:h}];const{onSessionStart:u}=s;u&&u(t,hh(a,this.history)),this.removeListeners=Hr(rr(this.contextWindow,"pointermove",this.handlePointerMove),rr(this.contextWindow,"pointerup",this.handlePointerUp),rr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ls(this.updatePoint)}}function lh(e,t){return t?{point:t(e.point)}:e}function Lm(e,t){return{x:e.x-t.x,y:e.y-t.y}}function hh({point:e},t){return{point:e,delta:Lm(e,m1(t)),offset:Lm(e,uA(t)),velocity:cA(t,.1)}}function uA(e){return e[0]}function m1(e){return e[e.length-1]}function cA(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,i=null;const n=m1(e);for(;s>=0&&(i=e[s],!(n.timestamp-i.timestamp>os(t)));)s--;if(!i)return{x:0,y:0};const r=as(n.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const o={x:(n.x-i.x)/r,y:(n.y-i.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const g1=1e-4,dA=1-g1,fA=1+g1,y1=.01,pA=0-y1,mA=0+y1;function le(e){return e.max-e.min}function gA(e,t,s){return Math.abs(e-t)<=s}function Fm(e,t,s,i=.5){e.origin=i,e.originPoint=ht(t.min,t.max,e.origin),e.scale=le(s)/le(t),e.translate=ht(s.min,s.max,e.origin)-e.originPoint,(e.scale>=dA&&e.scale<=fA||isNaN(e.scale))&&(e.scale=1),(e.translate>=pA&&e.translate<=mA||isNaN(e.translate))&&(e.translate=0)}function or(e,t,s,i){Fm(e.x,t.x,s.x,i?i.originX:void 0),Fm(e.y,t.y,s.y,i?i.originY:void 0)}function jm(e,t,s){e.min=s.min+t.min,e.max=e.min+le(t)}function yA(e,t,s){jm(e.x,t.x,s.x),jm(e.y,t.y,s.y)}function Bm(e,t,s){e.min=t.min-s.min,e.max=e.min+le(t)}function ar(e,t,s){Bm(e.x,t.x,s.x),Bm(e.y,t.y,s.y)}function xA(e,{min:t,max:s},i){return t!==void 0&&e<t?e=i?ht(t,e,i.min):Math.max(e,t):s!==void 0&&e>s&&(e=i?ht(s,e,i.max):Math.min(e,s)),e}function Vm(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function vA(e,{top:t,left:s,bottom:i,right:n}){return{x:Vm(e.x,s,n),y:Vm(e.y,t,i)}}function Om(e,t){let s=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,i]=[i,s]),{min:s,max:i}}function wA(e,t){return{x:Om(e.x,t.x),y:Om(e.y,t.y)}}function _A(e,t){let s=.5;const i=le(e),n=le(t);return n>i?s=un(t.min,t.max-i,e.min):i>n&&(s=un(e.min,e.max-n,t.min)),fs(0,1,s)}function SA(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const ju=.35;function bA(e=ju){return e===!1?e=0:e===!0&&(e=ju),{x:zm(e,"left","right"),y:zm(e,"top","bottom")}}function zm(e,t,s){return{min:Gm(e,t),max:Gm(e,s)}}function Gm(e,t){return typeof e=="number"?e:e[t]||0}const Um=()=>({translate:0,scale:1,origin:0,originPoint:0}),Gi=()=>({x:Um(),y:Um()}),$m=()=>({min:0,max:0}),yt=()=>({x:$m(),y:$m()});function de(e){return[e("x"),e("y")]}function x1({top:e,left:t,right:s,bottom:i}){return{x:{min:t,max:s},y:{min:e,max:i}}}function CA({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function kA(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:i.y,right:i.x}}function uh(e){return e===void 0||e===1}function Bu({scale:e,scaleX:t,scaleY:s}){return!uh(e)||!uh(t)||!uh(s)}function ei(e){return Bu(e)||v1(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function v1(e){return Wm(e.x)||Wm(e.y)}function Wm(e){return e&&e!=="0%"}function Ra(e,t,s){const i=e-s,n=t*i;return s+n}function Hm(e,t,s,i,n){return n!==void 0&&(e=Ra(e,n,i)),Ra(e,s,i)+t}function Vu(e,t=0,s=1,i,n){e.min=Hm(e.min,t,s,i,n),e.max=Hm(e.max,t,s,i,n)}function w1(e,{x:t,y:s}){Vu(e.x,t.translate,t.scale,t.originPoint),Vu(e.y,s.translate,s.scale,s.originPoint)}const Ym=.999999999999,Xm=1.0000000000001;function TA(e,t,s,i=!1){const n=s.length;if(!n)return;t.x=t.y=1;let r,o;for(let a=0;a<n;a++){r=s[a],o=r.projectionDelta;const{visualElement:l}=r.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&$i(e,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,w1(e,o)),i&&ei(r.latestValues)&&$i(e,r.latestValues))}t.x<Xm&&t.x>Ym&&(t.x=1),t.y<Xm&&t.y>Ym&&(t.y=1)}function Ui(e,t){e.min=e.min+t,e.max=e.max+t}function Km(e,t,s,i,n=.5){const r=ht(e.min,e.max,n);Vu(e,t,s,r,i)}function $i(e,t){Km(e.x,t.x,t.scaleX,t.scale,t.originX),Km(e.y,t.y,t.scaleY,t.scale,t.originY)}function _1(e,t){return x1(kA(e.getBoundingClientRect(),t))}function PA(e,t,s){const i=_1(e,s),{scroll:n}=t;return n&&(Ui(i.x,n.offset.x),Ui(i.y,n.offset.y)),i}const S1=({current:e})=>e?e.ownerDocument.defaultView:null,MA=new WeakMap;class AA{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=yt(),this.visualElement=t}start(t,{snapToCursor:s=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const n=u=>{const{dragSnapToOrigin:c}=this.getProps();c?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Yr(u).point)},r=(u,c)=>{const{drag:d,dragPropagation:f,onDragStart:g}=this.getProps();if(d&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=_P(d),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),de(x=>{let p=this.getAxisMotionValue(x).get()||0;if(Xe.test(p)){const{projection:y}=this.visualElement;if(y&&y.layout){const v=y.layout.layoutBox[x];v&&(p=le(v)*(parseFloat(p)/100))}}this.originPoint[x]=p}),g&&nt.postRender(()=>g(u,c)),Au(this.visualElement,"transform");const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},o=(u,c)=>{const{dragPropagation:d,dragDirectionLock:f,onDirectionLock:g,onDrag:m}=this.getProps();if(!d&&!this.openDragLock)return;const{offset:x}=c;if(f&&this.currentDirection===null){this.currentDirection=EA(x),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",c.point,x),this.updateAxis("y",c.point,x),this.visualElement.render(),m&&m(u,c)},a=(u,c)=>this.stop(u,c),l=()=>de(u=>{var c;return this.getAnimationState(u)==="paused"&&((c=this.getAxisMotionValue(u).animation)===null||c===void 0?void 0:c.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new p1(t,{onSessionStart:n,onStart:r,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:S1(this.visualElement)})}stop(t,s){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:n}=s;this.startAnimation(n);const{onDragEnd:r}=this.getProps();r&&nt.postRender(()=>r(t,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,i){const{drag:n}=this.getProps();if(!i||!No(t,n,this.currentDirection))return;const r=this.getAxisMotionValue(t);let o=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(o=xA(o,this.constraints[t],this.elastic[t])),r.set(o)}resolveConstraints(){var t;const{dragConstraints:s,dragElastic:i}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,r=this.constraints;s&&Oi(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&n?this.constraints=vA(n.layoutBox,s):this.constraints=!1,this.elastic=bA(i),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&de(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=SA(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!Oi(t))return!1;const i=t.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const r=PA(i,n.root,this.visualElement.getTransformPagePoint());let o=wA(n.layout.layoutBox,r);if(s){const a=s(CA(o));this.hasMutatedConstraints=!!a,a&&(o=x1(a))}return o}startAnimation(t){const{drag:s,dragMomentum:i,dragElastic:n,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},h=de(u=>{if(!No(u,s,this.currentDirection))return;let c=l&&l[u]||{};o&&(c={min:0,max:0});const d=n?200:1e6,f=n?40:1e7,g={type:"inertia",velocity:i?t[u]:0,bounceStiffness:d,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...r,...c};return this.startAxisValueAnimation(u,g)});return Promise.all(h).then(a)}startAxisValueAnimation(t,s){const i=this.getAxisMotionValue(t);return Au(this.visualElement,t),i.start(Ed(t,i,0,s,this.visualElement,!1))}stopAnimation(){de(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){de(t=>{var s;return(s=this.getAxisMotionValue(t).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(t){var s;return(s=this.getAxisMotionValue(t).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(t){const s=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),n=i[s];return n||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){de(s=>{const{drag:i}=this.getProps();if(!No(s,i,this.currentDirection))return;const{projection:n}=this.visualElement,r=this.getAxisMotionValue(s);if(n&&n.layout){const{min:o,max:a}=n.layout.layoutBox[s];r.set(t[s]-ht(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:i}=this.visualElement;if(!Oi(s)||!i||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};de(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();n[o]=_A({min:l,max:l},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),de(o=>{if(!No(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:h}=this.constraints[o];a.set(ht(l,h,n[o]))})}addListeners(){if(!this.visualElement.current)return;MA.set(this.visualElement,this);const t=this.visualElement.current,s=rr(t,"pointerdown",l=>{const{drag:h,dragListener:u=!0}=this.getProps();h&&u&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Oi(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",i);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),nt.read(i);const o=jr(window,"resize",()=>this.scalePositionWithinConstraints()),a=n.addEventListener("didUpdate",({delta:l,hasLayoutChanged:h})=>{this.isDragging&&h&&(de(u=>{const c=this.getAxisMotionValue(u);c&&(this.originPoint[u]+=l[u].translate,c.set(c.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),s(),r(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:i=!1,dragPropagation:n=!1,dragConstraints:r=!1,dragElastic:o=ju,dragMomentum:a=!0}=t;return{...t,drag:s,dragDirectionLock:i,dragPropagation:n,dragConstraints:r,dragElastic:o,dragMomentum:a}}}function No(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function EA(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class RA extends Os{constructor(t){super(t),this.removeGroupControls=oe,this.removeListeners=oe,this.controls=new AA(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||oe}unmount(){this.removeGroupControls(),this.removeListeners()}}const qm=e=>(t,s)=>{e&&nt.postRender(()=>e(t,s))};class NA extends Os{constructor(){super(...arguments),this.removePointerDownListener=oe}onPointerDown(t){this.session=new p1(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:S1(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:i,onPanEnd:n}=this.node.getProps();return{onSessionStart:qm(t),onStart:qm(s),onMove:i,onEnd:(r,o)=>{delete this.session,n&&nt.postRender(()=>n(r,o))}}}mount(){this.removePointerDownListener=rr(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ko={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Qm(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Dn={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(B.test(e))e=parseFloat(e);else return e;const s=Qm(e,t.target.x),i=Qm(e,t.target.y);return`${s}% ${i}%`}},DA={correct:(e,{treeScale:t,projectionDelta:s})=>{const i=e,n=Fs.parse(e);if(n.length>5)return i;const r=Fs.createTransformer(e),o=typeof n[0]!="number"?1:0,a=s.x.scale*t.x,l=s.y.scale*t.y;n[0+o]/=a,n[1+o]/=l;const h=ht(a,l,.5);return typeof n[2+o]=="number"&&(n[2+o]/=h),typeof n[3+o]=="number"&&(n[3+o]/=h),r(n)}};class IA extends M.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:i,layoutId:n}=this.props,{projection:r}=t;tP(LA),r&&(s.group&&s.group.add(r),i&&i.register&&n&&i.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Ko.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:i,drag:n,isPresent:r}=this.props,o=i.projection;return o&&(o.isPresent=r,n||t.layoutDependency!==s||s===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?o.promote():o.relegate()||nt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),rd.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:i}=this.props,{projection:n}=t;n&&(n.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(n),i&&i.deregister&&i.deregister(n))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function b1(e){const[t,s]=rv(),i=M.useContext(qc);return w.jsx(IA,{...e,layoutGroup:i,switchLayoutGroup:M.useContext(fv),isPresent:t,safeToRemove:s})}const LA={borderRadius:{...Dn,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Dn,borderTopRightRadius:Dn,borderBottomLeftRadius:Dn,borderBottomRightRadius:Dn,boxShadow:DA};function FA(e,t,s){const i=Ot(e)?e:Lr(e);return i.start(Ed("",i,t,s)),i.animation}function jA(e){return e instanceof SVGElement&&e.tagName!=="svg"}const BA=(e,t)=>e.depth-t.depth;class VA{constructor(){this.children=[],this.isDirty=!1}add(t){vd(this.children,t),this.isDirty=!0}remove(t){wd(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(BA),this.isDirty=!1,this.children.forEach(t)}}function OA(e,t){const s=Ke.now(),i=({timestamp:n})=>{const r=n-s;r>=t&&(Ls(i),e(r-t))};return nt.read(i,!0),()=>Ls(i)}const C1=["TopLeft","TopRight","BottomLeft","BottomRight"],zA=C1.length,Zm=e=>typeof e=="string"?parseFloat(e):e,Jm=e=>typeof e=="number"||B.test(e);function GA(e,t,s,i,n,r){n?(e.opacity=ht(0,s.opacity!==void 0?s.opacity:1,UA(i)),e.opacityExit=ht(t.opacity!==void 0?t.opacity:1,0,$A(i))):r&&(e.opacity=ht(t.opacity!==void 0?t.opacity:1,s.opacity!==void 0?s.opacity:1,i));for(let o=0;o<zA;o++){const a=`border${C1[o]}Radius`;let l=t0(t,a),h=t0(s,a);if(l===void 0&&h===void 0)continue;l||(l=0),h||(h=0),l===0||h===0||Jm(l)===Jm(h)?(e[a]=Math.max(ht(Zm(l),Zm(h),i),0),(Xe.test(h)||Xe.test(l))&&(e[a]+="%")):e[a]=h}(t.rotate||s.rotate)&&(e.rotate=ht(t.rotate||0,s.rotate||0,i))}function t0(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const UA=k1(0,.5,Uv),$A=k1(.5,.95,oe);function k1(e,t,s){return i=>i<e?0:i>t?1:s(un(e,t,i))}function e0(e,t){e.min=t.min,e.max=t.max}function ce(e,t){e0(e.x,t.x),e0(e.y,t.y)}function s0(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function i0(e,t,s,i,n){return e-=t,e=Ra(e,1/s,i),n!==void 0&&(e=Ra(e,1/n,i)),e}function WA(e,t=0,s=1,i=.5,n,r=e,o=e){if(Xe.test(t)&&(t=parseFloat(t),t=ht(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=ht(r.min,r.max,i);e===r&&(a-=t),e.min=i0(e.min,t,s,a,n),e.max=i0(e.max,t,s,a,n)}function n0(e,t,[s,i,n],r,o){WA(e,t[s],t[i],t[n],t.scale,r,o)}const HA=["x","scaleX","originX"],YA=["y","scaleY","originY"];function r0(e,t,s,i){n0(e.x,t,HA,s?s.x:void 0,i?i.x:void 0),n0(e.y,t,YA,s?s.y:void 0,i?i.y:void 0)}function o0(e){return e.translate===0&&e.scale===1}function T1(e){return o0(e.x)&&o0(e.y)}function a0(e,t){return e.min===t.min&&e.max===t.max}function XA(e,t){return a0(e.x,t.x)&&a0(e.y,t.y)}function l0(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function P1(e,t){return l0(e.x,t.x)&&l0(e.y,t.y)}function h0(e){return le(e.x)/le(e.y)}function u0(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class KA{constructor(){this.members=[]}add(t){vd(this.members,t),t.scheduleRender()}remove(t){if(wd(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(n=>t===n);if(s===0)return!1;let i;for(let n=s;n>=0;n--){const r=this.members[n];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(t,s){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,s&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:n}=t.options;n===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:i}=t;s.onExitComplete&&s.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function qA(e,t,s){let i="";const n=e.x.translate/t.x,r=e.y.translate/t.y,o=(s==null?void 0:s.z)||0;if((n||r||o)&&(i=`translate3d(${n}px, ${r}px, ${o}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),s){const{transformPerspective:h,rotate:u,rotateX:c,rotateY:d,skewX:f,skewY:g}=s;h&&(i=`perspective(${h}px) ${i}`),u&&(i+=`rotate(${u}deg) `),c&&(i+=`rotateX(${c}deg) `),d&&(i+=`rotateY(${d}deg) `),f&&(i+=`skewX(${f}deg) `),g&&(i+=`skewY(${g}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const si={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},$n=typeof window<"u"&&window.MotionDebug!==void 0,ch=["","X","Y","Z"],QA={visibility:"hidden"},c0=1e3;let ZA=0;function dh(e,t,s,i){const{latestValues:n}=t;n[e]&&(s[e]=n[e],t.setStaticValue(e,0),i&&(i[e]=0))}function M1(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const s=Fv(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:n,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",nt,!(n||r))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&M1(i)}function A1({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:i,resetTransform:n}){return class{constructor(o={},a=t==null?void 0:t()){this.id=ZA++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,$n&&(si.totalNodes=si.resolvedTargetDeltas=si.recalculatedProjection=0),this.nodes.forEach(eE),this.nodes.forEach(oE),this.nodes.forEach(aE),this.nodes.forEach(sE),$n&&window.MotionDebug.record(si)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new VA)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new _d),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=jA(o),this.instance=o;const{layoutId:l,layout:h,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(h||l)&&(this.isLayoutDirty=!0),e){let c;const d=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,c&&c(),c=OA(d,250),Ko.hasAnimatedSinceResize&&(Ko.hasAnimatedSinceResize=!1,this.nodes.forEach(f0))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||h)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d,hasRelativeTargetChanged:f,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||dE,{onLayoutAnimationStart:x,onLayoutAnimationComplete:p}=u.getProps(),y=!this.targetLayout||!P1(this.targetLayout,g)||f,v=!d&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||v||d&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(c,v);const _={...md(m,"layout"),onPlay:x,onComplete:p};(u.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else d||f0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ls(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(lE),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&M1(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const c=this.path[u];c.shouldResetTransform=!0,c.updateScroll("snapshot"),c.options.layoutRoot&&c.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(d0);return}this.isUpdating||this.nodes.forEach(nE),this.isUpdating=!1,this.nodes.forEach(rE),this.nodes.forEach(JA),this.nodes.forEach(tE),this.clearAllSnapshots();const a=Ke.now();Rt.delta=fs(0,1e3/60,a-Rt.timestamp),Rt.timestamp=a,Rt.isProcessing=!0,sh.update.process(Rt),sh.preRender.process(Rt),sh.render.process(Rt),Rt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,rd.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(iE),this.sharedNodes.forEach(hE)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,nt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){nt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=yt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!n)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!T1(this.projectionDelta),l=this.getTransformTemplate(),h=l?l(this.latestValues,""):void 0,u=h!==this.prevTransformTemplateValue;o&&(a||ei(this.latestValues)||u)&&(n(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),fE(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return yt();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(pE))){const{scroll:u}=this.root;u&&(Ui(l.x,u.offset.x),Ui(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=yt();if(ce(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let h=0;h<this.path.length;h++){const u=this.path[h],{scroll:c,options:d}=u;u!==this.root&&c&&d.layoutScroll&&(c.wasRoot&&ce(l,o),Ui(l.x,c.offset.x),Ui(l.y,c.offset.y))}return l}applyTransform(o,a=!1){const l=yt();ce(l,o);for(let h=0;h<this.path.length;h++){const u=this.path[h];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&$i(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),ei(u.latestValues)&&$i(l,u.latestValues)}return ei(this.latestValues)&&$i(l,this.latestValues),l}removeTransform(o){const a=yt();ce(a,o);for(let l=0;l<this.path.length;l++){const h=this.path[l];if(!h.instance||!ei(h.latestValues))continue;Bu(h.latestValues)&&h.updateSnapshot();const u=yt(),c=h.measurePageBox();ce(u,c),r0(a,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,u)}return ei(this.latestValues)&&r0(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Rt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==l;if(!(o||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:d}=this.options;if(!(!this.layout||!(c||d))){if(this.resolvedRelativeTargetAt=Rt.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yt(),this.relativeTargetOrigin=yt(),ar(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),ce(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=yt(),this.targetWithTransforms=yt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),yA(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ce(this.target,this.layout.layoutBox),w1(this.target,this.targetDelta)):ce(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yt(),this.relativeTargetOrigin=yt(),ar(this.relativeTargetOrigin,this.target,f.target),ce(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}$n&&si.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Bu(this.parent.latestValues)||v1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let h=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(h=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Rt.timestamp&&(h=!1),h)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;ce(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;TA(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=yt());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(s0(this.prevProjectionDelta.x,this.projectionDelta.x),s0(this.prevProjectionDelta.y,this.projectionDelta.y)),or(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==f||!u0(this.projectionDelta.x,this.prevProjectionDelta.x)||!u0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),$n&&si.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Gi(),this.projectionDelta=Gi(),this.projectionDeltaWithTransform=Gi()}setAnimationOrigin(o,a=!1){const l=this.snapshot,h=l?l.latestValues:{},u={...this.latestValues},c=Gi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=yt(),f=l?l.source:void 0,g=this.layout?this.layout.source:void 0,m=f!==g,x=this.getStack(),p=!x||x.members.length<=1,y=!!(m&&!p&&this.options.crossfade===!0&&!this.path.some(cE));this.animationProgress=0;let v;this.mixTargetDelta=_=>{const S=_/1e3;p0(c.x,o.x,S),p0(c.y,o.y,S),this.setTargetDelta(c),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ar(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),uE(this.relativeTarget,this.relativeTargetOrigin,d,S),v&&XA(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=yt()),ce(v,this.relativeTarget)),m&&(this.animationValues=u,GA(u,h,this.latestValues,S,y,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ls(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=nt.update(()=>{Ko.hasAnimatedSinceResize=!0,this.currentAnimation=FA(0,c0,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(c0),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:h,latestValues:u}=o;if(!(!a||!l||!h)){if(this!==o&&this.layout&&h&&E1(this.options.animationType,this.layout.layoutBox,h.layoutBox)){l=this.target||yt();const c=le(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+c;const d=le(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+d}ce(a,l),$i(a,u),or(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new KA),this.sharedNodes.get(o).add(a);const h=a.options.initialPromotionConfig;a.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const h=this.getStack();h&&h.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const h={};l.z&&dh("z",o,h,this.animationValues);for(let u=0;u<ch.length;u++)dh(`rotate${ch[u]}`,o,h,this.animationValues),dh(`skew${ch[u]}`,o,h,this.animationValues);o.render();for(const u in h)o.setStaticValue(u,h[u]),this.animationValues&&(this.animationValues[u]=h[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return QA;const h={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=Yo(o==null?void 0:o.pointerEvents)||"",h.transform=u?u(this.latestValues,""):"none",h;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=Yo(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ei(this.latestValues)&&(m.transform=u?u({},""):"none",this.hasProjected=!1),m}const d=c.animationValues||c.latestValues;this.applyTransformsToTarget(),h.transform=qA(this.projectionDeltaWithTransform,this.treeScale,d),u&&(h.transform=u(d,h.transform));const{x:f,y:g}=this.projectionDelta;h.transformOrigin=`${f.origin*100}% ${g.origin*100}% 0`,c.animationValues?h.opacity=c===this?(l=(a=d.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:h.opacity=c===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in Ta){if(d[m]===void 0)continue;const{correct:x,applyTo:p}=Ta[m],y=h.transform==="none"?d[m]:x(d[m],c);if(p){const v=p.length;for(let _=0;_<v;_++)h[p[_]]=y}else h[m]=y}return this.options.layoutId&&(h.pointerEvents=c===this?Yo(o==null?void 0:o.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(d0),this.root.sharedNodes.clear()}}}function JA(e){e.updateLayout()}function tE(e){var t;const s=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&s&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:n}=e.layout,{animationType:r}=e.options,o=s.source!==e.layout.source;r==="size"?de(c=>{const d=o?s.measuredBox[c]:s.layoutBox[c],f=le(d);d.min=i[c].min,d.max=d.min+f}):E1(r,s.layoutBox,i)&&de(c=>{const d=o?s.measuredBox[c]:s.layoutBox[c],f=le(i[c]);d.max=d.min+f,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[c].max=e.relativeTarget[c].min+f)});const a=Gi();or(a,i,s.layoutBox);const l=Gi();o?or(l,e.applyTransform(n,!0),s.measuredBox):or(l,i,s.layoutBox);const h=!T1(a);let u=!1;if(!e.resumeFrom){const c=e.getClosestProjectingParent();if(c&&!c.resumeFrom){const{snapshot:d,layout:f}=c;if(d&&f){const g=yt();ar(g,s.layoutBox,d.layoutBox);const m=yt();ar(m,i,f.layoutBox),P1(g,m)||(u=!0),c.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=g,e.relativeParent=c)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:s,delta:l,layoutDelta:a,hasLayoutChanged:h,hasRelativeTargetChanged:u})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function eE(e){$n&&si.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function sE(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function iE(e){e.clearSnapshot()}function d0(e){e.clearMeasurements()}function nE(e){e.isLayoutDirty=!1}function rE(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function f0(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function oE(e){e.resolveTargetDelta()}function aE(e){e.calcProjection()}function lE(e){e.resetSkewAndRotation()}function hE(e){e.removeLeadSnapshot()}function p0(e,t,s){e.translate=ht(t.translate,0,s),e.scale=ht(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function m0(e,t,s,i){e.min=ht(t.min,s.min,i),e.max=ht(t.max,s.max,i)}function uE(e,t,s,i){m0(e.x,t.x,s.x,i),m0(e.y,t.y,s.y,i)}function cE(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const dE={duration:.45,ease:[.4,0,.1,1]},g0=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),y0=g0("applewebkit/")&&!g0("chrome/")?Math.round:oe;function x0(e){e.min=y0(e.min),e.max=y0(e.max)}function fE(e){x0(e.x),x0(e.y)}function E1(e,t,s){return e==="position"||e==="preserve-aspect"&&!gA(h0(t),h0(s),.2)}function pE(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const mE=A1({attachResizeListener:(e,t)=>jr(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),fh={current:void 0},R1=A1({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!fh.current){const e=new mE({});e.mount(window),e.setOptions({layoutScroll:!0}),fh.current=e}return fh.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),gE={pan:{Feature:NA},drag:{Feature:RA,ProjectionNode:R1,MeasureLayout:b1}};function v0(e,t,s){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",s==="Start");const n="onHover"+s,r=i[n];r&&nt.postRender(()=>r(t,Yr(t)))}class yE extends Os{mount(){const{current:t}=this.node;t&&(this.unmount=gP(t,s=>(v0(this.node,s,"Start"),i=>v0(this.node,i,"End"))))}unmount(){}}class xE extends Os{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Hr(jr(this.node.current,"focus",()=>this.onFocus()),jr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function w0(e,t,s){const{props:i}=e;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap",s==="Start");const n="onTap"+(s==="End"?"":s),r=i[n];r&&nt.postRender(()=>r(t,Yr(t)))}class vE extends Os{mount(){const{current:t}=this.node;t&&(this.unmount=wP(t,s=>(w0(this.node,s,"Start"),(i,{success:n})=>w0(this.node,i,n?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ou=new WeakMap,ph=new WeakMap,wE=e=>{const t=Ou.get(e.target);t&&t(e)},_E=e=>{e.forEach(wE)};function SE({root:e,...t}){const s=e||document;ph.has(s)||ph.set(s,{});const i=ph.get(s),n=JSON.stringify(t);return i[n]||(i[n]=new IntersectionObserver(_E,{root:e,...t})),i[n]}function bE(e,t,s){const i=SE(t);return Ou.set(e,s),i.observe(e),()=>{Ou.delete(e),i.unobserve(e)}}const CE={some:0,all:1};class kE extends Os{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:i,amount:n="some",once:r}=t,o={root:s?s.current:void 0,rootMargin:i,threshold:typeof n=="number"?n:CE[n]},a=l=>{const{isIntersecting:h}=l;if(this.isInView===h||(this.isInView=h,r&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:u,onViewportLeave:c}=this.node.getProps(),d=h?u:c;d&&d(l)};return bE(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(TE(t,s))&&this.startObserver()}unmount(){}}function TE({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const PE={inView:{Feature:kE},tap:{Feature:vE},focus:{Feature:xE},hover:{Feature:yE}},ME={layout:{ProjectionNode:R1,MeasureLayout:b1}},zu={current:null},N1={current:!1};function AE(){if(N1.current=!0,!!Jc)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>zu.current=e.matches;e.addListener(t),t()}else zu.current=!1}const EE=[...i1,jt,Fs],RE=e=>EE.find(s1(e)),_0=new WeakMap;function NE(e,t,s){for(const i in t){const n=t[i],r=s[i];if(Ot(n))e.addValue(i,n);else if(Ot(r))e.addValue(i,Lr(n,{owner:e}));else if(r!==n)if(e.hasValue(i)){const o=e.getValue(i);o.liveStyle===!0?o.jump(n):o.hasAnimated||o.set(n)}else{const o=e.getStaticValue(i);e.addValue(i,Lr(o!==void 0?o:n,{owner:e}))}}for(const i in s)t[i]===void 0&&e.removeValue(i);return t}const S0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class DE{scrapeMotionValuesFromProps(t,s,i){return{}}constructor({parent:t,props:s,presenceContext:i,reducedMotionConfig:n,blockInitialAnimation:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Pd,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Ke.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,nt.render(this.render,!1,!0))};const{latestValues:l,renderState:h,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=s.initial?{...l}:{},this.renderState=h,this.parent=t,this.props=s,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=n,this.options=a,this.blockInitialAnimation=!!r,this.isControllingVariants=il(s),this.isVariantNode=cv(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(s,{},this);for(const f in d){const g=d[f];l[f]!==void 0&&Ot(g)&&g.set(l[f],!1)}}mount(t){this.current=t,_0.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,i)=>this.bindToMotionValue(i,s)),N1.current||AE(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:zu.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){_0.delete(this.current),this.projection&&this.projection.unmount(),Ls(this.notifyUpdate),Ls(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const s=this.features[t];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(t,s){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=vi.has(t),n=s.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&nt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),r=s.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,s)),this.valueSubscriptions.set(t,()=>{n(),r(),o&&o(),s.owner&&s.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in cn){const s=cn[t];if(!s)continue;const{isEnabled:i,Feature:n}=s;if(!this.features[t]&&n&&i(this.props)&&(this.features[t]=new n(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):yt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let i=0;i<S0.length;i++){const n=S0[i];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const r="on"+n,o=t[r];o&&(this.propEventSubscriptions[n]=this.on(n,o))}this.prevMotionValues=NE(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){const i=this.values.get(t);s!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,s),this.values.set(t,s),this.latestValues[t]=s.get())}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&s!==void 0&&(i=Lr(s===null?void 0:s,{owner:this}),this.addValue(t,i)),i}readValue(t,s){var i;let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(i=this.getBaseTargetFromProps(this.props,t))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(t1(n)||Wv(n))?n=parseFloat(n):!RE(n)&&Fs.test(s)&&(n=Qv(t,s)),this.setBaseTarget(t,Ot(n)?n.get():n)),Ot(n)?n.get():n}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){var s;const{initial:i}=this.props;let n;if(typeof i=="string"||typeof i=="object"){const o=ad(this.props,i,(s=this.presenceContext)===null||s===void 0?void 0:s.custom);o&&(n=o[t])}if(i&&n!==void 0)return n;const r=this.getBaseTargetFromProps(this.props,t);return r!==void 0&&!Ot(r)?r:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new _d),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}}class D1 extends DE{constructor(){super(...arguments),this.KeyframeResolver=n1}sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:i}){delete s[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ot(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function IE(e){return window.getComputedStyle(e)}class LE extends D1{constructor(){super(...arguments),this.type="html",this.renderInstance=wv}readValueFromInstance(t,s){if(vi.has(s)){const i=Td(s);return i&&i.default||0}else{const i=IE(t),n=(yv(s)?i.getPropertyValue(s):i[s])||0;return typeof n=="string"?n.trim():n}}measureInstanceViewportBox(t,{transformPagePoint:s}){return _1(t,s)}build(t,s,i){ud(t,s,i.transformTemplate)}scrapeMotionValuesFromProps(t,s,i){return pd(t,s,i)}}class FE extends D1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=yt}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(vi.has(s)){const i=Td(s);return i&&i.default||0}return s=_v.has(s)?s:nd(s),t.getAttribute(s)}scrapeMotionValuesFromProps(t,s,i){return Cv(t,s,i)}build(t,s,i){cd(t,s,this.isSVGTag,i.transformTemplate)}renderInstance(t,s,i,n){Sv(t,s,i,n)}mount(t){this.isSVGTag=fd(t.tagName),super.mount(t)}}const jE=(e,t)=>od(e)?new FE(t):new LE(t,{allowProjection:e!==M.Fragment}),BE=hP({...aA,...PE,...gE,...ME},jE),Ee=CT(BE);function VE(){const{hp:e,maxHp:t,scrap:s,wave:i,level:n,xp:r,maxXp:o,wagonCount:a,maxWagonCount:l,speed:h,gear:u,waveTimer:c,waveDuration:d}=O(),[f,g]=M.useState(!0),m=r/o*100;return w.jsxs("div",{className:"absolute top-0 left-0 w-full p-4 pointer-events-none flex flex-col items-center z-40",children:[w.jsx("button",{onClick:()=>g(!f),className:"pointer-events-auto absolute top-4 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-slate-800/50 hover:bg-slate-700 text-slate-400 hover:text-white p-1 rounded-b-lg border-x border-b border-slate-700 transition-colors z-50",children:f?w.jsx(tT,{className:"w-4 h-4"}):w.jsx(Jk,{className:"w-4 h-4"})}),w.jsx(td,{children:f&&w.jsxs(Ee.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"bg-slate-900/90 border border-slate-700 rounded-lg p-4 shadow-2xl w-full max-w-5xl flex flex-col gap-3 backdrop-blur-md",children:[w.jsxs("div",{className:"flex justify-between items-center border-b border-slate-700 pb-3",children:[w.jsxs("div",{className:"flex gap-8",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(eT,{className:"w-5 h-5 text-yellow-400"}),w.jsxs("div",{children:[w.jsx("div",{className:"text-[10px] text-slate-500 font-bold tracking-widest",children:"SCRAP"}),w.jsx("div",{className:"text-2xl font-black text-yellow-400 leading-none drop-shadow-lg",children:Math.floor(s)})]})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(dT,{className:"w-5 h-5 text-purple-400"}),w.jsxs("div",{children:[w.jsx("div",{className:"text-[10px] text-slate-500 font-bold tracking-widest",children:"LEVEL"}),w.jsx("div",{className:"text-2xl font-black text-purple-400 leading-none drop-shadow-lg",children:n})]})]})]}),w.jsxs("div",{className:"flex flex-col items-center",children:[w.jsx("div",{className:"text-slate-700 font-bold text-xs tracking-[0.3em] mb-2",children:"ARMORED TRAIN COMMAND"}),w.jsxs("div",{className:"flex items-center gap-4 bg-slate-950/50 px-4 py-1 rounded-full border border-slate-800",children:[w.jsx(Kc,{className:`w-4 h-4 ${h>0?"text-green-400":h<0?"text-red-400":"text-slate-500"}`}),w.jsx("div",{className:"flex gap-1",children:[-1,0,1,2,3].map(x=>w.jsx("div",{className:`w-2 h-4 rounded-sm transition-colors ${u===x?x===0?"bg-slate-400":x<0?"bg-red-500":"bg-green-500":"bg-slate-800"}`},x))}),w.jsxs("div",{className:"text-xs font-mono font-bold text-slate-300 w-12 text-right",children:[Math.abs(h).toFixed(1)," ",w.jsx("span",{className:"text-slate-600",children:"KM/H"})]})]})]}),w.jsxs("div",{className:"flex gap-8 text-right",children:[w.jsxs("div",{className:"flex items-center gap-2 flex-row-reverse",children:[w.jsx(nT,{className:"w-5 h-5 text-red-400"}),w.jsxs("div",{children:[w.jsx("div",{className:"text-[10px] text-slate-500 font-bold tracking-widest",children:"INTEGRITY"}),w.jsxs("div",{className:"text-2xl font-black text-red-400 leading-none drop-shadow-lg",children:[Math.floor(e),"%"]})]})]}),w.jsxs("div",{className:"flex items-center gap-2 flex-row-reverse",children:[w.jsx(qk,{className:"w-5 h-5 text-blue-400"}),w.jsxs("div",{children:[w.jsx("div",{className:"text-[10px] text-slate-500 font-bold tracking-widest",children:"CARS"}),w.jsxs("div",{className:"text-2xl font-black text-blue-400 leading-none drop-shadow-lg",children:[a,w.jsx("span",{className:"text-base text-slate-600",children:"/"}),w.jsx("span",{className:"text-base text-slate-600",children:l})]})]})]})]})]}),w.jsxs("div",{className:"flex flex-col gap-1",children:[w.jsxs("div",{className:"w-full h-3 bg-slate-950 rounded-full overflow-hidden border border-slate-800 relative",children:[w.jsx("div",{className:"h-full bg-gradient-to-r from-purple-800 to-purple-500 transition-all duration-300",style:{width:`${m}%`}}),w.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:w.jsx("span",{className:"text-[8px] font-bold text-white/30 tracking-widest",children:"XP SEQUENCE"})})]}),w.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[w.jsxs("div",{className:"flex justify-between items-end px-2",children:[w.jsxs("div",{className:"text-[10px] font-bold text-red-500 whitespace-nowrap",children:["WAVE ",i]}),w.jsxs("div",{className:"text-[8px] font-bold text-slate-500",children:[(d-c)/60|0,"s"]})]}),w.jsx("div",{className:"w-full h-1 bg-slate-900 rounded-full overflow-hidden",children:w.jsx("div",{className:"h-full bg-red-600",style:{width:`${c/d*100}%`}})})]})]})]})})]})}function OE({onSelect:e}){const{scrap:t,rerollCost:s,increaseRerollCost:i,setStats:n,ownedWagons:r,wagonCount:o,maxWagonCount:a}=O(),[l,h]=M.useState([]),u=()=>{const f=[];let g=Qi;o>=a&&(g=Qi.filter(m=>m.type==="stat"||m.type==="wagon"&&r.some(x=>x.id===m.id)));for(let m=0;m<3;m++){const x=Math.random();let p=g.filter(v=>v.rarity==="common");x>.6&&(p=g.filter(v=>v.rarity==="rare")),x>.9&&(p=g.filter(v=>v.rarity==="legendary")),p.length===0&&(p=g.filter(v=>v.rarity==="common")),p.length===0&&(p=g);const y=p[Math.floor(Math.random()*p.length)];f.push(y)}h(f)};M.useEffect(()=>{u()},[]);const c=()=>{t>=s&&(n({scrap:t-s}),i(),u())},d=f=>({gunner:"",sniper:"",flame:"",shield:"",miner:"",tesla:"",mortar:"",cryo:"",drone:"",spike:"",repair:"",dmg:"",speed:"",omni:"",ram:"",magnet:"",fabricator:"",stasis:"",medic:""})[f]||"";return w.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/80 backdrop-blur-sm z-50 pointer-events-auto",children:w.jsxs("div",{className:"flex flex-col items-center w-full max-w-5xl",children:[w.jsxs(Ee.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},className:"text-center mb-8",children:[w.jsx("h1",{className:"text-5xl font-black text-transparent bg-clip-text bg-gradient-to-b from-purple-300 to-purple-600 mb-2 drop-shadow-lg",children:"LEVEL UP!"}),w.jsx("p",{className:"text-slate-400 tracking-widest font-bold",children:"CHOOSE UPGRADE"})]}),w.jsx("div",{className:"flex gap-6 justify-center w-full flex-wrap",children:w.jsx(td,{mode:"wait",children:l.map((f,g)=>w.jsxs(Ee.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8},transition:{delay:g*.1},whileHover:{scale:1.05,y:-10},onClick:()=>e(f),className:`
                  relative w-64 h-80 p-6 rounded-xl border-2 cursor-pointer flex flex-col items-center text-center transition-colors
                  ${f.rarity==="common"?"bg-slate-800 border-slate-600 hover:border-slate-400":""}
                  ${f.rarity==="rare"?"bg-slate-900 border-blue-500 hover:border-blue-300 shadow-[0_0_20px_rgba(59,130,246,0.3)]":""}
                  ${f.rarity==="legendary"?"bg-slate-950 border-yellow-500 hover:border-yellow-300 shadow-[0_0_30px_rgba(234,179,8,0.4)]":""}
                `,children:[w.jsx("div",{className:`absolute top-0 right-0 px-3 py-1 text-[10px] font-bold uppercase rounded-bl-lg rounded-tr-lg
                  ${f.rarity==="common"?"bg-slate-600 text-slate-200":""}
                  ${f.rarity==="rare"?"bg-blue-600 text-white":""}
                  ${f.rarity==="legendary"?"bg-yellow-500 text-black":""}
                `,children:f.rarity}),(()=>{const m=r&&(r.find(x=>x.id===f.id&&x.level<x.maxLevel)||r.find(x=>x.id===f.id));if(m){const x=m.level>=m.maxLevel;return w.jsx("div",{className:`absolute top-0 left-0 px-3 py-1 text-[10px] font-bold uppercase rounded-br-lg rounded-tl-lg ${x?"bg-red-500 text-white":"bg-green-500 text-black"}`,children:x?"MAX LEVEL":`LEVEL ${m.level}  ${m.level+1}`})}return null})(),w.jsx("div",{className:"text-6xl my-6 filter drop-shadow-lg",children:d(f.id)}),w.jsx("h3",{className:`text-xl font-bold mb-4
                   ${f.rarity==="common"?"text-slate-200":""}
                   ${f.rarity==="rare"?"text-blue-400":""}
                   ${f.rarity==="legendary"?"text-yellow-400":""}
                `,children:f.title}),w.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:f.desc})]},`${f.id}-${g}`))})}),w.jsxs(Ee.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:c,className:`mt-12 px-8 py-3 rounded-full font-bold flex items-center gap-2 transition-all
            ${t>=s?"bg-slate-700 hover:bg-slate-600 text-white":"bg-slate-800 text-slate-500 cursor-not-allowed"}
          `,children:[w.jsx(nv,{className:`w-5 h-5 ${t>=s?"text-yellow-400":""}`}),"REROLL (",s,")"]})]})})}function zE({onClose:e}){const[t,s]=M.useState("wagons");return w.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/80 backdrop-blur-sm z-50 p-8 pointer-events-auto",children:w.jsxs(Ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-slate-900 border border-slate-700 w-full max-w-4xl h-[80vh] rounded-xl shadow-2xl flex flex-col overflow-hidden",children:[w.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-800 bg-slate-950",children:[w.jsx("h2",{className:"text-2xl font-bold tracking-widest text-slate-200",children:"FIELD MANUAL"}),w.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-800 rounded-full transition-colors",children:w.jsx(cT,{className:"w-6 h-6 text-slate-400 hover:text-white"})})]}),w.jsx("div",{className:"flex border-b border-slate-800 bg-slate-900",children:["wagons","threats","depots","systems"].map(i=>w.jsx("button",{onClick:()=>s(i),className:`flex-1 py-4 text-sm font-bold tracking-wider uppercase transition-colors
                ${t===i?"bg-slate-800 text-blue-400 border-b-2 border-blue-400":"text-slate-500 hover:text-slate-300"}
              `,children:i},i))}),w.jsxs("div",{className:"flex-1 overflow-y-auto p-8 bg-slate-900/50",children:[t==="wagons"&&w.jsxs("div",{className:"space-y-8",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-slate-500 text-xs font-bold mb-4 uppercase tracking-wider",children:"Offensive Wagons"}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w.jsx(z,{category:"wagon",type:"gunner",title:"GUNNER CAR",tag:"COMMON",desc:"The workhorse. Fires standard rounds at medium range. Reliable and versatile.",stats:"+20% Dmg, +25% Fire Rate"}),w.jsx(z,{category:"wagon",type:"cryo",title:"CRYO BEAM",tag:"COMMON",desc:"Low damage output, but significantly slows enemy movement speed on impact. Essential for crowd control.",stats:"+20% Dmg, +10% Fire Rate, +10% Range"}),w.jsx(z,{category:"wagon",type:"sniper",title:"SNIPER CAR",tag:"RARE",color:"text-blue-400",desc:"High damage, extreme range, very slow reload. Ideal for taking out Tanks before they reach you.",stats:"+32% Dmg, +10% Fire Rate, +Turn Speed"}),w.jsx(z,{category:"wagon",type:"flame",title:"FLAMER CAR",tag:"RARE",color:"text-blue-400",desc:"Spews short-range flames rapidly. Devastating against Swarmers but requires close range.",stats:"+20% Dmg, +32% Fire Rate, +10% Range"}),w.jsx(z,{category:"wagon",type:"tesla",title:"TESLA COIL",tag:"RARE",color:"text-blue-400",desc:"Instantly zaps nearby enemies with 100% accuracy. Perfect for fast moving targets like Dashers.",stats:"+20% Dmg, +10% Fire Rate, +10% Range"}),w.jsx(z,{category:"wagon",type:"mortar",title:"HEAVY MORTAR",tag:"RARE",color:"text-blue-400",desc:"Lobs explosive shells over long distances. Deals massive area damage but has flight time.",stats:"+20% Dmg, +10% Fire Rate, +15% Range"}),w.jsx(z,{category:"wagon",type:"drone",title:"DRONE BAY",tag:"LEGENDARY",color:"text-yellow-400",desc:"Deploys autonomous drones that orbit the train and intercept enemies.",stats:"+1 Drone Count"}),w.jsx(z,{category:"wagon",type:"railgun",title:"OMNI-BATTERY",tag:"LEGENDARY",color:"text-yellow-400",desc:"Advanced tech that fires rapid laser beams in a 360-degree arc.",stats:"+20% Dmg, +10% Fire Rate"}),w.jsx(z,{category:"wagon",type:"missile",title:"MISSILE CAR",tag:"RARE",color:"text-blue-400",desc:"Fires homing rockets that track targets.",stats:"+38% Dmg, +10% Fire Rate, +10% Range"}),w.jsx(z,{category:"wagon",type:"cluster",title:"CLUSTER CAR",tag:"LEGENDARY",color:"text-yellow-400",desc:"Fires a large rocket that splits into mini-rockets on impact.",stats:"+44% Dmg, +10% Fire Rate"})]})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-slate-500 text-xs font-bold mb-4 uppercase tracking-wider",children:"Support & Passive"}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w.jsx(z,{category:"wagon",type:"fabricator",title:"FABRICATOR",tag:"RARE",desc:"Buffs the damage of adjacent wagons. Position carefully for maximum effect.",stats:"+10% Buff Strength"}),w.jsx(z,{category:"wagon",type:"stasis",title:"STASIS FIELD",tag:"COMMON",desc:"Slows down all enemies within a short radius around the wagon.",stats:"+15% Range, +5% Slow"}),w.jsx(z,{category:"wagon",type:"medic",title:"MEDIC BAY",tag:"RARE",desc:"Slowly repairs the train's hull over time. Critical for long runs.",stats:"+32% Heal Rate"}),w.jsx(z,{category:"wagon",type:"shield",title:"SHIELD CAR",tag:"COMMON",desc:"Reinforces the train's hull, reducing collision damage taken from all sources.",stats:"+20% Effectiveness"}),w.jsx(z,{category:"wagon",type:"miner",title:"SCRAPPER",tag:"COMMON",desc:"Contains automated recycling units that generate Scrap periodically.",stats:"+5 Scrap per Cycle"}),w.jsx(z,{category:"wagon",type:"spike",title:"SPIKE ARMOR",tag:"COMMON",desc:"Covers the train in spikes, dealing contact damage to any enemy that touches you.",stats:"+20% Dmg"})]})]})]}),t==="threats"&&w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w.jsx(z,{category:"enemy",type:"crusher",title:"MINI-BOSSES",color:"text-red-500",desc:"Every 10 waves, a massive Boss will appear. They have unique skills and high HP. Defeat them to spawn a Depot."}),w.jsx(z,{category:"enemy",type:"swarmer",title:"SWARMER",color:"text-red-400",desc:"Small, fast, and weak. They attack in large swarms to overwhelm defenses. Vulnerable to splash damage."}),w.jsx(z,{category:"enemy",type:"normal",title:"GRUNT",color:"text-purple-400",desc:"Standard combat unit. Average speed and durability. The most common threat."}),w.jsx(z,{category:"enemy",type:"dasher",title:"DASHER",color:"text-orange-400",desc:"High-speed interceptor. Rushes the train head-on. Prioritize with fast-firing weapons or Tesla."}),w.jsx(z,{category:"enemy",type:"tank",title:"TANK",color:"text-green-600",desc:"Heavily armored and slow. Deals massive collision damage if it rams you. Use Snipers or Mortars."}),w.jsx(z,{category:"enemy",type:"boomer",title:"BOOMER",color:"text-yellow-400",desc:"Unstable unit. Explodes upon death, dealing massive area damage to everything nearby, including the train."}),w.jsx(z,{category:"enemy",type:"screamer",title:"SCREAMER",color:"text-pink-400",desc:"Fast support unit. Emits a speed aura that buffs nearby enemies."}),w.jsx(z,{category:"enemy",type:"healer",title:"HEALER",color:"text-green-400",desc:"Durable support unit. Regenerates the HP of nearby allies."}),w.jsx(z,{category:"enemy",type:"shielder",title:"SHIELDER",color:"text-blue-400",desc:"Grants temporary shields to nearby allies."})]}),t==="depots"&&w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"bg-slate-800/50 p-4 rounded border border-slate-700 mb-6",children:[w.jsx("h3",{className:"text-yellow-400 font-bold mb-2",children:"HOW TO CLAIM"}),w.jsxs("p",{className:"text-sm text-slate-300",children:["Depots are dropped by Bosses. To claim a Depot, you must ",w.jsx("span",{className:"text-white font-bold",children:"build your track directly over it"}),". The train will automatically secure the asset once the track is connected."]})]}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w.jsx(z,{category:"depot",type:"gearbox",title:"GEARBOX",color:"text-yellow-400",desc:"+1 Max Speed Gear. Allows the train to reach higher top speeds."}),w.jsx(z,{category:"depot",type:"extender",title:"EXTENDER",color:"text-blue-400",desc:"+3 Max Wagon Capacity. Essential for building a longer train."}),w.jsx(z,{category:"depot",type:"recycler",title:"RECYCLER",color:"text-red-400",desc:"Instantly scraps your last wagon for 200 Scrap. Useful for getting rid of early game units."}),w.jsx(z,{category:"depot",type:"repair",title:"REPAIR STATION",color:"text-green-400",desc:"Restores 100% Hull and increases Max HP by 50."}),w.jsx(z,{category:"depot",type:"armory",title:"ARMORY",color:"text-purple-400",desc:"Grants a permanent +20% Damage boost to all weapons."}),w.jsx(z,{category:"depot",type:"reactor",title:"REACTOR",color:"text-orange-400",desc:"Increases the Fire Rate of all wagons by 15%."}),w.jsx(z,{category:"depot",type:"shield",title:"SHIELD GEN",color:"text-cyan-400",desc:"Adds a permanent 50 HP Shield layer that regenerates over time."}),w.jsx(z,{category:"depot",type:"magnet",title:"MAGNET TOWER",color:"text-pink-400",desc:"Increases Loot Collection Range by 200%."}),w.jsx(z,{category:"depot",type:"drill",title:"DRILL STATION",color:"text-slate-400",desc:"Increases Ram Damage by 50. Good for aggressive playstyles."}),w.jsx(z,{category:"depot",type:"lab",title:"LABORATORY",color:"text-teal-400",desc:"Immediately grants a random Rare Wagon card."})]})]}),t==="systems"&&w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase mb-4",children:"Controls"}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsxs("div",{className:"bg-slate-800 p-4 rounded border border-slate-700",children:[w.jsx("span",{className:"text-yellow-400 font-bold",children:"W / S"}),w.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Increase / Decrease Throttle Gear."})]}),w.jsxs("div",{className:"bg-slate-800 p-4 rounded border border-slate-700",children:[w.jsx("span",{className:"text-blue-400 font-bold",children:"LMB (HOLD)"}),w.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Drag Nodes to reshape the track."})]}),w.jsxs("div",{className:"bg-slate-800 p-4 rounded border border-slate-700",children:[w.jsx("span",{className:"text-red-400 font-bold",children:"RMB (CLICK)"}),w.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Click Line to Add Node / Click Node to Delete."})]}),w.jsxs("div",{className:"bg-slate-800 p-4 rounded border border-slate-700",children:[w.jsx("span",{className:"text-purple-400 font-bold",children:"SPACEBAR"}),w.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Fire Scrap Salvo (Costs 20 Scrap)."})]})]})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase mb-4",children:"Mechanics"}),w.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[w.jsx(z,{icon:"",title:"LEVELING",desc:"Picking a card for a wagon you already own upgrades it (Max Level 5). Stats scale with level."}),w.jsx(z,{icon:"",title:"TRACK PHYSICS",desc:"The train follows a continuous spline curve. Adding nodes increases track length and wagon capacity. Expanding the loop area costs Scrap."}),w.jsx(z,{icon:"",title:"CRYSTALS",desc:"Crystals spawn randomly. They grow through 3 stages over time. Harvesting a fully grown crystal yields massive Scrap."}),w.jsx(z,{icon:"",title:"LOOT & MAGNET",desc:"Enemies drop Scrap (Yellow) and XP (Purple). The train has a Magnet Range - you must drive near loot to collect it. Increase range with upgrades."}),w.jsx(z,{icon:"",title:"RAMMING",desc:"Running into enemies deals damage to them but hurts your hull. The faster you go, the more damage you deal."})]})]})]})]})]})})}function z({category:e,type:t,icon:s,title:i,tag:n,color:r="text-slate-200",desc:o,stats:a}){return w.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg flex gap-4 items-start border border-slate-700/50 hover:border-slate-600 transition-colors",children:[w.jsx("div",{className:"mt-1 shrink-0",children:e?w.jsx(GE,{category:e,type:t,size:48}):w.jsx("div",{className:"text-3xl",children:s})}),w.jsxs("div",{className:"flex-1",children:[w.jsxs("h4",{className:`font-bold ${r} flex items-center gap-2`,children:[i,n&&w.jsx("span",{className:"text-[10px] bg-slate-700 text-slate-300 px-1.5 py-0.5 rounded",children:n})]}),w.jsx("p",{className:"text-sm text-slate-400 mt-1 leading-relaxed",children:o}),a&&w.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-700/50 text-xs text-slate-500 font-mono",children:[w.jsxs("p",{children:[w.jsx("span",{className:"text-slate-400",children:"MAX LVL:"})," 5"]}),w.jsxs("p",{children:[w.jsx("span",{className:"text-slate-400",children:"UPGRADE:"})," ",a]})]})]})]})}function GE({category:e,type:t,size:s}){const i=M.useRef(null);return M.useEffect(()=>{const n=i.current;if(!n)return;const r=n.getContext("2d"),o=s/2,a=s/2,l=s*.4;if(r.clearRect(0,0,s,s),r.save(),r.translate(o,a),e==="wagon")r.fillStyle="#334155",r.strokeStyle="#1e293b",r.lineWidth=2,r.fillRect(-l*.9,-l*.7,l*1.8,l*1.4),r.strokeRect(-l*.9,-l*.7,l*1.8,l*1.4),t==="gunner"?(r.fillStyle="#475569",r.fillRect(-l*.6,-l*.6,l*1.2,l*1.2),r.fillStyle="#3b82f6",r.fillRect(0,-l*.2,l*1.1,l*.4)):t==="sniper"?(r.fillStyle="#1e293b",r.fillRect(-l*.6,-l*.6,l*1.2,l*1.2),r.fillStyle="#facc15",r.fillRect(0,-l*.15,l*1.6,l*.3)):t==="flame"?(r.fillStyle="#7f1d1d",r.fillRect(-l*.6,-l*.6,l*1.2,l*1.2),r.fillStyle="#f97316",r.fillRect(0,-l*.3,l,l*.6)):t==="mortar"?(r.fillStyle="#3f3f46",r.fillRect(-l*.6,-l*.6,l*1.2,l*1.2),r.fillStyle="#000000",r.beginPath(),r.arc(0,0,l*.6,0,Math.PI*2),r.fill()):t==="cryo"?(r.fillStyle="#164e63",r.fillRect(-l*.6,-l*.6,l*1.2,l*1.2),r.fillStyle="#67e8f9",r.fillRect(0,-l*.2,l,l*.4)):t==="railgun"?(r.fillStyle="#0f172a",r.fillRect(-l*.6,-l*.6,l*1.2,l*1.2),r.fillStyle="#ffffff",r.fillRect(0,-l*.1,l*1.8,l*.2)):t==="shield"?(r.fillStyle="#0369a1",r.strokeStyle="#38bdf8",r.beginPath(),r.arc(0,0,l*.8,0,Math.PI*2),r.fill(),r.stroke()):t==="tesla"?(r.fillStyle="#4c1d95",r.fillRect(-l*.6,-l*.6,l*1.2,l*1.2),r.fillStyle="#a78bfa",r.beginPath(),r.arc(0,0,l*.4,0,Math.PI*2),r.fill()):t==="drone"?(r.fillStyle="#14532d",r.fillRect(-l*.6,-l*.6,l*1.2,l*1.2),r.strokeStyle="#4ade80",r.lineWidth=1,r.strokeRect(-l*.4,-l*.4,l*.8,l*.8)):t==="spike"?(r.fillStyle="#7f1d1d",r.fillRect(-l*.6,-l*.6,l*1.2,l*1.2),r.fillStyle="#991b1b",r.beginPath(),r.moveTo(l*.6,-l*.6),r.lineTo(l*1.2,-l*.6),r.lineTo(l*.9,0),r.fill()):t==="fabricator"?(r.fillStyle="#c2410c",r.fillRect(-l*.6,-l*.6,l*1.2,l*1.2),r.fillStyle="#fdba74",r.beginPath(),r.arc(0,0,l*.5,0,Math.PI*2),r.fill()):t==="stasis"?(r.fillStyle="#312e81",r.fillRect(-l*.6,-l*.6,l*1.2,l*1.2),r.strokeStyle="#818cf8",r.lineWidth=2,r.beginPath(),r.arc(0,0,l*.6,0,Math.PI*2),r.stroke()):t==="medic"?(r.fillStyle="#be123c",r.fillRect(-l*.6,-l*.6,l*1.2,l*1.2),r.fillStyle="#ffffff",r.fillRect(-l*.2,-l*.4,l*.4,l*.8),r.fillRect(-l*.4,-l*.2,l*.8,l*.4)):t==="miner"?(r.fillStyle="#334155",r.fillRect(-l*.6,-l*.6,l*1.2,l*1.2),r.fillStyle="#854d0e",r.fillRect(-l*.6,-l*.2,l*1.2,l*.4)):t==="missile"?(r.fillStyle="#881337",r.fillRect(-l*.6,-l*.6,l*1.2,l*1.2),r.fillStyle="#e11d48",r.fillRect(-l*.5,-l*.4,l*.3,l*.8),r.fillRect(l*.2,-l*.4,l*.3,l*.8)):t==="cluster"&&(r.fillStyle="#1e293b",r.fillRect(-l*.7,-l*.7,l*1.4,l*1.4),r.fillStyle="#000000",r.beginPath(),r.arc(-l*.3,-l*.3,l*.2,0,Math.PI*2),r.fill(),r.beginPath(),r.arc(l*.3,-l*.3,l*.2,0,Math.PI*2),r.fill(),r.beginPath(),r.arc(-l*.3,l*.3,l*.2,0,Math.PI*2),r.fill(),r.beginPath(),r.arc(l*.3,l*.3,l*.2,0,Math.PI*2),r.fill());else if(e==="enemy"){let h="#a855f7";if(t==="swarmer"&&(h="#ef4444"),t==="tank"&&(h="#166534"),t==="dasher"&&(h="#f97316"),t==="boomer"&&(h="#facc15"),t==="crusher"&&(h="#7f1d1d"),t==="screamer"&&(h="#ec4899"),t==="healer"&&(h="#22c55e"),t==="shielder"&&(h="#3b82f6"),r.fillStyle=h,r.strokeStyle="#000000",r.lineWidth=2,t==="swarmer")r.beginPath(),r.moveTo(0,-l),r.lineTo(l,0),r.lineTo(0,l),r.lineTo(-l,0),r.closePath(),r.fill();else if(t==="tank")r.fillRect(-l,-l,l*2,l*2),r.strokeRect(-l,-l,l*2,l*2);else if(t==="crusher"){r.beginPath(),r.arc(0,0,l,0,Math.PI*2),r.fill(),r.stroke(),r.strokeStyle="#7f1d1d",r.lineWidth=3;for(let u=0;u<8;u++){const c=u/8*Math.PI*2;r.beginPath(),r.moveTo(Math.cos(c)*l,Math.sin(c)*l),r.lineTo(Math.cos(c)*l*1.3,Math.sin(c)*l*1.3),r.stroke()}}else t==="dasher"?(r.beginPath(),r.moveTo(0,-l),r.lineTo(l,l),r.lineTo(-l,l),r.closePath(),r.fill()):(r.beginPath(),r.arc(0,0,l,0,Math.PI*2),r.fill())}else if(e==="depot"){r.fillStyle="#0f172a",r.strokeStyle="#334155",r.lineWidth=2,r.fillRect(-l*1.5,-l*.8,l*3,l*1.6),r.strokeRect(-l*1.5,-l*.8,l*3,l*1.6);let h="#facc15";t==="extender"&&(h="#38bdf8"),t==="recycler"&&(h="#ef4444"),t==="repair"&&(h="#22c55e"),t==="armory"&&(h="#a855f7"),t==="reactor"&&(h="#f97316"),t==="shield"&&(h="#06b6d4"),t==="magnet"&&(h="#ec4899"),t==="drill"&&(h="#94a3b8"),t==="lab"&&(h="#14b8a6"),r.fillStyle=h,r.globalAlpha=.8,r.fillRect(-l*1.5,-l*.1,l*3,l*.2),r.globalAlpha=1}r.restore()},[e,t,s]),w.jsx("canvas",{ref:i,width:s,height:s,style:{position:"static",display:"block"}})}function UE(){const{level:e}=O();return w.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-950/90 z-50 pointer-events-auto",children:w.jsxs(Ee.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center",children:[w.jsx("h1",{className:"text-8xl font-black text-red-600 mb-4 tracking-tighter drop-shadow-[0_0_30px_rgba(220,38,38,0.5)]",children:"DERAILED"}),w.jsx("p",{className:"text-2xl text-slate-400 mb-8 font-mono",children:"LOCOMOTIVE DESTROYED"}),w.jsxs("div",{className:"mb-12 p-6 bg-slate-900 rounded-lg border border-slate-800 inline-block",children:[w.jsx("div",{className:"text-sm text-slate-500 font-bold uppercase tracking-widest mb-1",children:"Level Reached"}),w.jsx("div",{className:"text-4xl font-black text-white",children:e})]}),w.jsx("div",{children:w.jsxs("button",{onClick:()=>window.location.reload(),className:"bg-red-600 hover:bg-red-500 text-white font-bold py-4 px-12 rounded-full shadow-lg flex items-center gap-3 mx-auto transition-all hover:scale-105",children:[w.jsx(nv,{className:"w-6 h-6"}),"RESTART ENGINE"]})})]})})}function $E({gameInstance:e}){if(!e)return null;const t=O(s=>s.godMode);return w.jsxs("div",{className:"absolute bottom-4 right-4 flex flex-col gap-2 pointer-events-auto z-50",children:[w.jsxs("button",{onClick:()=>e.advanceWave(),className:"bg-slate-800/80 hover:bg-slate-700 text-slate-200 px-3 py-2 rounded border border-slate-600 flex items-center gap-2 text-xs font-bold",children:[w.jsx(iT,{className:"w-4 h-4 text-blue-400"}),"NEXT WAVE"]}),w.jsxs("div",{className:"flex rounded border border-slate-600 overflow-hidden",children:[w.jsxs("button",{onClick:()=>e.forceLevelUp(),className:"bg-slate-800/80 hover:bg-slate-700 text-slate-200 px-3 py-2 flex items-center gap-2 text-xs font-bold border-r border-slate-600",children:[w.jsx(Qk,{className:"w-4 h-4 text-green-400"}),"LEVEL UP"]}),w.jsx("button",{onClick:()=>e.debugAutoLevelUp(),className:"bg-slate-800/80 hover:bg-slate-700 text-slate-200 px-2 py-2 flex items-center justify-center text-xs font-bold",title:"Auto Pick Random Upgrade",children:""})]}),w.jsxs("button",{onClick:()=>e.toggleGodMode(),className:`px-3 py-2 rounded border flex items-center gap-2 text-xs font-bold ${t?"bg-yellow-600/80 hover:bg-yellow-500 text-white border-yellow-400":"bg-slate-800/80 hover:bg-slate-700 text-slate-200 border-slate-600"}`,children:[w.jsx("span",{className:"text-yellow-400",children:""}),"GOD MODE"]}),w.jsxs("button",{onClick:()=>e.spawnMiniBoss(),className:"bg-slate-800/80 hover:bg-slate-700 text-slate-200 px-3 py-2 rounded border border-slate-600 flex items-center gap-2 text-xs font-bold",children:[w.jsx(lT,{className:"w-4 h-4 text-red-500"}),"SPAWN BOSS"]}),w.jsxs("button",{onClick:()=>e.debugSpawnDepot(),className:"bg-slate-800/80 hover:bg-slate-700 text-slate-200 px-3 py-2 rounded border border-slate-600 flex items-center gap-2 text-xs font-bold",children:[w.jsx(oT,{className:"w-4 h-4 text-amber-400"}),"SPAWN DEPOT"]}),w.jsxs("button",{onClick:()=>e.debugAddScrap(),className:"bg-slate-800/80 hover:bg-slate-700 text-slate-200 px-3 py-2 rounded border border-slate-600 flex items-center gap-2 text-xs font-bold",children:[w.jsx("span",{className:"text-yellow-400",children:""}),"+SCRAP"]})]})}const b0=[{id:"easy",label:"CADET",desc:"For those learning the ropes.",multiplier:.8,color:"text-green-400",border:"border-green-500/50"},{id:"normal",label:"ENGINEER",desc:"The standard experience.",multiplier:1,color:"text-blue-400",border:"border-blue-500/50"},{id:"hard",label:"CONDUCTOR",desc:"Unforgiving void.",multiplier:1.2,color:"text-red-400",border:"border-red-500/50"}];function WE({onStart:e}){const[t,s]=M.useState(1),[i,n]=M.useState(b0[1]),[r,o]=M.useState(null),[a,l]=M.useState(null),h=Qi.filter(d=>d.type==="wagon"&&d.rarity==="common"),u=()=>{r&&a&&e(r,a,i)},c=({label:d,value:f,max:g=10,icon:m,color:x="bg-blue-500"})=>w.jsxs("div",{className:"flex items-center gap-2 text-xs font-mono",children:[m&&w.jsx(m,{size:12,className:"text-slate-400"}),w.jsx("span",{className:"w-12 text-slate-400",children:d}),w.jsx("div",{className:"flex-1 h-2 bg-slate-800 rounded-full overflow-hidden",children:w.jsx(Ee.div,{initial:{width:0},animate:{width:`${f/g*100}%`},className:`h-full ${x}`})}),w.jsx("span",{className:"w-8 text-right text-slate-300",children:f})]});return w.jsxs("div",{className:"absolute inset-0 bg-slate-950 flex items-center justify-center z-50 p-8 pointer-events-auto overflow-hidden",children:[w.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none",style:{backgroundImage:"radial-gradient(circle at center, #1e293b 1px, transparent 1px)",backgroundSize:"40px 40px"}}),w.jsxs("div",{className:"max-w-7xl w-full relative z-10 flex flex-col h-full max-h-[900px]",children:[w.jsxs(Ee.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[w.jsx("h1",{className:"text-5xl font-black text-transparent bg-clip-text bg-gradient-to-b from-slate-100 to-slate-500 tracking-[0.2em]",children:"INITIATE RUN"}),w.jsxs("div",{className:"flex justify-center gap-2 mt-4 relative",children:[[1,2,3].map(d=>w.jsx("div",{className:`h-1 w-16 rounded-full transition-colors ${t>=d?"bg-blue-500":"bg-slate-800"}`},d)),w.jsx("button",{onClick:()=>window.location.href=window.location.pathname+"?quickstart=true",className:"absolute right-[-120px] top-[-10px] text-[10px] bg-red-900/50 text-red-400 px-2 py-1 rounded border border-red-800 hover:bg-red-900 hover:text-white transition-colors",children:"DEBUG START"})]})]}),w.jsx("div",{className:"flex-1 relative",children:w.jsxs(td,{mode:"wait",children:[t===1&&w.jsxs(Ee.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"h-full flex flex-col items-center justify-center",children:[w.jsx("h2",{className:"text-2xl text-slate-400 font-bold tracking-widest mb-12",children:"SELECT DIFFICULTY"}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 w-full max-w-5xl",children:b0.map(d=>w.jsxs("button",{onClick:()=>n(d),className:`p-8 rounded-2xl border-2 transition-all duration-300 text-left relative overflow-hidden group hover:-translate-y-2
                                                ${i.id===d.id?`${d.border} bg-slate-900 shadow-[0_0_50px_rgba(0,0,0,0.5)]`:"border-slate-800 bg-slate-900/50 hover:border-slate-600"}`,children:[w.jsx("div",{className:`text-3xl font-black mb-4 ${d.color}`,children:d.label}),w.jsx("p",{className:"text-slate-400 text-lg mb-8",children:d.desc}),w.jsxs("div",{className:"text-sm font-mono text-slate-500",children:["SCORE MULTIPLIER: ",w.jsxs("span",{className:"text-white",children:["x",d.multiplier]})]})]},d.id))}),w.jsxs("button",{onClick:()=>s(2),className:"mt-16 px-16 py-4 bg-blue-600 hover:bg-blue-500 text-white rounded-full font-bold tracking-widest shadow-lg hover:shadow-blue-500/25 transition-all flex items-center gap-2",children:["NEXT STEP ",w.jsx(am,{})]})]},"step1"),t===2&&w.jsxs(Ee.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"h-full flex flex-col",children:[w.jsx("h2",{className:"text-2xl text-center text-blue-400 font-bold tracking-widest mb-8",children:"SELECT ENGINE CLASS"}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 overflow-y-auto pb-4",children:zk.map(d=>w.jsxs("button",{onClick:()=>o(d),className:`p-4 rounded-xl border-2 transition-all duration-300 text-left relative overflow-hidden group flex flex-col
                                                ${(r==null?void 0:r.id)===d.id?"border-blue-500 bg-blue-950/50 shadow-lg ring-1 ring-blue-500/50":"border-slate-800 bg-slate-900/50 hover:border-slate-600 hover:bg-slate-800"}`,children:[w.jsxs("div",{className:"mb-4 relative h-32 bg-slate-950 rounded-lg border border-slate-800 flex items-center justify-center overflow-hidden",children:[w.jsx("div",{className:`w-20 h-20 rounded-full border-2 border-dashed opacity-50 ${(r==null?void 0:r.id)===d.id?"border-blue-500":"border-slate-600"}`,style:{borderRadius:d.track==="oval"?"40%":d.track==="circle"?"50%":"10%"}}),w.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-6xl font-black opacity-10 select-none",children:d.id[0].toUpperCase()})]}),w.jsx("h3",{className:`text-lg font-bold mb-1 ${(r==null?void 0:r.id)===d.id?"text-blue-400":"text-slate-200"}`,children:d.name}),w.jsx("p",{className:"text-xs text-slate-500 mb-4 h-8 leading-tight",children:d.desc}),w.jsxs("div",{className:"space-y-2 mt-auto",children:[w.jsx(c,{label:"HP",value:d.stats.hp,max:200,icon:aT,color:"bg-emerald-500"}),w.jsx(c,{label:"SPD",value:d.stats.speed,max:8,icon:Kc,color:"bg-cyan-500"}),w.jsx(c,{label:"MAG",value:d.stats.magnet,max:200,icon:rT,color:"bg-purple-500"})]})]},d.id))}),w.jsxs("div",{className:"flex justify-center gap-4 mt-8",children:[w.jsx("button",{onClick:()=>s(1),className:"px-8 py-3 rounded-full font-bold tracking-widest bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white transition-all",children:"BACK"}),w.jsxs("button",{disabled:!r,onClick:()=>s(3),className:`px-12 py-3 rounded-full font-bold tracking-widest transition-all flex items-center gap-2
                                            ${r?"bg-blue-600 hover:bg-blue-500 text-white shadow-lg":"bg-slate-800 text-slate-600 cursor-not-allowed"}`,children:["CONFIRM ENGINE ",w.jsx(am,{})]})]})]},"step2"),t===3&&w.jsxs(Ee.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"h-full flex flex-col",children:[w.jsx("h2",{className:"text-2xl text-center text-yellow-400 font-bold tracking-widest mb-8",children:"SELECT STARTING WAGON"}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6",children:h.map(d=>w.jsxs("button",{onClick:()=>l(d),className:`p-6 rounded-xl border-2 transition-all duration-300 text-left relative overflow-hidden group
                                                ${(a==null?void 0:a.id)===d.id?"border-yellow-500 bg-yellow-900/20 shadow-[0_0_30px_rgba(234,179,8,0.3)]":"border-slate-800 bg-slate-900/50 hover:border-slate-600 hover:bg-slate-800"}`,children:[w.jsxs("div",{className:"flex items-start justify-between mb-4",children:[w.jsx("div",{className:`p-3 rounded-lg ${(a==null?void 0:a.id)===d.id?"bg-yellow-500 text-black":"bg-slate-800 text-slate-400"}`,children:w.jsx(sT,{size:24})}),w.jsx("div",{className:"text-xs font-mono text-slate-500 uppercase tracking-wider",children:d.rarity})]}),w.jsx("h3",{className:`text-xl font-bold mb-2 ${(a==null?void 0:a.id)===d.id?"text-yellow-400":"text-slate-200"}`,children:d.title}),w.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:d.desc})]},d.id))}),w.jsxs("div",{className:"flex justify-center gap-4 mt-auto pt-8",children:[w.jsx("button",{onClick:()=>s(2),className:"px-8 py-4 rounded-full font-bold tracking-widest bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white transition-all",children:"BACK"}),w.jsx("button",{disabled:!a,onClick:u,className:`px-16 py-4 rounded-full font-bold tracking-widest transition-all text-lg
                                            ${a?"bg-yellow-500 hover:bg-yellow-400 text-black shadow-lg hover:shadow-yellow-500/25":"bg-slate-800 text-slate-600 cursor-not-allowed"}`,children:"LAUNCH SEQUENCE"})]})]},"step3")]})})]})]})}function HE(){const[e,t]=M.useState(G.isMuted),s=()=>{const i=G.toggleMute();t(i)};return w.jsx("button",{onClick:s,className:`p-2 rounded-lg flex items-center justify-center transition-colors ${e?"bg-red-500/20 text-red-400 hover:bg-red-500/30":"hover:bg-slate-700 text-slate-400 hover:text-slate-200"}`,title:e?"Unmute":"Mute",children:e?w.jsx(uT,{className:"w-5 h-5"}):w.jsx(hT,{className:"w-5 h-5"})})}function YE({gameInstance:e}){const t=O(c=>c.gameState),s=O(c=>c.setGameState),[i,n]=M.useState(!1),[r,o]=M.useState(!1),a=c=>{e&&e.selectCard(c)},l=(c,d,f)=>{e&&e.startGame(c,d,f)},h=()=>{i?(n(!1),s("PLAY")):(n(!0),s("GLOSSARY"))};Hu.useEffect(()=>{const c=d=>{d.key==="`"&&o(f=>!f)};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[]);const u=O(c=>c.cameraMode);return w.jsxs("div",{className:"w-full h-full relative font-mono",children:[t!=="SETUP"&&w.jsx(VE,{}),t!=="SETUP"&&w.jsx("div",{className:"absolute top-4 right-4 flex flex-col gap-2 z-40 items-end pointer-events-auto",children:w.jsxs("div",{className:"flex gap-1 bg-slate-900/80 p-1 rounded-xl border border-slate-700 backdrop-blur-sm",children:[w.jsx("button",{onClick:()=>e==null?void 0:e.toggleCamera(),className:`p-2 rounded-lg flex items-center justify-center transition-colors ${u==="birdseye"?"bg-blue-600 text-white shadow-lg shadow-blue-900/50":"hover:bg-slate-700 text-slate-400 hover:text-slate-200"}`,title:"Toggle Camera",children:w.jsx(Kc,{className:"w-5 h-5"})}),w.jsx("div",{className:"w-px bg-slate-700 my-1"}),w.jsx("button",{onClick:h,className:`p-2 rounded-lg flex items-center justify-center transition-colors ${i?"bg-blue-600 text-white shadow-lg shadow-blue-900/50":"hover:bg-slate-700 text-slate-400 hover:text-slate-200"}`,title:"Manual",children:w.jsx(Zk,{className:"w-5 h-5"})}),w.jsx("div",{className:"w-px bg-slate-700 my-1"}),w.jsx(HE,{})]})}),t==="SETUP"&&w.jsx(WE,{onStart:l}),t==="LEVEL_UP"&&w.jsx(OE,{onSelect:a}),t==="GAMEOVER"&&w.jsx(UE,{}),i&&w.jsx(zE,{onClose:h}),r&&w.jsx($E,{gameInstance:e})]})}function XE(){const e=M.useRef(null),[t,s]=M.useState(null),i=M.useRef(!1),n=M.useRef(null);return M.useEffect(()=>{if(e.current&&!t&&!i.current){i.current=!0;const r=new Yk(e.current);n.current=r,window.game=r;let o=!0;return setTimeout(async()=>{await r.init(a=>{if(o){s(a);const l=new URLSearchParams(window.location.search),h=l.get("quickstart")==="true"||l.get("debug")==="true";if(console.log("App.jsx: Checking Quick Start:",h,window.location.search),h){console.log("App.jsx: Debug Quick Start Triggered");const u=[{id:"pioneer",stats:{hp:100,speed:5,ram:0,magnet:120},track:"circle"}],c=["gunner","sniper","flame","mortar","tesla","cryo","railgun","acid","gravity","thumper"],d=c[Math.floor(Math.random()*c.length)];setTimeout(()=>{console.log("App.jsx: Executing startGame...");try{a.startGame(u[0],{id:d},{id:"normal",multiplier:1}),console.log("App.jsx: startGame executed successfully")}catch(f){console.error("App.jsx: Error starting game:",f)}},500)}}}),i.current=!1},0),()=>{o=!1,n.current&&(n.current.destroy(),n.current=null),i.current=!1,s(null)}}},[]),w.jsxs("div",{className:"relative w-full h-full bg-slate-950 overflow-hidden",children:[w.jsx("canvas",{ref:e,id:"gameCanvas",className:"block absolute top-0 left-0 z-0"}),w.jsx("div",{className:"absolute inset-0 pointer-events-none z-10",children:t&&w.jsx(YE,{gameInstance:t})})]})}mh.createRoot(document.getElementById("root")).render(w.jsx(Hu.StrictMode,{children:w.jsx(XE,{})}));export{M2 as $,Lx as A,Kt as B,tt as C,re as D,q as E,rx as F,Qa as G,ap as H,Le as I,J2 as J,lb as K,Ur as L,W as M,gt as N,vt as O,Vt as P,Tb as Q,gu as R,zc as S,wo as T,fu as U,hp as V,Gl as W,up as X,E2 as Y,_a as Z,kt as _,bx as a,ex as a0,Fx as a1,X as a2,mt as a3,Rb as a4,rC as a5,Zb as a6,CC as a7,TC as a8,RC as a9,DC as aa,IC as ab,Ox as ac,ki as ad,Sa as ae,Qp as af,Rr as ag,Db as ah,Ci as ai,qx as aj,Tp as ak,Cp as al,Mt as am,QS as an,em as ao,Jx as ap,qe as b,Kb as c,Ar as d,_e as e,kp as f,Hb as g,Ho as h,Oc as i,Nx as j,dx as k,Fe as l,Px as m,ku as n,bC as o,kC as p,AC as q,c2 as r,NC as s,Q as t,qS as u,LC as v,Wt as w,xe as x,Zy as y,Ie as z};
